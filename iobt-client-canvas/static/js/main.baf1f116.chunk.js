(this["webpackJsonpiobt-client-canvas"]=this["webpackJsonpiobt-client-canvas"]||[]).push([[0],{100:function(e){e.exports=JSON.parse('{"baseURL":"https://iobtweb.azurewebsites.net","rootAPIPath":"/api","localDebug":true,"mesh":[{"name":"n1","url":"http://localhost:5000"},{"name":"n2","url":"https://iobtmesh.azurewebsites.net"}],"defaultLatLng":[38.5876921,-79.39259]}')},132:function(e,t,n){},133:function(e,t,n){"use strict";n.r(t);var i=n(1),r=n(26),a=n.n(r),o=n(163),s=n(162),c=n(101),u=n(72),h=n(22),l=n(172),v=n(159),d=n(160),f=n(161),y=n(153),m=n(171),b=n(15),g=n(81),p=n(167),k=n(61),O=n.n(k),A=n(10),j=["children","fullWidth","isHidden"],w=Object(y.a)((function(e){return{root:{whiteSpace:"nowrap"}}})),x=function(e){var t=e.children,n=e.fullWidth,r=void 0!==n&&n,a=e.isHidden,o=void 0!==a&&a,s=Object(g.a)(e,j),c=w();return o?Object(A.jsx)(i.Fragment,{}):Object(A.jsx)(p.a,Object(b.a)(Object(b.a)({},s),{},{fullWidth:r,className:O()(c.root,s.className),children:t}))},E=function(e){return Object(A.jsx)(x,Object(b.a)(Object(b.a)({},e),{},{color:"inherit"}))},P=n(0),S=n(37),C=n(3),D=n(4),M=n(2),L=new(function(){function e(){Object(P.a)(this,e),this.registry={}}return Object(M.a)(e,[{key:"Pub",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];if(this.registry[e])return this.registry[e].forEach((function(e){e.apply(null,n)})),this}},{key:"Sub",value:function(e,t){return this.registry[e]||(this.registry[e]=[]),this.registry[e].push(t),this}},{key:"Unsub",value:function(e,t){return this.registry[e]&&delete this.registry[e],this}},{key:"Clear",value:function(){return this.registry={},this}}]),e}()),_=n(42),I=function(e){Object(C.a)(n,e);var t=Object(D.a)(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2?arguments[2]:void 0;return Object(P.a)(this,n),(e=t.call(this,i,r)).myName=void 0,e.x=void 0,e.y=void 0,e.myName=a||"",e}return Object(M.a)(n,[{key:"asVector",value:function(){return new _.a(this.x,this.y)}},{key:"setValues",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=e,this.y=t,this}},{key:"clonePoint",value:function(){return new n(this.x,this.y,this.myName)}},{key:"isEqualTo",value:function(e){return this.x===e.x&&this.y===e.y}},{key:"isNear",value:function(e,t){return!(Math.abs(e.x-this.x)>t)&&!(Math.abs(e.y-this.y)>t)}},{key:"addPoint",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x+=e,this.y+=t,this}},{key:"subtractPoint",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x-=e,this.y-=t,this}},{key:"midPoint",value:function(e){return new n((this.x+e.x)/2,(this.y+e.y)/2,"midpoint")}},{key:"mag",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y)}},{key:"atan",value:function(){return Math.atan2(this.y,this.x)}},{key:"normal",value:function(){var e=this.mag();return e=e||1,new n(this.x/e,this.y/e,"normal")}},{key:"sum",value:function(e){return this.x+=e.x,this.y+=e.y,this}},{key:"sumTo",value:function(e){return e.x+=this.x,e.y+=this.y,e}},{key:"setTo",value:function(e){return e.x=this.x,e.y=this.y,e}},{key:"subtract",value:function(e){return this.x-=e.x,this.y-=e.y,this}},{key:"deltaBetween",value:function(e){return new n(this.x-e.x,this.y-e.y,"delta")}},{key:"scale",value:function(e){return this.x*=e,this.y*=e,this}}]),n}(_.a),T=function(){function e(t){Object(P.a)(this,e),this.x1=void 0,this.y1=void 0,this.x2=void 0,this.y2=void 0,this.point=new I,this.source=void 0,this.source=t}return Object(M.a)(e,[{key:"set",value:function(e,t,n,i){return this.x1=e,this.y1=t,this.x2=n,this.y2=i,this}},{key:"width",value:function(){return this.x2-this.x1}},{key:"heigth",value:function(){return this.y2-this.y1}},{key:"centerX",value:function(){return(this.x2+this.x1)/2}},{key:"centerY",value:function(){return(this.y2+this.y1)/2}},{key:"init",value:function(e){return this.x1=e.x,this.y1=e.y,this.x2=e.x,this.y2=e.y,this}},{key:"merge",value:function(e){return this.x1=Math.min(this.x1,e.x1,e.x2),this.y1=Math.min(this.y1,e.y1,e.y2),this.x2=Math.max(this.x2,e.x2,e.x1),this.y2=Math.max(this.y2,e.y2,e.y1),this}},{key:"minmax",value:function(e){return this.x1=Math.min(this.x1,e.x),this.y1=Math.min(this.y1,e.y),this.x2=Math.max(this.x2,e.x),this.y2=Math.max(this.y2,e.y),this}},{key:"contains",value:function(e,t){return this.x1<=e&&e<=this.x2&&this.y1<=t&&t<=this.y2}},{key:"draw",value:function(e,t){var n=this.x2-this.x1,i=this.y2-this.y1;return t?e.fillRect(this.x1,this.y1,n,i):e.rect(this.x1,this.y1,n,i),this}}]),e}(),N=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;Object(P.a)(this,e),this.left=0,this.top=0,this.right=0,this.bottom=0,this.left=t,this.top=n,this.right=i,this.bottom=r}return Object(M.a)(e,[{key:"setAll",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.left=e,this.top=e,this.right=e,this.bottom=e,this}},{key:"width",get:function(){return this.left+this.right}},{key:"height",get:function(){return this.top+this.bottom}}]),e}(),R=function(){function e(){var t=this;Object(P.a)(this,e),this._request=void 0,this.stopped=!0,this.canvas=void 0,this.context=void 0,this.requestAnimation=window.requestAnimationFrame||window.webkitRequestAnimationFrame,this.cancelAnimation=window.cancelAnimationFrame,this.render=void 0,this.doAnimate=function(){t.render(t.context),t._request=t.requestAnimation(t.doAnimate)}}return Object(M.a)(e,[{key:"go",value:function(e){this.stopped=!1,this.doAnimate(),e&&e()}},{key:"stop",value:function(e){this.stopped=!0,this.cancelAnimation(this._request),e&&e()}},{key:"toggleOnOff",value:function(){return this.stopped?this.go():this.stop(),this.stopped}},{key:"clear",value:function(){this.context&&this.context.clearRect(0,0,this.canvas.width,this.canvas.height)}},{key:"resizeRoot",value:function(e,t){return this.canvas&&(this.canvas.width=e,this.canvas.height=t),this.canvas}},{key:"setRoot",value:function(e,t,n){this.canvas=e,this.context=this.canvas.getContext("2d"),this.resizeRoot(t,n),this.context.lineWidth=1,this.context.lineCap="round",this.context.strokeStyle="#000",this.pubMouseEvents(this.canvas)}},{key:"pubMouseEvents",value:function(e){var t=new I;function n(n,i){var r=e.getBoundingClientRect(),a=r.left,o=r.top;return t.setValues(n-a,i-o)}function i(n){var i=e.getBoundingClientRect(),r=i.left,a=i.top;return t.setValues(n.clientX-r,n.clientY-a)}function r(e){return{code:e.keyCode,shift:e.shiftKey,ctrl:e.ctrlKey,alt:e.altKey,meta:e.metaKey}}function a(e){return{shift:e.shiftKey,ctrl:e.ctrlKey,alt:e.altKey,button:e.button}}e.ownerDocument.addEventListener("keypress",(function(e){var t=r(e);L.Pub("onkeypress",e,t)})),e.ownerDocument.addEventListener("keydown",(function(e){var t=r(e);L.Pub("onkeydown",e,t)})),e.ownerDocument.addEventListener("keyup",(function(e){var t=r(e);L.Pub("onkeyup",e,t)})),e.addEventListener("mousedown",(function(e){e.preventDefault();var t=i(e),n=a(e);L.Pub("mousedown",t,e,n)})),e.addEventListener("touchstart",(function(e){e.preventDefault();var t=n(e.touches[0].clientX,e.touches[0].clientY);L.Pub("mousedown",t,e,{})})),e.addEventListener("mousemove",(function(e){e.preventDefault();var t=i(e),n=a(e);L.Pub("mousemove",t,e,n)})),e.addEventListener("touchmove",(function(e){e.preventDefault();var t=n(e.touches[0].clientX,e.touches[0].clientY);L.Pub("mousemove",t,e,{})})),e.addEventListener("wheel",(function(e){e.preventDefault();var t=i(e),n=a(e),r=Math.max(-1,Math.min(1,e.deltaX||-e.detail))>0?1.1:1/1.1,o=new I(e.offsetX,e.offsetY);L.Pub("wheel",t,o,r,e,n)})),e.addEventListener("dblclick",(function(e){e.preventDefault();var t=i(e),n=a(e);L.Pub("dblclick",t,e,n)})),e.addEventListener("click",(function(e){e.preventDefault();var t=i(e),n=a(e);L.Pub("click",t,e,n)})),e.addEventListener("mouseup",(function(e){e.preventDefault();var t=i(e),n=a(e);L.Pub("mouseup",t,e,n)})),e.addEventListener("touchend",(function(e){e.preventDefault();var t=n(e.changedTouches[0].clientX,e.changedTouches[0].clientY);L.Pub("mouseup",t,e,{})})),e.addEventListener("mouseover",(function(e){e.preventDefault();var t=i(e),n=a(e);L.Pub("mouseover",t,e,n)})),e.addEventListener("mouseout",(function(e){e.preventDefault();var t=i(e),n=a(e);L.Pub("mouseout",t,e,n)}))}}]),e}();var G,B=n(164),U=["draw"],V=function(e){e.draw;var t=Object(g.a)(e,U),n=function(e){var t=e.draw,n=Object(i.useRef)(null);return Object(i.useEffect)((function(){var i=0;if(n.current){var r=n.current,a=r.getContext("2d");(new R).setRoot(r,e.width,e.height),function e(){a&&(t(a,i),i=window.requestAnimationFrame(e))}()}return function(){window.cancelAnimationFrame(i)}}),[t,e]),n}(e),r=Object(i.useState)(void 0)[1],a=Object(i.useState)(0)[1];return Object(i.useEffect)((function(){L.Sub("mousemove",(function(e,t,n){a((new Date).getTime()),r(e)}))}),[r,a]),Object(A.jsxs)(B.a,{children:[Object(A.jsx)("h1",{children:e.title}),Object(A.jsx)("canvas",Object(b.a)({ref:n},t))]})},H=function(e){return Object(A.jsxs)("pre",{children:[JSON.stringify(e.children,void 0,3)," "]})},F=function(){return Object(A.jsx)("div",{children:"Empty component displayed if no component is available in FoRender class"})},K=function(){function e(){Object(P.a)(this,e),this.props={},this.Component=F}return Object(M.a)(e,[{key:"display",value:function(e){return e&&(this.props=e),Object(i.createElement)(this.Component,this.props)}}]),e}(),W=n(168),Y=function(e){Object(C.a)(n,e);var t=Object(D.a)(n);function n(){var e;Object(P.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).model=void 0,e.actionButtons=void 0,e.platformJSON=void 0,e.Component=function(t){return Object(A.jsxs)(i.Fragment,{children:[Object(A.jsx)(B.a,{display:"flex",flexWrap:"wrap",children:e.actionButtons}),Object(A.jsx)(V,Object(b.a)({},e.model.canvas2Params)),Object(A.jsx)(W.a,{only:"xs",children:Object(A.jsx)(H,{children:e.model.asPlatform(!0)})})]})},e}return n}(K),Q=n(8),q=n(7),z=n(32);!function(e){e.UNKNOWN="unknown",e.AT="@",e.THIS="this",e.SELF="self",e.ROOT="root"}(G||(G={}));var J=new(function(){function e(){Object(P.a)(this,e),this.hasOwnProperty=Object.prototype.hasOwnProperty}return Object(M.a)(e,[{key:"getFunctionName",value:function(e){var t=e.toString();return(t=(t=t.substr("function ".length)).substr(0,t.indexOf("("))).trim()}},{key:"generateUUID",value:function(){var e=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var n=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"===t?n:7&n|8).toString(16)}))}},{key:"asJson",value:function(e){var t=this.stringify(e);return JSON.parse(t)}},{key:"stringify",value:function(e){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3;function n(e){return e&&e.asReference?"resolveRef("+e.asReference()+","+e.constructor.name+")":e}function i(e,t){switch(e){case"myParent":return n(t);case"myMembers":return t?t.map((function(e){return n(e)})):t;case"_subcomponents":case"_lookup":case"_members":return t}if(!e.startsWith("_"))return t}return JSON.stringify(e,i,t)}},{key:"splitNamespaceType",value:function(e,t){var n=e.split("::"),i={namespace:"",name:e};return 2===n.length?i={namespace:n[0],name:n[1]}:t&&(i={namespace:n[0],name:t}),i}},{key:"getNamespace",value:function(e){var t=e.myType?e.myType.split("::"):[""];return t=t[0]}},{key:"getType",value:function(e){var t=e.myType?e.myType.split("::"):[""];return t=2===t.length?t[1]:t[0]}},{key:"namespace",value:function(e,t){return"".concat(e,"::").concat(t)}},{key:"randomInt",value:function(e,t){return e+Math.floor(Math.random()*(t-e+1))}},{key:"random",value:function(e,t){return e+Math.random()*(t-e)}},{key:"randomRGBColor",value:function(){var e=255*Math.random()|0,t=255*Math.random()|0,n=255*Math.random()|0;return"rgb(".concat(e,",").concat(t,",").concat(n,")")}},{key:"matches",value:function(e,t){return e===t||e&&t&&e.toLocaleLowerCase()===t.toLocaleLowerCase()}},{key:"startsWith",value:function(e,t){return e===t||e&&t&&e.toLocaleLowerCase().startsWith(t.toLocaleLowerCase())}},{key:"capitalizeFirstLetter",value:function(e){return e.charAt(0).toUpperCase()+e.slice(1)}},{key:"isSelf",value:function(e){return this.matches(e,G.AT)||this.matches(e,G.THIS)||this.matches(e,G.SELF)}},{key:"isArray",value:function(e){return Array.isArray?Array.isArray(e):"[object Array]"===Object.prototype.toString.call(e)}},{key:"isFunction",value:function(e){return"function"===typeof e}},{key:"isString",value:function(e){return"string"===typeof e}},{key:"isNumber",value:function(e){return"number"===typeof e}},{key:"isDate",value:function(e){return e instanceof Date}},{key:"isObject",value:function(e){return e&&"object"===typeof e}},{key:"isCustomLinkName",value:function(e){return!1}},{key:"isTyped",value:function(e){return e&&e.isInstanceOf}},{key:"isEmpty",value:function(e){if(null==e)return!0;if(e.length>0)return!1;if(0===e.length)return!0;if("object"!==typeof e)return!0;for(var t in e)if(this.hasOwnProperty.call(e,t))return!1;return!0}},{key:"removeDQ",value:function(e){return e.replace(/^"(.*)"$/,"$1")}},{key:"unwrap",value:function(e){return e.substring(1,e.length-1)}},{key:"wrapDQ",value:function(e){return'"'.concat(e,'"')}},{key:"wrapSQ",value:function(e){return"'".concat(e,"'")}},{key:"decomposeHostPath",value:function(e){var t=e.toLowerCase(),n=(t=(t=t.replace("http://","")).replace("https://","")).split("/")[0];return{fullpath:e,host:n,path:t.replace(n,"")}}},{key:"extend",value:function(e,t){if(!t)return e;for(var n in t)this.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}},{key:"mixin",value:function(e,t){if(!t)return e;if(!e)return t;var n,i=Object(z.a)(t);try{for(i.s();!(n=i.n()).done;){var r=n.value;e[r]=t[r]}}catch(a){i.e(a)}finally{i.f()}return e}},{key:"mixExact",value:function(t,n){if(!n)return t;if(!t)return n;for(var i in n)e.hasOwnProperty.call(t,i)&&(t[i]=n[i]);return t}},{key:"mixout",value:function(e,t){if(!t)return e;if(!e)return t;for(var n in t)this.hasOwnProperty.call(e,n)&&delete e[n];return e}},{key:"extract",value:function(e,t){var n={};return t&&t.forEach((function(t){Reflect.set(n,t,Reflect.getOwnPropertyDescriptor(e,t).value)})),n}},{key:"mixMap",value:function(e,t){if(!t)return e;var n={};for(var i in e){var r=t[i]||i;Reflect.set(n,r,Reflect.getOwnPropertyDescriptor(e,i).value)}return n}},{key:"intersect",value:function(e,t){if(!t)return e;if(!e)return t;var n={};for(var i in e)this.hasOwnProperty.call(t,i)?Reflect.set(n,i,Reflect.getOwnPropertyDescriptor(t,i).value):Reflect.set(n,i,Reflect.getOwnPropertyDescriptor(e,i).value);return n}},{key:"union",value:function(e,t){var n={};if(e)for(var i in e)Reflect.set(n,i,Reflect.getOwnPropertyDescriptor(e,i).value);if(t)for(var r in t)Reflect.set(n,r,Reflect.getOwnPropertyDescriptor(t,r).value);return n}},{key:"defineComputeOnlyProperty",value:function(e,t,n){return Object.defineProperty(e,t,{enumerable:!0,configurable:!0,get:n}),e}},{key:"defineCalculatedProperty",value:function(e,t,n){return Object.defineProperty(e,t,{enumerable:!0,configurable:!0,get:n,set:function(e){this["_".concat(t)]=e}}),e}},{key:"getMethods",value:function(e){var t=[];for(var n in e.prototype)"function"===typeof e[n]&&t.push(n);return t}},{key:"asArray",value:function(e,t){return this.isArray(e)?e:this.mapOverKeyValue(e,(function(e,n){return t?t(e,n):n}))}},{key:"applyOverKeyValue",value:function(e,t){var n=this,i={};return(e?Object.keys(e):[]).forEach((function(r){if(n.hasOwnProperty.call(e,r)){var a=e[r],o=t(r,a);o&&Reflect.set(i,r,o)}})),i}},{key:"mapOverKeyValue",value:function(e,t){var n=this,i=[];return(e?Object.keys(e):[]).forEach((function(r){if(n.hasOwnProperty.call(e,r)){var a=e[r],o=t(r,a);o&&i.push(o)}})),i}},{key:"forEachKeyValue",value:function(e,t){var n=this;(e?Object.keys(e):[]).forEach((function(i){if(n.hasOwnProperty.call(e,i)){var r=e[i];t(i,r)}}))}},{key:"findKeyForValue",value:function(e,t){for(var n in e)if(this.hasOwnProperty.call(e,t)&&e[n].matches(t))return n;return e}},{key:"extractReadWriteKeys",value:function(e){var t=[];return J.forEachKeyValue(e,(function(e,n){J.isFunction(n)||t.push(e)})),t}},{key:"extractComputedKeys",value:function(e){var t=[];return J.forEachKeyValue(e,(function(e,n){J.isFunction(n)&&t.push(e)})),t}},{key:"overrideComputed",value:function(e,t){J.forEachKeyValue(t,(function(t,n){try{J.isFunction(n)?J.defineCalculatedProperty(e,t,n):e[t]=n}catch(i){console.log(i)}}))}},{key:"extendComputed",value:function(e,t){J.forEachKeyValue(t,(function(t,n){try{e[t]||(J.isFunction(n)?J.defineCalculatedProperty(e,t,n):e[t]=n)}catch(i){console.log(i)}}))}},{key:"pluck",value:function(e){return function(t){return t[e]}}},{key:"distinctItems",value:function(e){var t={};return e.forEach((function(e){Reflect.set(t,e,e)})),Object.keys(t)}},{key:"groupBy",value:function(e,t){var n={};return t.forEach((function(t){var i=e(t);(Reflect.getOwnPropertyDescriptor(n,i).value||[]).push(t)})),n}}]),e}()),Z=function(){function e(t){Object(P.a)(this,e),this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,t&&this.copy(t)}return Object(M.a)(e,[{key:"append",value:function(e,t,n,i,r,a){var o=this.a,s=this.b,c=this.c,u=this.d;return 1===e&&0===t&&0===n&&1===i||(this.a=o*e+c*t,this.b=s*e+u*t,this.c=o*n+c*i,this.d=s*n+u*i),this.tx=o*r+c*a+this.tx,this.ty=s*r+u*a+this.ty,this}},{key:"prepend",value:function(e,t,n,i,r,a){var o=this.a,s=this.c,c=this.tx;return this.a=e*o+n*this.b,this.b=t*o+i*this.b,this.c=e*s+n*this.d,this.d=t*s+i*this.d,this.tx=e*c+n*this.ty+r,this.ty=t*c+i*this.ty+a,this}},{key:"set",value:function(e,t,n,i,r,a){return this.a=e,this.b=t,this.c=n,this.d=i,this.tx=r,this.ty=a,this}},{key:"appendMatrix",value:function(e){return this.append(e.a,e.b,e.c,e.d,e.tx,e.ty)}},{key:"prependMatrix",value:function(e){return this.prepend(e.a,e.b,e.c,e.d,e.tx,e.ty)}},{key:"appendTransform",value:function(t,n,i,r,a,o,s,c,u){if(a%360)var h=a*e.DEG_TO_RAD,l=Math.cos(h),v=Math.sin(h);else l=1,v=0;return o||s?(o*=e.DEG_TO_RAD,s*=e.DEG_TO_RAD,this.append(Math.cos(s),Math.sin(s),-Math.sin(o),Math.cos(o),t,n),this.append(l*i,v*i,-v*r,l*r,0,0)):this.append(l*i,v*i,-v*r,l*r,t,n),(c||u)&&(this.tx-=c*this.a+u*this.c,this.ty-=c*this.b+u*this.d),this}},{key:"prependTransform",value:function(t,n,i,r,a,o,s,c,u){if(a%360)var h=a*e.DEG_TO_RAD,l=Math.cos(h),v=Math.sin(h);else l=1,v=0;return(c||u)&&(this.tx-=c,this.ty-=u),o||s?(o*=e.DEG_TO_RAD,s*=e.DEG_TO_RAD,this.prepend(l*i,v*i,-v*r,l*r,0,0),this.prepend(Math.cos(s),Math.sin(s),-Math.sin(o),Math.cos(o),t,n)):this.prepend(l*i,v*i,-v*r,l*r,t,n),this}},{key:"rotate",value:function(t){t*=e.DEG_TO_RAD;var n=Math.cos(t),i=Math.sin(t),r=this.a,a=this.b;return this.a=r*n+this.c*i,this.b=a*n+this.d*i,this.c=-r*i+this.c*n,this.d=-a*i+this.d*n,this}},{key:"skew",value:function(t,n){return t*=e.DEG_TO_RAD,n*=e.DEG_TO_RAD,this.append(Math.cos(n),Math.sin(n),-Math.sin(t),Math.cos(t),0,0),this}},{key:"scale",value:function(e,t){return this.a*=e,this.b*=e,this.c*=t,this.d*=t,this}},{key:"translate",value:function(e,t){return this.tx+=this.a*e+this.c*t,this.ty+=this.b*e+this.d*t,this}},{key:"identity",value:function(){return this.a=this.d=1,this.b=this.c=this.tx=this.ty=0,this}},{key:"invert",value:function(){var e=this.a,t=this.b,n=this.c,i=this.d,r=this.tx,a=e*i-t*n;return this.a=i/a,this.b=-t/a,this.c=-n/a,this.d=e/a,this.tx=(n*this.ty-i*r)/a,this.ty=-(e*this.ty-t*r)/a,this}},{key:"invertCopy",value:function(){return new e(this).invert()}},{key:"isIdentity",value:function(){return 0===this.tx&&0===this.ty&&1===this.a&&0===this.b&&0===this.c&&1===this.d}},{key:"equals",value:function(e){return this.tx===e.tx&&this.ty===e.ty&&this.a===e.a&&this.b===e.b&&this.c===e.c&&this.d===e.d}},{key:"transformPoint",value:function(e,t,n){return(n=n||new I).x=e*this.a+t*this.c+this.tx,n.y=e*this.b+t*this.d+this.ty,n}},{key:"invertPoint",value:function(e,t,n){return this.invertCopy().transformPoint(e,t,n)}},{key:"decompose",value:function(t){null==t&&(t={}),t.x=this.tx,t.y=this.ty,t.scaleX=Math.sqrt(this.a*this.a+this.b*this.b),t.scaleY=Math.sqrt(this.c*this.c+this.d*this.d);var n=Math.atan2(-this.c,this.d),i=Math.atan2(this.b,this.a);return Math.abs(1-n/i)<1e-5?(t.rotation=i/e.DEG_TO_RAD,this.a<0&&this.d>=0&&(t.rotation+=t.rotation<=0?180:-180),t.skewX=t.skewY=0):(t.skewX=n/e.DEG_TO_RAD,t.skewY=i/e.DEG_TO_RAD),t}},{key:"copy",value:function(e){return this.a=e.a,this.b=e.b,this.c=e.c,this.d=e.d,this.tx=e.tx,this.ty=e.ty,this}},{key:"clone",value:function(){return new e(this)}},{key:"toString",value:function(){return"[Matrix2D (a="+this.a+" b="+this.b+" c="+this.c+" d="+this.d+" tx="+this.tx+" ty="+this.ty+")]"}}]),e}();Z.DEG_TO_RAD=Math.PI/180;new Z;var X,$=n(19),ee=n(102),te=n(166),ne=0;!function(e){e[e.primitive=0]="primitive",e[e.defined=1]="defined",e[e.created=2]="created",e[e.destroyed=3]="destroyed"}(X||(X={}));var ie=function(){function e(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3?arguments[3]:void 0;Object(P.a)(this,e),this.id=0,this.cmd="",this.object=void 0,this.value=void 0,this.id=i,this.cmd=t,this.object=n,this.value=r}return Object(M.a)(e,[{key:"guid",get:function(){return this.object.myGuid}},{key:"simpleGuid",get:function(){return this.object.myGuid.slice(-8)}},{key:"myGuid",get:function(){return this.object.myGuid}},{key:"myType",get:function(){return this.object.myType}},{key:"myName",get:function(){return this.object.myName}},{key:"isNamed",value:function(e){return J.matches(e,this.myName)}},{key:"isCmd",value:function(e){return J.matches(e,this.cmd)}}]),e}(),re=function(){function e(){Object(P.a)(this,e),this._processLock={}}return Object(M.a)(e,[{key:"isLocked",value:function(e){return!!this._processLock[e]}},{key:"addLock",value:function(e){this.isLocked(e)||(this._processLock[e]=0),this._processLock[e]+=1}},{key:"unLock",value:function(e){this.isLocked(e)&&(this._processLock[e]-=1,this._processLock[e]<=0&&delete this._processLock[e])}},{key:"protected",value:function(e,t,n){this.addLock(e);try{n(t)}catch(i){console.error("protected",i)}this.unLock(e)}},{key:"whenUnprotected",value:function(e,t,n){if(!this.isLocked(e))try{n(t)}catch(i){console.error("whenUnprotected ",i)}}}]),e}(),ae=(new re,new re,function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:500;Object(P.a)(this,e),this.mute=!1,this.observable=void 0,this.emit=void 0,this.debounced=void 0,this.emit=new ee.a,this.observable=this.emit.asObservable(),this.debounced=new ee.a,this.debounced.asObservable().pipe(Object(te.a)(n)).subscribe((function(e){e.id=ne++,t.broadcast(e)}))}return Object(M.a)(e,[{key:"broadcast",value:function(e){return!this.mute&&this.emit.next(e),this}},{key:"primitive",value:function(e,t){return this.broadcast(new ie("primitive",e,ne++,t)),this}},{key:"defined",value:function(e){return this.broadcast(new ie("defined",e,ne++)),this}},{key:"event",value:function(e,t,n){return this.broadcast(new ie(e,t,ne++,n)),this}},{key:"created",value:function(e,t){return this.broadcast(new ie("created",e,ne++,t)),this}},{key:"destroyed",value:function(e){return this.broadcast(new ie("destroyed",e,ne++)),this}},{key:"unparent",value:function(e){return this.broadcast(new ie("unparent",e,ne++)),this}},{key:"reparent",value:function(e){return this.broadcast(new ie("reparent",e,ne++)),this}},{key:"action",value:function(e,t,n){return this.broadcast(new ie("run",e,ne++,{action:t,params:n})),this}},{key:"command",value:function(e,t){return this.broadcast(new ie("command",e,ne++,t)),this}},{key:"selected",value:function(e,t){return this.broadcast(new ie("selected",e,ne++,t)),this}},{key:"pageSelections",value:function(e,t){return this.broadcast(new ie("pageselections",e,ne++,t)),this}},{key:"layout",value:function(e,t){return this.broadcast(new ie("layout",e,ne++,t)),this}},{key:"changed",value:function(e,t){return this.broadcast(new ie("changed",e,ne++,t)),this}},{key:"glued",value:function(e,t){return this.broadcast(new ie("glued",e,ne++,t)),this}},{key:"unglued",value:function(e,t){return this.broadcast(new ie("unglued",e,ne++,t)),this}},{key:"dropped",value:function(e,t){return this.broadcast(new ie("dropped",e,ne++,t)),this}},{key:"handle",value:function(e,t){return this.debounced.next(new ie("handle",e,ne++,t)),this}},{key:"moved",value:function(e,t){return this.debounced.next(new ie("moved",e,ne++,t)),this}},{key:"easeTo",value:function(e,t){return this.broadcast(new ie("easeTo",e,ne++,t)),this}},{key:"easeTween",value:function(e,t){return this.broadcast(new ie("easeTween",e,ne++,t)),this}},{key:"moveComplete",value:function(e,t){return this.debounced.next(new ie("moveComplete",e,ne++,t)),this}}]),e}()),oe=new ae(300);new ae;var se,ce=function(){function e(t,n){Object(P.a)(this,e),this._myGuid=void 0,this.myName=G.UNKNOWN,this.myParent=void 0,this._isVisible=!0,this._isHitable=!0,this.myClass=void 0,this._displayName=void 0,n&&(this.myParent=function(){return n}),this.override(t)}return Object(M.a)(e,[{key:"isVisible",get:function(){return this._isVisible},set:function(e){this._isVisible=e}},{key:"isInvisible",get:function(){return!this._isVisible},set:function(e){this._isVisible=!e}},{key:"isHitable",get:function(){return this._isHitable},set:function(e){this._isHitable=e}},{key:"show",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this._isVisible=!!e,this}},{key:"hide",value:function(){return this._isVisible=!1,this}},{key:"isPublic",get:function(){return this._isVisible}},{key:"myType",get:function(){return this.constructor.name},set:function(e){}},{key:"myGuid",get:function(){return this._myGuid||(this._myGuid=J.generateUUID()),this._myGuid},set:function(e){this._myGuid||(this._myGuid=e)}},{key:"generateName",value:function(){var e=this.myGuid.slice(-6);return this.myName="".concat(this.myType,"_").concat(e),this}},{key:"defaultName",value:function(e){return e?this.myName=e:J.matches(this.myName,G.UNKNOWN)&&this.generateName(),this}},{key:"displayName",get:function(){return this._displayName?this._displayName:"".concat(this.myName," - ").concat(this.myType)},set:function(e){this._displayName=e}},{key:"setName",value:function(e){return this.myName=e,this}},{key:"is2D",value:function(){return!1}},{key:"is3D",value:function(){return!1}},{key:"asReference",value:function(){var e=this.myParent&&this.myParent();return e?"".concat(this.myName,".").concat(e.asReference()):G.ROOT}},{key:"then",value:function(e){return e(this),this}},{key:"hasAncestor",value:function(e){if(e===this)return!0;var t=this.myParent&&this.myParent();return e===t||Boolean(t&&(null===t||void 0===t?void 0:t.hasAncestor(e)))}},{key:"hasParent",get:function(){return!!(this.myParent&&this.myParent())}},{key:"removeParent",value:function(e){return this.hasParent&&this.myParent&&this.myParent()===e&&(this.myParent=void 0),this.hasParent}},{key:"setParent",value:function(e){return(this.myParent&&this.myParent())!==e&&(this.myParent=function(){return e}),this}},{key:"wait",value:function(e,t){return setTimeout(t,e),this}},{key:"getChildAt",value:function(e){}},{key:"extract",value:function(e,t){var n=this,i=t||{};return e&&e.forEach((function(e){i[e]=Reflect.getOwnPropertyDescriptor(n,e).value})),i}},{key:"override",value:function(e){return e&&J.overrideComputed(this,e),this}},{key:"extend",value:function(e){return e&&J.extendComputed(this,e),this}},{key:"getMethodList",value:function(){var e,t=(e=this,Object.getOwnPropertyNames(e).filter((function(t){return"function"===typeof e[t]}))),n=this,i={};return t.forEach((function(e){Reflect.set(i,e,Reflect.getOwnPropertyDescriptor(n,e).value)})),t}},{key:"debug",get:function(){return J.stringify(this)}},{key:"asJsonRaw",get:function(){var e=J.stringify(this);return JSON.parse(e)}},{key:"asJson",get:function(){return this.toJson()}},{key:"toJson",value:function(){return{myName:this.myName,myGuid:this.myGuid,myType:this.myType}}},{key:"jsonMerge",value:function(e){var t=J.asJson(this);return J.isEmpty(e)||J.forEachKeyValue(e,(function(e,n){if(!t[e]&&!J.isEmpty(n)){var i=n&&n.asJson;t[e]=i||n}})),t}}],[{key:"beep",value:function(){new Audio("data:audio/wav;base64,//uQRAAAAWMSLwUIYAAsYkXgoQwAEaYLWfkWgAI0wWs/ItAAAGDgYtAgAyN+QWaAAihwMWm4G8QQRDiMcCBcH3Cc+CDv/7xA4Tvh9Rz/y8QADBwMWgQAZG/ILNAARQ4GLTcDeIIIhxGOBAuD7hOfBB3/94gcJ3w+o5/5eIAIAAAVwWgQAVQ2ORaIQwEMAJiDg95G4nQL7mQVWI6GwRcfsZAcsKkJvxgxEjzFUgfHoSQ9Qq7KNwqHwuB13MA4a1q/DmBrHgPcmjiGoh//EwC5nGPEmS4RcfkVKOhJf+WOgoxJclFz3kgn//dBA+ya1GhurNn8zb//9NNutNuhz31f////9vt///z+IdAEAAAK4LQIAKobHItEIYCGAExBwe8jcToF9zIKrEdDYIuP2MgOWFSE34wYiR5iqQPj0JIeoVdlG4VD4XA67mAcNa1fhzA1jwHuTRxDUQ//iYBczjHiTJcIuPyKlHQkv/LHQUYkuSi57yQT//uggfZNajQ3Vmz+Zt//+mm3Wm3Q576v////+32///5/EOgAAADVghQAAAAA//uQZAUAB1WI0PZugAAAAAoQwAAAEk3nRd2qAAAAACiDgAAAAAAABCqEEQRLCgwpBGMlJkIz8jKhGvj4k6jzRnqasNKIeoh5gI7BJaC1A1AoNBjJgbyApVS4IDlZgDU5WUAxEKDNmmALHzZp0Fkz1FMTmGFl1FMEyodIavcCAUHDWrKAIA4aa2oCgILEBupZgHvAhEBcZ6joQBxS76AgccrFlczBvKLC0QI2cBoCFvfTDAo7eoOQInqDPBtvrDEZBNYN5xwNwxQRfw8ZQ5wQVLvO8OYU+mHvFLlDh05Mdg7BT6YrRPpCBznMB2r//xKJjyyOh+cImr2/4doscwD6neZjuZR4AgAABYAAAABy1xcdQtxYBYYZdifkUDgzzXaXn98Z0oi9ILU5mBjFANmRwlVJ3/6jYDAmxaiDG3/6xjQQCCKkRb/6kg/wW+kSJ5//rLobkLSiKmqP/0ikJuDaSaSf/6JiLYLEYnW/+kXg1WRVJL/9EmQ1YZIsv/6Qzwy5qk7/+tEU0nkls3/zIUMPKNX/6yZLf+kFgAfgGyLFAUwY//uQZAUABcd5UiNPVXAAAApAAAAAE0VZQKw9ISAAACgAAAAAVQIygIElVrFkBS+Jhi+EAuu+lKAkYUEIsmEAEoMeDmCETMvfSHTGkF5RWH7kz/ESHWPAq/kcCRhqBtMdokPdM7vil7RG98A2sc7zO6ZvTdM7pmOUAZTnJW+NXxqmd41dqJ6mLTXxrPpnV8avaIf5SvL7pndPvPpndJR9Kuu8fePvuiuhorgWjp7Mf/PRjxcFCPDkW31srioCExivv9lcwKEaHsf/7ow2Fl1T/9RkXgEhYElAoCLFtMArxwivDJJ+bR1HTKJdlEoTELCIqgEwVGSQ+hIm0NbK8WXcTEI0UPoa2NbG4y2K00JEWbZavJXkYaqo9CRHS55FcZTjKEk3NKoCYUnSQ0rWxrZbFKbKIhOKPZe1cJKzZSaQrIyULHDZmV5K4xySsDRKWOruanGtjLJXFEmwaIbDLX0hIPBUQPVFVkQkDoUNfSoDgQGKPekoxeGzA4DUvnn4bxzcZrtJyipKfPNy5w+9lnXwgqsiyHNeSVpemw4bWb9psYeq//uQZBoABQt4yMVxYAIAAAkQoAAAHvYpL5m6AAgAACXDAAAAD59jblTirQe9upFsmZbpMudy7Lz1X1DYsxOOSWpfPqNX2WqktK0DMvuGwlbNj44TleLPQ+Gsfb+GOWOKJoIrWb3cIMeeON6lz2umTqMXV8Mj30yWPpjoSa9ujK8SyeJP5y5mOW1D6hvLepeveEAEDo0mgCRClOEgANv3B9a6fikgUSu/DmAMATrGx7nng5p5iimPNZsfQLYB2sDLIkzRKZOHGAaUyDcpFBSLG9MCQALgAIgQs2YunOszLSAyQYPVC2YdGGeHD2dTdJk1pAHGAWDjnkcLKFymS3RQZTInzySoBwMG0QueC3gMsCEYxUqlrcxK6k1LQQcsmyYeQPdC2YfuGPASCBkcVMQQqpVJshui1tkXQJQV0OXGAZMXSOEEBRirXbVRQW7ugq7IM7rPWSZyDlM3IuNEkxzCOJ0ny2ThNkyRai1b6ev//3dzNGzNb//4uAvHT5sURcZCFcuKLhOFs8mLAAEAt4UWAAIABAAAAAB4qbHo0tIjVkUU//uQZAwABfSFz3ZqQAAAAAngwAAAE1HjMp2qAAAAACZDgAAAD5UkTE1UgZEUExqYynN1qZvqIOREEFmBcJQkwdxiFtw0qEOkGYfRDifBui9MQg4QAHAqWtAWHoCxu1Yf4VfWLPIM2mHDFsbQEVGwyqQoQcwnfHeIkNt9YnkiaS1oizycqJrx4KOQjahZxWbcZgztj2c49nKmkId44S71j0c8eV9yDK6uPRzx5X18eDvjvQ6yKo9ZSS6l//8elePK/Lf//IInrOF/FvDoADYAGBMGb7FtErm5MXMlmPAJQVgWta7Zx2go+8xJ0UiCb8LHHdftWyLJE0QIAIsI+UbXu67dZMjmgDGCGl1H+vpF4NSDckSIkk7Vd+sxEhBQMRU8j/12UIRhzSaUdQ+rQU5kGeFxm+hb1oh6pWWmv3uvmReDl0UnvtapVaIzo1jZbf/pD6ElLqSX+rUmOQNpJFa/r+sa4e/pBlAABoAAAAA3CUgShLdGIxsY7AUABPRrgCABdDuQ5GC7DqPQCgbbJUAoRSUj+NIEig0YfyWUho1VBBBA//uQZB4ABZx5zfMakeAAAAmwAAAAF5F3P0w9GtAAACfAAAAAwLhMDmAYWMgVEG1U0FIGCBgXBXAtfMH10000EEEEEECUBYln03TTTdNBDZopopYvrTTdNa325mImNg3TTPV9q3pmY0xoO6bv3r00y+IDGid/9aaaZTGMuj9mpu9Mpio1dXrr5HERTZSmqU36A3CumzN/9Robv/Xx4v9ijkSRSNLQhAWumap82WRSBUqXStV/YcS+XVLnSS+WLDroqArFkMEsAS+eWmrUzrO0oEmE40RlMZ5+ODIkAyKAGUwZ3mVKmcamcJnMW26MRPgUw6j+LkhyHGVGYjSUUKNpuJUQoOIAyDvEyG8S5yfK6dhZc0Tx1KI/gviKL6qvvFs1+bWtaz58uUNnryq6kt5RzOCkPWlVqVX2a/EEBUdU1KrXLf40GoiiFXK///qpoiDXrOgqDR38JB0bw7SoL+ZB9o1RCkQjQ2CBYZKd/+VJxZRRZlqSkKiws0WFxUyCwsKiMy7hUVFhIaCrNQsKkTIsLivwKKigsj8XYlwt/WKi2N4d//uQRCSAAjURNIHpMZBGYiaQPSYyAAABLAAAAAAAACWAAAAApUF/Mg+0aohSIRobBAsMlO//Kk4soosy1JSFRYWaLC4qZBYWFRGZdwqKiwkNBVmoWFSJkWFxX4FFRQWR+LsS4W/rFRb/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////VEFHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAU291bmRib3kuZGUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMjAwNGh0dHA6Ly93d3cuc291bmRib3kuZGUAAAAAAAAAACU=").play()}},{key:"jsonAlert",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"JSON Alert";try{alert(t+"\r"+JSON.stringify(e,void 0,3))}catch(n){alert(t+"\r"+JSON.stringify(e.asJson,void 0,3)),alert(n)}}}]),e}(),ue=function(e){Object(C.a)(n,e);var t=Object(D.a)(n);function n(e,i){var r;return Object(P.a)(this,n),(r=t.call(this,e,i)).opacity=1,r.isSelected=!1,r.color=void 0,r._x=void 0,r._y=void 0,r._width=void 0,r._height=void 0,r.rotationZ=function(){return 0},r.doubleClick=void 0,r.openEditor=void 0,r.closeEditor=void 0,r.drawHover=void 0,r.setupHoverEnterDraw=void 0,r.setupHoverExitDraw=void 0,r.setupOverlapEnterDraw=void 0,r.setupOverlapExitDraw=void 0,r.sendKeys=void 0,r.preDraw=void 0,r.postDraw=void 0,r._matrix=void 0,r._invMatrix=void 0,r._boundry=new T(Object($.a)(r)),r.isDragable=function(){return!0},r.getOffset=function(e){var t=r.x,n=r.y;return new I(t-e.x,n-e.y)},r.getLocation=function(){return{x:r.x,y:r.y,z:0}},r.setLocation=function(e){r.x=e?e.x:0,r.y=e?e.y:0},r.localHitTest=function(e){var t=e.x,n=e.y,i=r.globalToLocal(t,n);return!(i.x<0)&&(!(i.x>r.width)&&(!(i.y<0)&&!(i.y>r.height)))},r.hitTest=function(e){return r.isHitable&&r.isVisible&&r.localHitTest(e)},r.overlapTest=function(e){var t=r.globalToLocalFrame(e.x1,e.y1,e.x2,e.y2);return!!r.localContains(t.x1,t.y1)||(!!r.localContains(t.x1,t.y2)||(!!r.localContains(t.x2,t.y1)||!!r.localContains(t.x2,t.y2)))},r.afterRender=function(e){e.save(),e.lineWidth=4,e.strokeStyle="pink",r.drawBoundry(e),e.restore()},r.drawTextCircle=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:100,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Math.PI/2,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;if(t){e.save(),e.textAlign="center",e.textBaseline="middle",e.translate(r,a),e.rotate(i-Math.PI/2);for(var o=t.length,s=0;s<o;s++){var c=t[s],u=e.measureText(c).width/n*.5;e.rotate(u),e.save(),e.translate(0,-n),e.fillText(c,0,0),e.restore(),e.rotate(u)}e.restore()}},r.drawText=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;t&&e.fillText(t,n,i)},r.drawSelected=function(e){e.strokeStyle="red",e.lineWidth=4,r.drawOutline(e),r.drawPin(e)},r.draw=function(e){e.fillStyle=r.color,e.lineWidth=1,e.fillRect(0,0,r.width,r.height)},r.override(e),r}return Object(M.a)(n,[{key:"x",get:function(){return this._x||0},set:function(e){this.smash(),this._x=e}},{key:"y",get:function(){return this._y||0},set:function(e){this.smash(),this._y=e}},{key:"width",get:function(){return this._width||0},set:function(e){this._width=e}},{key:"height",get:function(){return this._height||0},set:function(e){this._height=e}},{key:"smash",value:function(){this._matrix=void 0,this._invMatrix=void 0}},{key:"computeBoundry",value:function(e){var t=this.getGlobalMatrix(),n=e.point;return e.init(t.transformPoint(0,0,n)),e.minmax(t.transformPoint(0,this.height,n)),e.minmax(t.transformPoint(this.width,0,n)),e.minmax(t.transformPoint(this.width,this.height,n)),e}},{key:"boundryFrame",get:function(){return this.computeBoundry(this._boundry),this._boundry}},{key:"drawBoundry",value:function(e){e.beginPath(),e.setLineDash([5,5]),this.boundryFrame.draw(e,!1),e.stroke()}},{key:"is2D",value:function(){return!0}},{key:"set",value:function(e,t,n,i){return this.x=e,this.y=t,this.width=n,this.height=i,this}},{key:"contains",value:function(e,t){return this.x<=e&&e<=this.x+this.width&&this.y<=t&&t<=this.y+this.height}},{key:"localContains",value:function(e,t){return 0<=e&&e<=this.width&&0<=t&&t<=this.height}},{key:"toJson",value:function(){return J.mixin(Object(Q.a)(Object(q.a)(n.prototype),"toJson",this).call(this),{x:this.x,y:this.y,width:this.width,height:this.height})}},{key:"initialize",value:function(){arguments.length>0&&void 0!==arguments[0]||Number.NaN,arguments.length>1&&void 0!==arguments[1]||Number.NaN,arguments.length>2&&void 0!==arguments[2]||Number.NaN;return this}},{key:"didLocationChange",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Number.NaN,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.NaN,n=(arguments.length>2&&void 0!==arguments[2]||Number.NaN,!1);return Number.isNaN(e)||this.x===e||(n=!0,this.x=e),Number.isNaN(t)||this.y===t||(n=!0,this.y=t),n}},{key:"easeToNoLifecycle",value:function(e,t){return this.initialize(e,t),this}},{key:"easeTween",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.5;return oe.easeTween(this,{time:t,undefined:void 0,to:e}),this}},{key:"dropAt",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Number.NaN,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.NaN,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Number.NaN;return this.didLocationChange(e,t,n)&&oe.dropped(this,this.getLocation()),this}},{key:"move",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Number.NaN,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.NaN,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Number.NaN;return this.didLocationChange(e,t,n)&&oe.moved(this,this.getLocation()),this}},{key:"moveTo",value:function(e,t){var n=e.x+(t&&t.x?t.x:0),i=e.y+(t&&t.y?t.y:0);return this.move(n,i)}},{key:"moveBy",value:function(e,t){var n=this.x+e.x+(t&&t.x?t.x:0),i=this.y+e.y+(t&&t.y?t.y:0);return this.move(n,i)}},{key:"updateContext",value:function(e){var t=this.getMatrix();e.transform(t.a,t.b,t.c,t.d,t.tx,t.ty),e.globalAlpha*=this.opacity}},{key:"getGlobalMatrix",value:function(){var e=new Z(this.getMatrix()),t=this.myParent&&this.myParent();return t&&e.prependMatrix(t.getGlobalMatrix()),e}},{key:"getMatrix",value:function(){return void 0===this._matrix&&(this._matrix=new Z,this._matrix.appendTransform(this.x,this.y,1,1,0,0,0,0,0)),this._matrix}},{key:"getInvMatrix",value:function(){return void 0===this._invMatrix&&(this._invMatrix=this.getMatrix().invertCopy()),this._invMatrix}},{key:"localToGlobal",value:function(e,t,n){return this.getGlobalMatrix().transformPoint(e,t,n)}},{key:"localToGlobalPoint",value:function(e){return this.getGlobalMatrix().transformPoint(e.x,e.y,e)}},{key:"globalToLocal",value:function(e,t,n){return this.getGlobalMatrix().invertCopy().transformPoint(e,t,n)}},{key:"globalToLocalPoint",value:function(e){return this.getGlobalMatrix().invertCopy().transformPoint(e.x,e.y,e)}},{key:"globalToLocalFrame",value:function(e,t,n,i,r){r=r||new T;var a=this.getGlobalMatrix().invertCopy();return r.init(a.transformPoint(e,t,r.point)),r.minmax(a.transformPoint(e,i,r.point)),r.minmax(a.transformPoint(n,t,r.point)),r.minmax(a.transformPoint(n,i,r.point)),r}},{key:"localToLocal",value:function(e,t,n,i){return i=this.localToGlobal(e,t,i),n.globalToLocal(i.x,i.y,i)}},{key:"globalCenter",value:function(){var e=this.pinLocation(),t=e.x,n=e.y;return this.getGlobalMatrix().transformPoint(t,n)}},{key:"pinLocation",value:function(){return{x:0,y:0,z:0}}},{key:"findObjectUnderPoint",value:function(e,t){return this.hitTest(e)?this:void 0}},{key:"render",value:function(e){if(!this.isInvisible)return e.save(),this.updateContext(e),this.preDraw&&this.preDraw(e),this.draw(e),this.drawHover&&this.drawHover(e),this.postDraw&&this.postDraw(e),e.restore(),this}},{key:"drawFont",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Arial",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"center",r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"middle";e.textAlign=i,e.textBaseline=r,e.font="".concat(t,"px ").concat(n)}},{key:"drawPin",value:function(e){var t=this.pinLocation(),n=t.x,i=t.y;e.save(),e.beginPath(),e.arc(n,i,6,0,2*Math.PI,!1),e.fillStyle="pink",e.fill(),e.lineWidth=1,e.strokeStyle="#003300",e.stroke(),e.restore()}},{key:"drawOrigin",value:function(e){var t=this.pinLocation(),n=t.x,i=t.y;e.save(),e.beginPath(),e.setLineDash([5,5]),e.moveTo(n-50,i),e.lineTo(n+50,i),e.moveTo(n,i-50),e.lineTo(n,i+50),e.lineWidth=1,e.strokeStyle="#003300",e.stroke(),e.restore()}},{key:"drawOriginX",value:function(e){var t=this.pinLocation(),n=t.x,i=t.y;e.save(),e.beginPath(),e.setLineDash([5,5]),e.moveTo(n-50,i-50),e.lineTo(n+50,i+50),e.moveTo(n+50,i-50),e.lineTo(n-50,i+50),e.lineWidth=1,e.strokeStyle="#003300",e.stroke(),e.restore()}},{key:"drawHighlight",value:function(e){e.save(),e.strokeStyle="yellow",e.lineWidth=4,this.drawOutline(e),e.restore()}},{key:"drawHighlightOverlap",value:function(e){e.strokeStyle="green",e.lineWidth=8,this.drawOutline(e),e.strokeStyle="yellow",e.lineWidth=4,this.drawOutline(e)}},{key:"drawOutline",value:function(e){e.beginPath(),e.setLineDash([15,5]),e.rect(0,0,this.width,this.height),e.stroke()}},{key:"toggleSelected",value:function(){this.isSelected=!this.isSelected}}]),n}(ce),he=function(e){Object(C.a)(n,e);var t=Object(D.a)(n);function n(e){var i;return Object(P.a)(this,n),(i=t.call(this))._members=void 0,i.isHidden=!1,i.isSelectable=!0,i._members=new Array,e&&e.forEach((function(e){return i.addMember(e)})),i}return Object(M.a)(n,[{key:"getChildAt",value:function(e){return this._members[e]}},{key:"isEmpty",value:function(){return 0===this._members.length}},{key:"clearAll",value:function(){this._members=[]}},{key:"length",get:function(){return this._members.length}},{key:"count",get:function(){return this._members.length}},{key:"hasMembers",get:function(){return this.length>0}},{key:"map",value:function(e){return this._members.map(e)}},{key:"forEach",value:function(e){this._members.forEach(e)}},{key:"first",value:function(){return this._members[0]}},{key:"last",value:function(){return this._members[this._members.length-1]}},{key:"filter",value:function(e){return this._members.filter(e)}},{key:"find",value:function(e){return this._members.find(e)}},{key:"findMember",value:function(e){return this._members.find((function(t){return t.myName===e||t.myGuid===e}))}},{key:"getMember",value:function(e){return this._members[e]}},{key:"copyMembers",value:function(e){var t=this;return e.members.forEach((function(e){t.addMember(e)})),this}},{key:"isMember",value:function(e){return-1!==this._members.indexOf(e)}},{key:"push",value:function(e){this._members.push(e)}},{key:"shift",value:function(){return this._members.shift()}},{key:"addMember",value:function(e){return this._members.push(e),e}},{key:"removeMembers",value:function(e){var t=this;return e.members.forEach((function(e){t.removeMember(e)})),this}},{key:"removeMember",value:function(e){var t=this._members.indexOf(e);return t>-1&&this._members.splice(t,1),e}},{key:"members",get:function(){return this._members}},{key:"publicMembers",get:function(){return this.members.filter((function(e){return e.isPublic}))}},{key:"moveToTop",value:function(e){var t=this._members.indexOf(e);return-1!==t&&(this._members.splice(t,1),this._members.push(e)),this._members}},{key:"moveToBottom",value:function(e){var t=this._members.indexOf(e);return-1!==t&&(this._members.splice(t,1),this._members.unshift(e)),this._members}},{key:"toJson",value:function(){if(this.hasMembers){var e=Object(Q.a)(Object(q.a)(n.prototype),"toJson",this).call(this);return e.members=this._members.map((function(e){return e.asJson})),e}return{}}},{key:"isEqualTo",value:function(e){var t=!0;return t}}]),n}(ce);!function(e){e.left="left",e.right="right",e.top="top",e.bottom="bottom",e.center="center"}(se||(se={}));var le,ve=function(e){Object(C.a)(n,e);var t=Object(D.a)(n);function n(e,i){var r;return Object(P.a)(this,n),(r=t.call(this,e,i))._angle=void 0,r._subcomponents=void 0,r.pinX=function(){return.5*r.width},r.pinY=function(){return.5*r.height},r.rotationZ=function(){return r.angle},r.localHitTest=function(e){var t=e,n=t.x,i=t.y,a=r.globalToLocal(n,i);return!(a.x<0)&&(!(a.x>r.width)&&(!(a.y<0)&&!(a.y>r.height)))},r.hitTest=function(e){return r.isHitable&&r.isVisible&&r.localHitTest(e)},r.overlapTest=function(e){var t=r.globalToLocalFrame(e.x1,e.y1,e.x2,e.y2);return!!r.localContains(t.x1,t.y1)||(!!r.localContains(t.x1,t.y2)||(!!r.localContains(t.x2,t.y1)||!!r.localContains(t.x2,t.y2)))},r.drawSelected=function(e){e.strokeStyle="red",e.lineWidth=4,r.drawOutline(e),r.drawPin(e)},r.drawBackground=function(e){e.fillStyle=r.color,e.lineWidth=1,e.globalAlpha=r.opacity,e.fillRect(0,0,r.width,r.height)},r.draw=function(e){r.drawBackground(e)},r.override(e),r}return Object(M.a)(n,[{key:"angle",get:function(){return this._angle||0},set:function(e){this.smash(),this._angle=e}},{key:"subcomponents",get:function(){return this._subcomponents||(this._subcomponents=new he),this._subcomponents}},{key:"setPinLeft",value:function(){var e=this;return this.pinX=function(){return 0*e.width},this}},{key:"setPinRight",value:function(){var e=this;return this.pinX=function(){return 1*e.width},this}},{key:"setPinCenter",value:function(){var e=this;return this.pinX=function(){return.5*e.width},this}},{key:"setPinTop",value:function(){var e=this;return this.pinY=function(){return 0*e.height},this}},{key:"setPinMiddle",value:function(){var e=this;return this.pinY=function(){return.5*e.height},this}},{key:"setPinBottom",value:function(){var e=this;return this.pinY=function(){return 1*e.height},this}},{key:"pinVector",value:function(){return new _.b(this.pinX(),this.pinY(),0)}},{key:"originPosition",value:function(){var e=this.pinVector();return new _.b(this.x-e.x,this.y-e.y,0)}},{key:"pinLocation",value:function(){return{x:this.pinX(),y:this.pinY(),z:0}}},{key:"toJson",value:function(){return J.mixin(Object(Q.a)(Object(q.a)(n.prototype),"toJson",this).call(this),{angle:this.angle})}},{key:"didLocationChange",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Number.NaN,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.NaN,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Number.NaN,r=Object(Q.a)(Object(q.a)(n.prototype),"didLocationChange",this).call(this,e,t,i);return Number.isNaN(i)||this.angle===i||(r=!0,this.angle=i),r}},{key:"move",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Number.NaN,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.NaN,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Number.NaN;if(this.didLocationChange(e,t,n)){var i=this.getLocation();oe.moved(this,i)}return this}},{key:"updateContext",value:function(e){var t=this.getMatrix();e.transform(t.a,t.b,t.c,t.d,t.tx,t.ty),e.globalAlpha*=this.opacity}},{key:"getMatrix",value:function(){return void 0===this._matrix&&(this._matrix=new Z,this._matrix.appendTransform(this.x,this.y,1,1,this.rotationZ(),0,0,this.pinX(),this.pinY())),this._matrix}},{key:"render",value:function(e){var t,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!this.isInvisible)return e.save(),this.updateContext(e),this.preDraw&&this.preDraw(e),this.draw(e),this.drawHover&&this.drawHover(e),this.postDraw&&this.postDraw(e),this.isSelected&&this.drawSelected(e),n&&(null===(t=this._subcomponents)||void 0===t||t.forEach((function(t){t.render(e,n)}))),e.restore(),this}},{key:"drawOutline",value:function(e){e.beginPath(),e.setLineDash([15,5]),e.rect(0,0,this.width,this.height),e.stroke()}}]),n}(ue),de=function(e){Object(C.a)(n,e);var t=Object(D.a)(n);function n(){var e;Object(P.a)(this,n);for(var i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return(e=t.call.apply(t,[this].concat(r))).lastFound=void 0,e}return Object(M.a)(n,[{key:"unselect",value:function(){this.forEach((function(e){e.closeEditor&&e.closeEditor()}))}},{key:"clear",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.unselect(e),this.clearAll()}},{key:"addSelection",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];e.isSelected=!0,t&&this.clear(e),this.isMember(e)||this.addMember(e)}},{key:"findSelected",value:function(){return this.find((function(e){return e.isSelected}))}},{key:"sendKeysToShape",value:function(e,t){if(this.lastFound&&this.lastFound.isSelected)this.lastFound.sendKeys(e,t);else{var n=this.findSelected();n&&n.sendKeys&&(n.sendKeys(e,t),this.lastFound=n)}}}]),n}(function(e){Object(C.a)(n,e);var t=Object(D.a)(n);function n(){return Object(P.a)(this,n),t.apply(this,arguments)}return n}(he)),fe=function(e){Object(C.a)(n,e);var t=Object(D.a)(n);function n(e,i){var r;return Object(P.a)(this,n),(r=t.call(this,e,i))._isDirty=!0,r.gridSizeX=50,r.gridSizeY=50,r.showBoundry=!0,r.selections=new de,r._marginX=void 0,r._marginY=void 0,r._scaleX=void 0,r._scaleY=void 0,r.mouseLoc={},r.onItemHoverEnter=function(e,t,n){},r.onItemHoverExit=function(e,t,n){},r.onItemChangedPosition=function(e){},r.onMouseLocationChanged=function(e,t,n){r.mouseLoc=e,r.mouseLoc.state=t,r.mouseLoc.keys=n},r.preDraw=function(e){e.fillStyle=r.color,e.fillRect(0,0,r.width,r.height)},r.draw=function(e){r.drawGrid(e),r.drawAxis(e),r.drawPage(e),r.drawPin(e)},r.override(e),r}return Object(M.a)(n,[{key:"markAsDirty",value:function(){return this._isDirty=!0,this}},{key:"markAsClean",value:function(){return this._isDirty=!1,this}},{key:"isDirty",get:function(){return this._isDirty}},{key:"marginX",get:function(){return this._marginX||0},set:function(e){this.smash(),this._marginX=e}},{key:"marginY",get:function(){return this._marginY||0},set:function(e){this.smash(),this._marginY=e}},{key:"scaleX",get:function(){return this._scaleX||1},set:function(e){this.smash(),this._scaleX=e}},{key:"scaleY",get:function(){return this._scaleY||1},set:function(e){this.smash(),this._scaleY=e}},{key:"findHitShape",value:function(e){for(var t,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=0;r<this.subcomponents.length;r++){var a=this.subcomponents.getMember(r);if(a!==i&&(t=a.findObjectUnderPoint(e,n)))return t}}},{key:"findShapeUnder",value:function(e){for(var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=0;n<this.subcomponents.length;n++){var i=this._subcomponents.getMember(n);if(!e.hasAncestor(i)&&i!==t)return i}}},{key:"zoomToCenter",value:function(e,t,n){var i=this.globalToLocalPoint(e);this.zoomBy(t);var r=this.localToGlobal(i.x,i.y);this.x+=i.x-r.x,this.y+=i.y-r.y}},{key:"setupMouseEvents",value:function(){var e=this,t=null,n=null,i=null,r=null;L.Sub("mousedown",(function(n,i,a){e.onMouseLocationChanged(n,"down",a);var o=e.findHitShape(n);o?(r=(t=o).getOffset(n),t.isDragable()&&e.subcomponents.moveToTop(t),e.selections.addSelection(t,!a.shift)):e.selections.clear()}));L.Sub("mousemove",(function(n,a,o){if(t&&t.isDragable())e.onMouseLocationChanged(n,"move",o),t.moveTo(n,r);else{e.onMouseLocationChanged(n,"hover",o);var s=e.findHitShape(n);s&&s===i?e.onItemHoverEnter(n,i):s?(i&&e.onItemHoverExit(n,i),i=s,e.onItemHoverEnter(n,i)):(i&&e.onItemHoverExit(n,i),i=null)}}));L.Sub("mouseup",(function(i,r,a){e.onMouseLocationChanged(i,"up",a),t&&(t.isDragable()&&e._subcomponents.moveToTop(t),n&&a.ctrl||(e.onItemChangedPosition(t),oe.moveComplete(t,i)),t=n=null)})),L.Sub("wheel",(function(t,n,i,r,a){e.onMouseLocationChanged(t,"wheel",a),a.shift&&a.ctrl&&e.zoomToCenter(n,i,r)}))}},{key:"zoomBy",value:function(e){this.scaleX*=e,this.scaleY*=e}},{key:"drawGrid",value:function(e){e.save(),e.beginPath(),e.setLineDash([5,1]),e.strokeStyle="gray";for(var t=this.marginX-this.x,n=this.marginY-this.y,i=t+this.width/this.scaleX,r=n+this.height/this.scaleY,a=this.gridSizeX;a<i;)e.moveTo(a,n),e.lineTo(a,r),a+=this.gridSizeX;for(a=-this.gridSizeX;a>t;)e.moveTo(a,n),e.lineTo(a,r),a-=this.gridSizeX;for(var o=this.gridSizeY;o<r;)e.moveTo(t,o),e.lineTo(i,o),o+=this.gridSizeY;for(o=-this.gridSizeY;o>n;)e.moveTo(t,o),e.lineTo(i,o),o-=this.gridSizeY;e.stroke(),e.restore()}},{key:"drawAxis",value:function(e){e.save(),e.beginPath(),e.strokeStyle="black",e.lineWidth=3;var t=this.marginX-this.x,n=this.marginY-this.y,i=t+this.width/this.scaleX,r=n+this.height/this.scaleY;e.moveTo(0,n),e.lineTo(0,r),e.moveTo(t,0),e.lineTo(i,0),e.stroke(),e.restore()}},{key:"drawPage",value:function(e){e.save(),e.beginPath(),e.strokeStyle="black",e.lineWidth=5,e.rect(0,0,this.width,this.height),e.stroke(),e.restore()}},{key:"drawName",value:function(e){e.save(),e.font="50pt Calibri",e.lineWidth=3,e.strokeStyle="blue",e.strokeText(this.myName,10,50),e.restore()}},{key:"render",value:function(e){var t,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return e.clearRect(0,0,this.width,this.height),e.save(),this.drawName(e),this.preDraw&&this.preDraw(e),this.draw(e),this.postDraw&&this.postDraw(e),n&&(null===(t=this._subcomponents)||void 0===t||t.forEach((function(t){t.render(e,n)}))),e.restore(),this.showBoundry&&this.afterRender(e),this.markAsClean()}}]),n}(ve),ye=function(e){Object(C.a)(n,e);var t=Object(D.a)(n);function n(e,i){var r;return Object(P.a)(this,n),(r=t.call(this,e,i))._loaded=!1,r.margin=void 0,r._image=void 0,r._imageURL=void 0,r._background=void 0,r.pinX=function(){return.5*r.width},r.pinY=function(){return.5*r.height},r.drawSelected=function(e){e.strokeStyle="red",e.lineWidth=1,r.drawOutline(e),r.drawPin(e)},r.drawBackground=function(e){var t=r.width+(r.margin&&r.margin.width||0),n=r.height+(r.margin&&r.margin.height||0);e.fillStyle=r.background,e.fillRect(0,0,t,n)},r.draw=function(e){var t=r.margin&&r.margin.left||0,n=r.margin&&r.margin.top||0;e.save(),r.background&&r.drawBackground(e),e.restore(),r._loaded&&e.drawImage(r._image,t,n,r.width,r.height)},r.override(e),r}return Object(M.a)(n,[{key:"imageURL",get:function(){return this._imageURL},set:function(e){var t=this;this._loaded=!1,this._imageURL=e,this._image=new Image,this._image.onload=function(){t._loaded=!0},this._image.src=this._imageURL}},{key:"background",get:function(){return this._background},set:function(e){this._background=e}},{key:"toJson",value:function(){return J.mixin(Object(Q.a)(Object(q.a)(n.prototype),"toJson",this).call(this),{background:this.background,imageURL:this.imageURL,margin:this.margin})}},{key:"override",value:function(e){if(e&&e.margin){var t=e.margin;e.margin=new N(t.left,t.top,t.right,t.bottom)}return Object(Q.a)(Object(q.a)(n.prototype),"override",this).call(this,e)}},{key:"render",value:function(e){return e.save(),this.updateContext(e),this.preDraw&&this.preDraw(e),this.draw(e),this.drawHover&&this.drawHover(e),this.postDraw&&this.postDraw(e),this.isSelected&&this.drawSelected(e),e.restore(),this}},{key:"drawOutline",value:function(e){var t=this.width+(this.margin&&this.margin.width||0),n=this.height+(this.margin&&this.margin.height||0);e.beginPath(),e.setLineDash([15,5]),e.rect(0,0,t,n),e.stroke()}}]),n}(ve),me=function(e){Object(C.a)(n,e);var t=Object(D.a)(n);function n(){var e;Object(P.a)(this,n);for(var i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return(e=t.call.apply(t,[this].concat(r))).localHitTest=function(t){var n=t,i=n.x,r=n.y;return!(i<e.x-e.pinX())&&(!(i>e.x+e.pinX())&&(!(r<e.y-e.pinY())&&!(r>e.y+e.pinY())))},e}return n}(ye),be=n(85);!function(e){e.UNKNOWN="unknown",e.AT="@",e.THIS="this",e.SELF="self",e.ROOT="root"}(le||(le={}));var ge=new(function(){function e(){Object(P.a)(this,e),this.hasOwnProperty=Object.prototype.hasOwnProperty}return Object(M.a)(e,[{key:"getFunctionName",value:function(e){var t=e.toString();return(t=(t=t.substr("function ".length)).substr(0,t.indexOf("("))).trim()}},{key:"generateUUID",value:function(){var e=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var n=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"===t?n:7&n|8).toString(16)}))}},{key:"asJson",value:function(e){var t=this.stringify(e);return JSON.parse(t)}},{key:"stringify",value:function(e){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3;function n(e){return e&&e.asReference?"resolveRef("+e.asReference()+","+e.constructor.name+")":e}function i(e,t){switch(e){case"myParent":return n(t);case"myMembers":return t?t.map((function(e){return n(e)})):t;case"_lookup":case"_members":return t;case"gridApis":case"columnApis":return""}if(!e.startsWith("_"))return t}return JSON.stringify(e,i,t)}},{key:"splitNamespaceType",value:function(e,t){var n=e.split("::"),i={namespace:"",name:e};return 2===n.length?i={namespace:n[0],name:n[1]}:t&&(i={namespace:n[0],name:t}),i}},{key:"getNamespace",value:function(e){var t=e.myType?e.myType.split("::"):[""];return t=t[0]}},{key:"getType",value:function(e){var t=e.myType?e.myType.split("::"):[""];return t=2===t.length?t[1]:t[0]}},{key:"namespace",value:function(e,t){return"".concat(e,"::").concat(t)}},{key:"randomInt",value:function(e,t){return e+Math.floor(Math.random()*(t-e+1))}},{key:"random",value:function(e,t){return e+Math.random()*(t-e)}},{key:"randomRGBColor",value:function(){var e=255*Math.random()|0,t=255*Math.random()|0,n=255*Math.random()|0;return"rgb(".concat(e,",").concat(t,",").concat(n,")")}},{key:"randomName",value:function(){var e=["Llam","Noah","Oliver","Elijah","Lucas","Mason","Henry","Logan","Sebastian","Wyatt","Carter","Isaac","Dylan","Aaron"],t=this.randomInt(0,e.length-1);return"".concat(e[t],"_").concat(this.randomInt(0,e.length-1))}},{key:"randomThing",value:function(){var e=["Farmhouse","Barn","Silo","Garage","Box Truck","Yellow House","School","Brick Building","Statue"],t=this.randomInt(0,e.length-1);return"".concat(e[t],"_").concat(this.randomInt(0,e.length-1))}},{key:"matches",value:function(e,t){return e===t||e&&t&&e.toLocaleLowerCase()===t.toLocaleLowerCase()}},{key:"startsWith",value:function(e,t){return e===t||e&&t&&e.toLocaleLowerCase().startsWith(t.toLocaleLowerCase())}},{key:"capitalizeFirstLetter",value:function(e){return e.charAt(0).toUpperCase()+e.slice(1)}},{key:"capitalize",value:function(e){return ge.isEmpty(e)?e:ge.capitalizeFirstLetter(e)}},{key:"isSelf",value:function(e){return this.matches(e,le.AT)||this.matches(e,le.THIS)||this.matches(e,le.SELF)}},{key:"isArray",value:function(e){return Array.isArray?Array.isArray(e):"[object Array]"===Object.prototype.toString.call(e)}},{key:"isFunction",value:function(e){return"function"===typeof e}},{key:"isString",value:function(e){return"string"===typeof e}},{key:"isNumber",value:function(e){return"number"===typeof e}},{key:"isDate",value:function(e){return e instanceof Date}},{key:"isObject",value:function(e){return e&&"object"===typeof e}},{key:"isCustomLinkName",value:function(e){return!1}},{key:"isTyped",value:function(e){return e&&e.isInstanceOf}},{key:"isEmpty",value:function(e){if(null==e)return!0;if(e.length>0)return!1;if(0===e.length)return!0;if("object"!==typeof e)return!0;for(var t in e)if(this.hasOwnProperty.call(e,t))return!1;return!0}},{key:"replaceSpaces",value:function(e){return e.replace(/[\s]/g,"_")}},{key:"removeSpaces",value:function(e){return e.replace(/[\s]/g,"_")}},{key:"removeSpecial",value:function(e){return e.replace(/[^a-zA-Z 0-9]+/g,"")}},{key:"toVirtualFolder",value:function(e){var t=this.removeSpecial(e);return(t=this.removeSpaces(t)).toLocaleLowerCase()}},{key:"applyTemplate",value:function(e,t){for(var n=e||"",i=0,r=Object.keys(t);i<r.length;i++){var a=r[i],o="{"+a+"}",s=t[a];n=n.replace(o,s)}return n}},{key:"removeDQ",value:function(e){return e.replace(/^"(.*)"$/,"$1")}},{key:"unwrap",value:function(e){return e.substring(1,e.length-1)}},{key:"wrapDQ",value:function(e){return'"'.concat(e,'"')}},{key:"wrapSQ",value:function(e){return"'".concat(e,"'")}},{key:"decomposeHostPath",value:function(e){var t=e.toLowerCase(),n=(t=(t=t.replace("http://","")).replace("https://","")).split("/")[0];return{fullpath:e,host:n,path:t.replace(n,"")}}},{key:"extend",value:function(e,t){if(!t)return e;for(var n in t)this.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}},{key:"mixin",value:function(e,t){if(!t)return e;if(!e)return t;var n,i=Object(z.a)(t);try{for(i.s();!(n=i.n()).done;){var r=n.value;e[r]=t[r]}}catch(a){i.e(a)}finally{i.f()}return e}},{key:"mixExact",value:function(t,n){if(!n)return t;if(!t)return n;for(var i in n)e.hasOwnProperty.call(t,i)&&(t[i]=n[i]);return t}},{key:"mixout",value:function(e,t){if(!t)return e;if(!e)return t;for(var n in t)this.hasOwnProperty.call(e,n)&&delete e[n];return e}},{key:"extract",value:function(e,t){var n={};return t&&t.forEach((function(t){n[t]=e[t]})),n}},{key:"mixMap",value:function(e,t){if(!t)return e;var n,i={},r=Object(z.a)(e);try{for(r.s();!(n=r.n()).done;){var a=n.value;i[t[a]||a]=e[a]}}catch(o){r.e(o)}finally{r.f()}return i}},{key:"intersect",value:function(e,t){if(!t)return e;if(!e)return t;var n={};for(var i in e)this.hasOwnProperty.call(t,i)?n[i]=t[i]:n[i]=e[i];return n}},{key:"union",value:function(e,t){var n={};if(e){var i,r=Object(z.a)(e);try{for(r.s();!(i=r.n()).done;){var a=i.value;n[a]=e[a]}}catch(u){r.e(u)}finally{r.f()}}if(t){var o,s=Object(z.a)(t);try{for(s.s();!(o=s.n()).done;){var c=o.value;n[c]=t[c]}}catch(u){s.e(u)}finally{s.f()}}return n}},{key:"defineValueProperty",value:function(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0}),e}},{key:"defineComputeOnlyProperty",value:function(e,t,n){return Object.defineProperty(e,t,{enumerable:!0,configurable:!0,get:n}),e}},{key:"defineCalculatedProperty",value:function(e,t,n){return Object.defineProperty(e,t,{enumerable:!0,configurable:!0,get:n,set:function(e){this["_".concat(t)]=e}}),e}},{key:"getMethods",value:function(e){var t=[];for(var n in e.prototype)"function"===typeof e[n]&&t.push(n);return t}},{key:"asArray",value:function(e,t){return this.isArray(e)?e:this.mapOverKeyValue(e,(function(e,n){return t?t(e,n):n}))}},{key:"applyOverKeyValue",value:function(e,t){var n=this,i={};return(e?Object.keys(e):[]).forEach((function(r){if(n.hasOwnProperty.call(e,r)){var a=e[r],o=t(r,a);o&&(i[r]=o)}})),i}},{key:"mapOverKeyValue",value:function(e,t){var n=this,i=[];return(e?Object.keys(e):[]).forEach((function(r){if(n.hasOwnProperty.call(e,r)){var a=e[r],o=t(r,a);o&&i.push(o)}})),i}},{key:"forEachKeyValue",value:function(e,t){var n=this;(e?Object.keys(e):[]).forEach((function(i){if(n.hasOwnProperty.call(e,i)){var r=e[i];t(i,r)}}))}},{key:"findKeyForValue",value:function(e,t){for(var n in e)if(this.hasOwnProperty.call(e,t)&&e[n].matches(t))return n;return e}},{key:"addToListByKey",value:function(e,t,n){e[t]?e[t].push(n):e[t]=[n]}},{key:"extractReadWriteKeys",value:function(e){var t=[];return ge.forEachKeyValue(e,(function(e,n){ge.isFunction(n)||t.push(e)})),t}},{key:"extractComputedKeys",value:function(e){var t=[];return ge.forEachKeyValue(e,(function(e,n){ge.isFunction(n)&&t.push(e)})),t}},{key:"overrideComputed",value:function(e,t){ge.forEachKeyValue(t,(function(t,n){try{ge.isFunction(n)?ge.defineCalculatedProperty(e,t,n):e[t]=n}catch(i){console.log(i)}}))}},{key:"extendComputed",value:function(e,t){ge.forEachKeyValue(t,(function(t,n){try{e[t]||(ge.isFunction(n)?ge.defineCalculatedProperty(e,t,n):e[t]=n)}catch(i){console.log(i)}}))}},{key:"pluck",value:function(e){return function(t){return t[e]}}},{key:"distinctItems",value:function(e){var t={};return e.forEach((function(e){t[e]=e})),Object.keys(t)}},{key:"groupBy",value:function(e,t){var n={};return t.forEach((function(t){var i=e(t);n[i]||(n[i]=[]),n[i].push(t)})),n}},{key:"mergeGroups",value:function(e,t){var n={};return Object.keys(e).forEach((function(i){var r=e[i],a=t[i];n[i]=a?[].concat(Object(be.a)(a),Object(be.a)(r)):Object(be.a)(r)})),n}},{key:"getNowIsoDate",value:function(){return(new Date).toISOString()}},{key:"now",value:function(){return(new Date).getTime()}},{key:"getYearYYYY",value:function(){return(new Date).getFullYear()}},{key:"doNothing",get:function(){return function(){}}},{key:"isPasteEvent",value:function(e){return(null===e||void 0===e?void 0:e.ctrlKey)&&"V"===((null===e||void 0===e?void 0:e.key)||"").toUpperCase()}},{key:"getPositiveInteger",value:function(e){var t=Math.abs(Math.round(e));return 0===t?1:t}},{key:"padZero",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;return"".concat(e).padStart(t,"0")}}]),e}()),pe=n(120),ke=function(){function e(){Object(P.a)(this,e)}return Object(M.a)(e,[{key:"override",value:function(e){var t=this;e&&Object.keys(e).forEach((function(n){Object.defineProperty(t,n,{value:e[n],configurable:!0,enumerable:!0,writable:!0})}))}},{key:"getPropertyValue",value:function(e,t){return pe.get(e,t)}},{key:"getProperty",value:function(e,t){var n=this;return{getter:function(){var i=n.getPropertyValue(n,e);return t&&i?i.join(" "):i},setter:function(i){var r=t?[i]:i;return Object.defineProperty(n,e,{value:r,configurable:!0,enumerable:!0,writable:!0}),[e,n]}}}},{key:"getPropertyAsList",value:function(e,t,n){var i=this;return{getter:function(){var t=i.getPropertyValue(i,e);return t||[]},setter:function(t){var n=t;Object.defineProperty(i,e,{value:n,configurable:!0,enumerable:!0,writable:!0})},push:function(t){var n=i.getPropertyValue(i,e);n.push(t),Object.defineProperty(i,e,{value:n,configurable:!0,enumerable:!0,writable:!0})},remove:function(t){var n=i.getPropertyValue(i,e);pe.pull(n,t),Object.defineProperty(i,e,{value:n,configurable:!0,enumerable:!0,writable:!0})},labelForAdd:function(){return n||"Add Item"},defaultDataForAdd:function(){var n=i.getPropertyValue(i,e);return t||n.length>0&&Object.assign({},n[0])||{}}}}},{key:"getPropertyAsEnumList",value:function(e,t,n,i,r,a){var o=this;return{getter:function(){var t=o.getPropertyValue(o,e);return t||(n?"":[])},setter:function(t){var i=t;!ge.isEmpty(t)&&ge.isArray(t)&&n&&(i=t[0]),Object.defineProperty(o,e,{value:i,configurable:!0,enumerable:!0,writable:!0})},push:function(t){var i=o.getPropertyValue(o,e);n?i=t:i.push(t),Object.defineProperty(o,e,{value:i,configurable:!0,enumerable:!0,writable:!0})},clear:function(){Object.defineProperty(o,e,{value:[],configurable:!0,enumerable:!0,writable:!0})},remove:function(t){var n=o.getPropertyValue(o,e);pe.pull(n,t),Object.defineProperty(o,e,{value:n,configurable:!0,enumerable:!0,writable:!0})},getEnumValues:function(){var e=new ee.a;return setTimeout((function(){e.next(t),e.complete()}),10),e},mutuallyExclusive:function(){return n},minRequiredSelections:function(){return i}}}},{key:"removeUndefined",value:function(){for(var e in this)void 0===this[e]&&delete this[e];return this}},{key:"myType",get:function(){return this.constructor.name},set:function(e){}},{key:"toJSON",value:function(){return Object.assign({},this)}}]),e}(),Oe=new(function(e){Object(C.a)(n,e);var t=Object(D.a)(n);function n(e){var i;return Object(P.a)(this,n),(i=t.call(this)).production=!1,i.baseURL=void 0,i.rootAPIPath=void 0,i.apiVersion=void 0,i.localMockPath="/data",i.version="0.0.0",i.envVars=void 0,i.services={},i.featureflags={},i.override(e),i}return n}(ke)),Ae=new(function(e){Object(C.a)(n,e);var t=Object(D.a)(n);function n(e){var i;return Object(P.a)(this,n),(i=t.call(this)).tag=void 0,i.baseURL=void 0,i.rootAPIPath=void 0,i.localDebug=void 0,i.production=void 0,i.version=void 0,i.mesh=void 0,i.featureflags=void 0,i.defaultLatLng=void 0,i.override(e),i}return n}(ke)),je=function(e){Object(C.a)(n,e);var t=Object(D.a)(n);function n(e){var i;Object(P.a)(this,n),(i=t.call(this)).serviceKey=void 0,i.endpoint=void 0,i.localDataPath=void 0,i.localMockData=!1,i.forceLocalMock=!1,i.override(e);var r=Oe.services[i.serviceKey];return r&&i.override(r),i}return Object(M.a)(n,[{key:"getUrl",value:function(){var e=this.localMockData,t=this.localDataPath;if(e)return console.log("Using MOCK DATA for ".concat(this.serviceKey)),"".concat(Oe.localMockPath).concat(t);if(this.forceLocalMock)return console.warn("PENDING Service ".concat(this.serviceKey,": FORCING MOCK DATA")),"".concat(Oe.localMockPath).concat(t);var i="".concat(n.baseURL),r="".concat(i).concat(this.endpoint);return encodeURI(r)}},{key:"getClientHubUrl",value:function(){var e="".concat(Ae.baseURL).concat(this.endpoint);return encodeURI(e)}},{key:"getAPIUrl",value:function(){var e=this.localMockData,t=this.localDataPath;if(e)return console.log("Using MOCK DATA for ".concat(this.serviceKey)),"".concat(Oe.localMockPath).concat(t);if(this.forceLocalMock)return console.warn("PENDING Service ".concat(this.serviceKey,": FORCING MOCK DATA")),"".concat(Oe.localMockPath).concat(t);var i="".concat(n.baseURL),r="".concat(i).concat(Ae.rootAPIPath).concat(this.endpoint);return encodeURI(r)}}]),n}(ke);je.baseURL=Ae.baseURL;var we,xe=n(59),Ee=n(84),Pe=n(40);!function(e){e.POINT_OF_INTEREST="POINT_OF_INTEREST",e.POSSIBLE_TARGET="POSSIBLE_TARGET",e.CONFIRMED_TARGET="CONFIRMED_TARGET"}(we||(we={}));var Se=function(){function e(t){Object(P.a)(this,e),this.sourceGuid=void 0,this.timeStamp=void 0,this.personId=void 0,t&&this.override(t)}return Object(M.a)(e,[{key:"override",value:function(e){var t=this;Reflect.ownKeys(e).forEach((function(n){Reflect.set(t,n,Reflect.get(e,n))}))}},{key:"calcCrow",value:function(e,t,n,i){var r=this.toRad(n-e),a=this.toRad(i-t),o=this.toRad(e),s=this.toRad(n),c=Math.sin(r/2)*Math.sin(r/2)+Math.sin(a/2)*Math.sin(a/2)*Math.cos(o)*Math.cos(s);return 6371*(2*Math.atan2(Math.sqrt(c),Math.sqrt(1-c)))}},{key:"toRad",value:function(e){return e*Math.PI/180}},{key:"toDeg",value:function(e){return 180*e/Math.PI}},{key:"computeIntersection",value:function(e,t,n,i,r,a){var o,s,c,u,h,l,v,d,f;return s=i-e,c=r-t,!((u=Math.sqrt(c*c+s*s))>n+a)&&(!(u<Math.abs(n-a))&&(f=t+c*(o=(n*n-a*a+u*u)/(2*u))/u,[(d=e+s*o/u)+(l=(h=Math.sqrt(n*n-o*o))/u*-c),d-l,f+(v=s*(h/u)),f-v]))}},{key:"getDisplayInfo",value:function(){return{sourceGuid:this.sourceGuid,messageType:"Base",user:this.personId,timeStamp:this.timeStamp,personId:this.personId}}}],[{key:"asCoord",value:function(e){return e.geometry.coordinates}},{key:"asLat",value:function(e){return e.geometry.coordinates[1]}},{key:"asLng",value:function(e){return e.geometry.coordinates[0]}}]),e}(),Ce=function(e){Object(C.a)(n,e);var t=Object(D.a)(n);function n(){var e;Object(P.a)(this,n);for(var i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return(e=t.call.apply(t,[this].concat(r))).units=void 0,e.width=void 0,e.height=void 0,e.depth=void 0,e.pinX=void 0,e.pinY=void 0,e.pinZ=void 0,e}return n}(Se),De=function(e){Object(C.a)(n,e);var t=Object(D.a)(n);function n(e){var i;return Object(P.a)(this,n),(i=t.call(this)).topic=void 0,i.data=void 0,e&&i.override(e),i}return n}(Se),Me=function(e){Object(C.a)(n,e);var t=Object(D.a)(n);function n(e){var i;return Object(P.a)(this,n),(i=t.call(this)).user=void 0,i.message=void 0,e&&i.override(e),i}return n}(Se),Le=function(e){Object(C.a)(n,e);var t=Object(D.a)(n);function n(e){var i;return Object(P.a)(this,n),(i=t.call(this)).user=void 0,i.device=void 0,i.ammo=void 0,i.heartrate=void 0,i.ip_address=void 0,i.battery=void 0,i.notes=void 0,e&&i.override(e),i}return Object(M.a)(n,[{key:"getDisplayInfo",value:function(){return{sourceGuid:this.sourceGuid,messageType:"Status",user:this.personId,timeStamp:this.timeStamp,personId:this.personId,notes:"Device: ".concat(this.device,", Ammo: ").concat(this.ammo,", Heartrate: ").concat(this.heartrate,", IP: ").concat(this.ip_address,", Battery: ").concat(this.battery," Notes: ").concat(this.notes)}}}]),n}(Se),_e=function(e){Object(C.a)(n,e);var t=Object(D.a)(n);function n(e){var i;return Object(P.a)(this,n),(i=t.call(this)).targetGuid=void 0,i.command=void 0,i.args=void 0,e&&i.override(e),i}return Object(M.a)(n,[{key:"getDisplayInfo",value:function(){return{sourceGuid:this.sourceGuid,uniqueGuid:this.targetGuid,messageType:"Command",user:this.personId,timeStamp:this.timeStamp,personId:this.personId,notes:this.args.toString()}}}]),n}(Se),Ie=function(e){Object(C.a)(n,e);var t=Object(D.a)(n);function n(e){var i;return Object(P.a)(this,n),(i=t.call(this)).lat=void 0,i.lng=void 0,i.alt=void 0,e&&i.override(e),i}return Object(M.a)(n,[{key:"point",value:function(){return Pe.point([this.lng,this.lat])}},{key:"distance",value:function(e){return Pe.distance(this.point(),e.point())}},{key:"bearing",value:function(e){return Pe.bearing(this.point(),e.point())}},{key:"midpoint",value:function(e){return Pe.midpoint(this.point(),e.point())}},{key:"destination",value:function(e,t){return Pe.destination(this.point(),e,t)}},{key:"circlePolygon",value:function(e){return Pe.circle(this.point(),e,{steps:30,Units:"kilometers"})}},{key:"boxPolygon",value:function(e,t,n){var i=e/2,r=n/2,a=Pe.lineString([[this.lng-i,this.lat-r],[this.lng+i,this.lat-r],[this.lng+i,this.lat+r],[this.lng-i,this.lat+r]]),o=Pe.bbox(a);return Pe.bboxPolygon(o)}},{key:"circleIntersect",value:function(e,t,n){return new Array}}]),n}(Se),Te=function(e){Object(C.a)(n,e);var t=Object(D.a)(n);function n(e){var i;return Object(P.a)(this,n),(i=t.call(this)).user=void 0,i.speed=void 0,i.heading=void 0,e&&i.override(e),i}return Object(M.a)(n,[{key:"getDisplayInfo",value:function(){return{sourceGuid:this.sourceGuid,messageType:"Position",lat:"".concat(this.lat),lng:"".concat(this.lng),user:this.personId,timeStamp:this.timeStamp,personId:this.personId}}}]),n}(Ie),Ne=function(e){Object(C.a)(n,e);var t=Object(D.a)(n);function n(){var e;Object(P.a)(this,n);for(var i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return(e=t.call.apply(t,[this].concat(r))).xLoc=void 0,e.yLoc=void 0,e.zLoc=void 0,e.xAng=void 0,e.yAng=void 0,e.zAng=void 0,e}return n}(Se),Re=function(e){Object(C.a)(n,e);var t=Object(D.a)(n);function n(e){var i;return Object(P.a)(this,n),(i=t.call(this)).platformName=void 0,i.uniqueGuid=void 0,i.bodyName=void 0,i.position=void 0,i.boundingBox=void 0,e&&i.override(e),i}return n}(Se),Ge=function(e){Object(C.a)(n,e);var t=Object(D.a)(n);function n(e){var i;return Object(P.a)(this,n),(i=t.call(this)).uniqueGuid=void 0,i.platformName=void 0,i.boundingBox=void 0,i.members=new Array,e&&i.override(e),i.uniqueGuid="ea5be290-6314-4f72-ecf7-68ca15e386a3",i}return Object(M.a)(n,[{key:"establishBody",value:function(e){var t=this.members.find((function(t){return t.uniqueGuid===e.uniqueGuid}));t?t.override(e):(t=e,this.members.push(t))}},{key:"getDisplayInfo",value:function(){return{sourceGuid:this.sourceGuid,messageType:"Platform",lat:"".concat(this.lat),lng:"".concat(this.lng),platformName:this.platformName,timeStamp:this.timeStamp,personId:this.personId}}}]),n}(Ie),Be=function(e){Object(C.a)(n,e);var t=Object(D.a)(n);function n(e){var i;return Object(P.a)(this,n),(i=t.call(this)).uniqueGuid=void 0,i.name=void 0,i.type=void 0,i.note=void 0,i.uniqueGuid=ge.generateUUID(),e&&i.override(e),i}return Object(M.a)(n,[{key:"getDisplayInfo",value:function(){return{sourceGuid:this.sourceGuid,uniqueGuid:this.uniqueGuid,messageType:"Objective",lat:"".concat(this.lat),lng:"".concat(this.lng),user:this.personId,timeStamp:this.timeStamp,personId:this.personId,notes:"".concat(this.type," - ").concat(this.note||"")}}}]),n}(Ie),Ue=function(e){Object(C.a)(n,e);var t=Object(D.a)(n);function n(e){var i;return Object(P.a)(this,n),(i=t.call(this)).uniqueGuid=void 0,i.user=void 0,i.target=void 0,i.isTarget=void 0,i.range=void 0,i.uniqueGuid=ge.generateUUID(),e&&i.override(e),i}return Object(M.a)(n,[{key:"circle",value:function(){var e=this.range;return this.circlePolygon(e)}},{key:"intersection",value:function(e){var t=new Array,n=this.distance(e),i=e.range,r=this.range;if(n>i+r)return t;var a=(i*i-r*r-n*n)/(-2*r*n),o=this.toDeg(Math.acos(a)),s=this.bearing(e),c=s+o,u=this.destination(r,c);t.push(u);var h=s-o,l=this.destination(r,h);return t.push(l),t}},{key:"getDisplayInfo",value:function(){return{sourceGuid:this.sourceGuid,uniqueGuid:this.uniqueGuid,messageType:"Observation",lat:"".concat(this.lat),lng:"".concat(this.lng),user:this.user||this.personId,timeStamp:this.timeStamp,personId:this.personId,notes:"".concat(this.target," (").concat(this.range,"km)")}}}]),n}(Ie),Ve=function e(){Object(P.a)(this,e),this.ChatMessage=Me,this.Command=_e,this.Generic=De,this.Objective=Be,this.Observation=Ue,this.Position=Te,this.Platform=Ge,this.Status=Le,this.Body=Re},He=n(70),Fe=function(){function e(){Object(P.a)(this,e)}return Object(M.a)(e,null,[{key:"cloneCoords",value:function(e){var t=e.coords;return Object.assign({},{latitude:t.latitude,longitude:t.longitude,altitude:t.altitude,heading:t.heading,accuracy:t.accuracy,altitudeAccuracy:t.altitudeAccuracy,speed:t.speed})}}]),e}(),Ke=function(){function e(){Object(P.a)(this,e)}return Object(M.a)(e,null,[{key:"getColor",value:function(t){return e.mapLayerColors[t]?e.mapLayerColors[t]:e.mapLayerColors[0]}},{key:"getCallSignIcon",value:function(e){return new He.DivIcon({html:'<div class="call-sign-icon">'.concat(e,"</div>")})}},{key:"getObjectiveIcon",value:function(e){return new He.DivIcon({html:'<div class="objective-container"><img src="'.concat(e.name,'" class="objective-container-img" data-type="').concat(e.type,'" /></div>'),className:"non-existent-class-to-prevent-label-box"})}},{key:"getMoveObjective",value:function(e,t){return e.lat=t.target.getLatLng().lat,e.lng=t.target.getLatLng().lng,e}},{key:"getMoveObservation",value:function(e,t){return e.lat=t.target.getLatLng().lat,e.lng=t.target.getLatLng().lng,e}},{key:"getMovePlatform",value:function(e,t){return e.lat=t.target.getLatLng().lat,e.lng=t.target.getLatLng().lng,e}},{key:"getPlatformIconBBox",value:function(t,n,i){return e.getScalableRectangleBBox(t,n.platformName,i)}},{key:"getObservationIconBBox",value:function(t,n,i){return e.getScalableCircleBBox(t,n.target,i)}},{key:"getScalableCircleBBox",value:function(e,t,n){var i=[n[3],n[2]],r=[n[1],n[0]];console.log("getScalableCircleBBox startPoint, bbox=",i,n);var a=e.getZoom(),o=e.project(i,a),s=e.project(r,a),c=Number(Number(s.y-o.y).toFixed(2)),u=c,h=Math.min(c/8,12),l=["width: ".concat(c,"px"),"height: ".concat(u,"px")].join(";"),v=["font-size: ".concat(h,"pt")].join(";");return new He.DivIcon({html:'<div style="'.concat(l,'" class="observation-container"><div style="').concat(v,'" class="observation-text">').concat(t,"</div></div>"),iconAnchor:[c/2,u/2],className:"non-existent-class-to-prevent-label-box"})}},{key:"getScalableRectangleBBox",value:function(e,t,n){var i=[n[3],n[2]],r=[n[1],n[0]];console.log("getScalableRectangleBBox startPoint, bbox=",i,n);var a=e.getZoom(),o=e.project(i,a),s=e.project(r,a),c=Number(Number(s.x-o.x).toFixed(2)),u=Number(Number(s.y-o.y).toFixed(2)),h=Math.min(c/8,12),l=["width: ".concat(c,"px"),"height: ".concat(u,"px")].join(";"),v=["font-size: ".concat(h,"pt")].join(";");return new He.DivIcon({html:'<div style="'.concat(l,'" class="platform-container"><div style="').concat(v,'" class="observation-text">').concat(t,"</div></div>"),iconAnchor:[c/2,u/2],className:"non-existent-class-to-prevent-label-box"})}},{key:"getRandomPositionMove",value:function(){var e=[[1e-4,0],[-1e-4,0],[0,1e-4],[15e-5,0],[-15e-5,0],[0,15e-5],[175e-6,0],[-175e-6,0],[0,175e-6]];return e[ge.randomInt(0,e.length-1)]}}]),e}();Ke.mapLayerColors=["red","orange","green","blue","purple"],Ke.videoSpec={content:'<iframe width="560" height="315" src="https://www.youtube.com/embed/Lu56xVlZ40M" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>',options:{minWidth:580,maxHeight:350,className:"iobt"}};var We,Ye=n(80),Qe=Ye.b,qe=function(){function e(){Object(P.a)(this,e),this.connection=void 0,this.sourceGUID=void 0,this.personId=void 0,this.lastLat=void 0,this.lastLng=void 0,this.pongSubject=void 0,this.subjects=new Map,this.sourceGUID=ge.generateUUID(),this.personId=ge.randomName(),this.resetPosition((function(){}))}return Object(M.a)(e,[{key:"summary",get:function(){return{personId:this.personId,sourceGUID:this.sourceGUID,lat:this.lastLat,lng:this.lastLng}}},{key:"resetPosition",value:function(e){var t=this;navigator.geolocation.getCurrentPosition((function(n){t.lastLat=n.coords.latitude,t.lastLng=n.coords.longitude,e()}),(function(){Qe.warning("getCurrentPosition() and watchPosition() only work with secure origins. Use https");var n=Object(xe.a)(Ae.defaultLatLng,2);t.lastLat=n[0],t.lastLng=n[1],e()}))}},{key:"movePosition",value:function(e,t){this.lastLat+=e,this.lastLng+=t}},{key:"getClientHubUrl",value:function(){return new je({serviceKey:"clientHub$",endpoint:"/clientHub"}).getClientHubUrl()}},{key:"establishHubConnection",value:function(){if(this.connection)return this.connection;var e=new je({serviceKey:"chatService$",endpoint:"/clientHub"}).getClientHubUrl();return Qe.info("Hub Connection URL= ".concat(e)),this.connection=(new Ee.b).withUrl(e,{withCredentials:!1,skipNegotiation:!0,transport:Ee.a.WebSockets}).configureLogging(Ee.c.Debug).build(),this.connection}},{key:"doStart",value:function(e,t){if(this.connection)return Qe.warn("reuse connection"),void e();this.establishHubConnection().start().then((function(){e()})).catch((function(e){Qe.error("".concat(e.message," topic hub has failed")),console.log(e.stack),t()}))}},{key:"doStop",value:function(e){this.connection&&(this.connection.stop(),this.connection.onclose(e),this.connection=void 0)}},{key:"Estabish$",value:function(e){if(!this.subjects.has(e)){var t=new ee.a;this.subjects.set(e,t),this.connection.on(e,(function(n){var i=(new Ve)[e];t.next(new i(n))}))}return this.subjects.get(e)}},{key:"Pong$",value:function(){var e=this;return this.pongSubject||(this.pongSubject=new ee.a,this.connection.on("Pong",(function(t){e.pongSubject.next(t)}))),this.pongSubject}},{key:"doPing",value:function(){var e="Everybody play ping pong ".concat(ge.getNowIsoDate());this.connection.invoke("Ping",e)}},{key:"doPingPong",value:function(){var e="Others play ping pong ".concat(ge.getNowIsoDate());this.connection.invoke("PingPong",e)}},{key:"getBaseData",value:function(){return{sourceGuid:this.sourceGUID,timeStamp:ge.getNowIsoDate(),personId:this.personId}}},{key:"Generic$",value:function(){return this.Estabish$("Generic")}},{key:"sendGeneric",value:function(e){e.override(this.getBaseData()),this.connection.invoke("Generic",e)}},{key:"ChatMessage$",value:function(){return this.Estabish$("ChatMessage")}},{key:"sendChatMessageMesh",value:function(e){e.override(this.getBaseData()),this.connection.invoke("ChatMessageMesh",e,!0)}},{key:"Position$",value:function(){return this.Estabish$("Position")}},{key:"sendPosition",value:function(e){e.override(this.getBaseData()),e.user=this.personId,this.connection.invoke("Position",e)}},{key:"Objective$",value:function(){return this.Estabish$("Objective")}},{key:"sendObjective",value:function(e){e.override(this.getBaseData()),this.connection.invoke("Objective",e)}},{key:"Observation$",value:function(){return this.Estabish$("Observation")}},{key:"sendObservation",value:function(e){return e.override(this.getBaseData()),e.lat=Boolean(e.lat)?e.lat:this.lastLat,e.lng=Boolean(e.lng)?e.lng:this.lastLng,this.connection.invoke("Observation",e),e}},{key:"Platform$",value:function(){return this.Estabish$("Platform")}},{key:"Body$",value:function(){return this.Estabish$("Body")}},{key:"sendPlatform",value:function(e){return e.override(this.getBaseData()),e.lat=Boolean(e.lat)?e.lat:this.lastLat,e.lng=Boolean(e.lng)?e.lng:this.lastLng,this.connection.invoke("Platform",e),e}},{key:"sendBody",value:function(e){return e.override(this.getBaseData()),this.connection.invoke("Body",e),e}},{key:"Status$",value:function(){return this.Estabish$("Status")}},{key:"sendStatus",value:function(e){e.override(this.getBaseData()),this.connection.invoke("Status",e)}},{key:"Command$",value:function(){return this.Estabish$("Command")}},{key:"sendCommand",value:function(e){e.override(this.getBaseData()),this.connection.invoke("Command",e)}},{key:"doUpdatePosition",value:function(e){var t=new Te(Fe.cloneCoords(e));this.sendPosition(t)}}]),e}(),ze=n(155),Je=n(156);!function(e){e[e.DEFAULT=0]="DEFAULT",e[e.SIGNAL_R_CONNECTION_ESTABLISHED=1]="SIGNAL_R_CONNECTION_ESTABLISHED",e[e.SIGNAL_R_CONNECTION_UNAVAILABLE=2]="SIGNAL_R_CONNECTION_UNAVAILABLE",e[e.RECEIVED_COP_UPDATE=3]="RECEIVED_COP_UPDATE",e[e.RECEIVED_CHAT_MESSAGE=4]="RECEIVED_CHAT_MESSAGE",e[e.RECEIVED_ZOOM_IN_COMMAND=5]="RECEIVED_ZOOM_IN_COMMAND",e[e.RECEIVED_ZOOM_OUT_COMMAND=6]="RECEIVED_ZOOM_OUT_COMMAND",e[e.RECEIVED_HIDE_MAP_COMMAND=7]="RECEIVED_HIDE_MAP_COMMAND",e[e.RECEIVED_SHOW_MAP_COMMAND=8]="RECEIVED_SHOW_MAP_COMMAND",e[e.DISPLAY_OVERLAY_PAGE=9]="DISPLAY_OVERLAY_PAGE",e[e.MOVE_COMPLETE=10]="MOVE_COMPLETE"}(We||(We={}));var Ze=new(function(){function e(){Object(P.a)(this,e),this._behaviorSubject=new ze.a(We.DEFAULT),this._subject=new ee.a,this._subjectPayload=new ee.a}return Object(M.a)(e,[{key:"pubSub$",value:function(e){return this._subject.pipe(Object(Je.a)((function(t){return t===e})))}},{key:"pubSubLateObserver$",value:function(e){return this._behaviorSubject.pipe(Object(Je.a)((function(t){return t===e})))}},{key:"pubSubRaw$",value:function(){return this._subject}},{key:"pubSubCase$",value:function(e){return this._subject.pipe(Object(Je.a)((function(t){return-1!==e.indexOf(t)})))}},{key:"broadcast",value:function(e){this._subject.next(e)}},{key:"broadcastToLateObservers",value:function(e){this._behaviorSubject.next(e)}},{key:"pubSubPayload$",value:function(e){return this._subjectPayload.pipe(Object(Je.a)((function(t){return t[0]===e})))}},{key:"pubSubCasePayload$",value:function(e){return this._subjectPayload.pipe(Object(Je.a)((function(t){return-1!==e.indexOf(t[0])})))}},{key:"broadcastPayload",value:function(e,t){this._subjectPayload.next([e,t])}}]),e}()),Xe=n(170),$e=n(157),et=n(158),tt=n(169),nt=function(){function e(){Object(P.a)(this,e)}return Object(M.a)(e,null,[{key:"success",value:function(e,t,n){var i=t.response;if(i.payload=it.mapToModel(e,i.payload,n),"pending"===i.status){var r="".concat(i.status," ").concat(i.message," ").concat(t.request.url);console.warn(r)}return Object(Xe.a)(i)}},{key:"getAnySuccess",value:function(e){var t=e.response;if("pending"===t.status){var n="".concat(t.status," ").concat(t.message," ").concat(e.request.url);console.warn(n)}return Object(Xe.a)(t)}},{key:"error",value:function(e){return Object(Xe.a)(Object(b.a)({},it.mapErrorResponse(e)))}}]),e}(),it=new(function(){function e(){Object(P.a)(this,e)}return Object(M.a)(e,[{key:"mapToModel",value:function(e,t,n){return t.map((function(t){var i=n?n(t):t;return new e(i)}))}},{key:"mapErrorResponse",value:function(e){return{dateTime:(new Date).toISOString(),hasError:!0,status:"error",length:-1,payload:[],payloadType:"",metadata:{},message:e.message,error:e}}},{key:"post$",value:function(t,n,i,r,a){var o=new ee.a,s=n.getAPIUrl(),c=e.makeHeaders(r,{"Content-Type":"application/json"});return console.log("post$ url=",s),tt.a.post(s,i,c).pipe(Object($e.a)((function(e){return nt.success(t,e,a)})),Object(et.a)((function(e){return console.log(JSON.stringify(i,void 0,3)),nt.error(e)}))).subscribe(o),o}},{key:"postAny$",value:function(t,n,i,r,a){var o=new ee.a,s=!0,c=n.getAPIUrl(),u=e.makeHeaders(r,{"Content-Type":"application/json"});for(var h in i){var l=i[h];if(l instanceof Array){var v,d=Object(z.a)(l);try{for(d.s();!(v=d.n()).done;){var f=v.value;c+=(s?"?":"&")+encodeURIComponent(h.trim())+"="+encodeURIComponent("string"==typeof f?f.trim():JSON.stringify(f)),s=!1}}catch(y){d.e(y)}finally{d.f()}}else c+=(s?"?":"&")+encodeURIComponent(h.trim())+"="+encodeURIComponent("string"==typeof l?l.trim():JSON.stringify(l)),s=!1}return console.log("postAny$ url=",c),tt.a.post(c,null,u).pipe(Object($e.a)((function(e){return nt.success(t,e,a)})),Object(et.a)((function(e){return console.log(JSON.stringify(i,void 0,3)),nt.error(e)}))).subscribe(o),o}},{key:"postAnyData$",value:function(t,n,i,r,a){var o=new ee.a,s=n.getUrl(),c=e.makeHeaders(r,{"Content-Type":"application/json"});return console.log("postAny$ url=",s),tt.a.post(s,i,c).pipe(Object($e.a)((function(e){return nt.success(t,e,a)})),Object(et.a)((function(e){return console.log(JSON.stringify(i,void 0,3)),nt.error(e)}))).subscribe(o),o}},{key:"put$",value:function(t,n,i,r,a){var o=new ee.a,s=n.getUrl();console.log("put$ url=",s);var c=e.makeHeaders(r);return tt.a.put(s,JSON.stringify(i),c).pipe(Object($e.a)((function(e){return nt.success(t,e,a)})),Object(et.a)((function(e){return nt.error(e)}))).subscribe(o),o}},{key:"get$",value:function(t,n,i,r){var a=this,o=new ee.a,s=n.getAPIUrl(),c=e.makeHeaders(i);return console.log("getAPIUrl",s),tt.a.get(s,c).pipe(Object($e.a)((function(e){var i=e.response;if("pending"===i.status){if(i.length<=0&&n.localDataPath){var o=new je(Object(b.a)(Object(b.a)({},n),{},{forceLocalMock:!0}));return a.get$(t,o,r)}return console.warn("".concat(i.length," records found: PENDING status may not be necessary")),nt.success(t,e,r)}return nt.success(t,e,r)})),Object(et.a)((function(e){return console.error(s,"HTTP Issue"),nt.error(e)}))).subscribe(o),o}},{key:"getAny$",value:function(t,n){var i=t.getAPIUrl();console.log("getAny$ url",i);var r=e.makeHeaders(n);return tt.a.get(i,r).pipe(Object($e.a)((function(e){return nt.getAnySuccess(e)})),Object(et.a)((function(e){return console.error(i,"HTTP Issue"),nt.error(e)})))}},{key:"rawFetch$",value:function(t,n){var i=e.makeHeaders(n);return tt.a.get(t,i).pipe(Object($e.a)((function(e){return Object(Xe.a)(e.response)})),Object(et.a)((function(e){return console.error(t,"HTTP Issue"),Object(Xe.a)(e)})))}}],[{key:"makeHeaders",value:function(e,t){return Object(b.a)(Object(b.a)({},e),t)}}]),e}()),rt=new(function(){function e(){Object(P.a)(this,e),this.http=it,this.sharedModel={},this.personModel={},this.refreshedModel={},this.isDisplayChatToast=!0,this.tService=void 0,this.tService=new qe}return Object(M.a)(e,[{key:"summary",get:function(){return this.tService.summary}},{key:"addPropertyToTarget",value:function(e,t,n){return e[t]||(e[t]=[]),e[t].unshift(n),e[t]}},{key:"addProperty",value:function(e,t){return this.addPropertyToTarget(this.sharedModel,e,t)}},{key:"removeSource",value:function(e,t,n){var i="sources",r=t;this.personModel[n]&&delete this.personModel[n],e[i]&&e[i][r]&&delete e[i][r]}},{key:"establishSource",value:function(e,t,n){var i="sources",r=n.sourceGuid,a=n.personId;this.personModel[a]||(this.personModel[a]=r),e[i]||(e[i]={}),e[i][r]||(e[i][r]={});var o=e[i][r];return o[t]||(o[t]={}),o[t]=n,o}},{key:"removeObservation",value:function(e,t){var n="sources";Reflect.ownKeys(e[n]).forEach((function(i){var r=e[n][i].observations;r&&(e[n][i].observations=r.filter((function(e){return e.uniqueGuid!==t})))}))}},{key:"establishObservation",value:function(e,t,n){var i="sources",r=n.sourceGuid;e[i]||(e[i]={}),e[i][r]||(e[i][r]={});var a=e[i][r];a[t]||(a[t]=[]);var o=a[t].find((function(e){return e.uniqueGuid===n.uniqueGuid}));return o?o.override(n):a[t].unshift(n),a}},{key:"establishPlatform",value:function(e,t,n){var i="platforms";e[i]||(e[i]={});var r=e[i];return r[t]=n,r}},{key:"retrievePlatform",value:function(e,t){var n="platforms";return e[n]||(e[n]={}),e[n][t]||{}}},{key:"addObservation",value:function(e,t){return this.establishObservation(this.sharedModel,e,t)}},{key:"addPlatform",value:function(e){return this.establishPlatform(this.sharedModel,e.platformName,e)}},{key:"removeObjective",value:function(e,t){var n="sources";Reflect.ownKeys(e[n]).forEach((function(i){var r=e[n][i].objectives;r&&(e[n][i].objectives=r.filter((function(e){return e.uniqueGuid!==t})))}))}},{key:"establishObjective",value:function(e,t,n){var i="sources",r=n.sourceGuid;e[i]||(e[i]={}),e[i][r]||(e[i][r]={});var a=e[i][r];a[t]||(a[t]=[]);var o=a[t].find((function(e){return e.uniqueGuid===n.uniqueGuid}));return o?o.override(n):a[t].unshift(n),a}},{key:"addToSource",value:function(e,t){return this.establishSource(this.sharedModel,e,t)}},{key:"addObjective",value:function(e,t){var n=new Be(t);return this.establishObjective(this.sharedModel,e,n)}},{key:"processAllSourceData",value:function(e){var t=this,n=e.sources;ge.forEachKeyValue(n,(function(e,n){console.log("adding source key=",e);var i=n.position;i&&t.addToSource("position",new Te(i));var r=n.objectives;r&&(t.sharedModel.sources[e].objectives=[],ge.forEachKeyValue(r,(function(e,n){t.addObjective("objectives",new Be(n))})));var a=n.observations;a&&(t.sharedModel.sources[e].observations=[],ge.forEachKeyValue(a,(function(e,n){t.addObservation("observations",new Ue(n))})))})),Ze.broadcast(We.RECEIVED_COP_UPDATE)}},{key:"init",value:function(){var e=this;this.tService.doStart((function(){console.log("after tService.doStart"),e.tService.Pong$().subscribe((function(t){e.receivePing(t)})),e.tService.Generic$().subscribe((function(t){e.receiveGeneric(t)})),e.tService.ChatMessage$().subscribe((function(t){e.receiveChatMessage(t),e.isDisplayChatToast&&console.log("CentralModel ChatMessage",ge.stringify(t))})),e.tService.Position$().subscribe((function(t){e.receivePosition(t)})),e.tService.Objective$().subscribe((function(t){e.receiveObjective(t)})),e.tService.Observation$().subscribe((function(t){e.receiveObservation(t)})),e.tService.Platform$().subscribe((function(t){e.receivePlatform(t)})),e.tService.Body$().subscribe((function(t){e.receiveBody(t)})),e.tService.Status$().subscribe((function(t){e.receiveStatus(t)})),e.tService.Command$().subscribe((function(t){e.receiveCommand(t),e.processCommand(t)})),Ze.broadcastToLateObservers(We.SIGNAL_R_CONNECTION_ESTABLISHED),e.register()}),(function(){console.error("SignalR server did not start"),Ze.broadcastToLateObservers(We.SIGNAL_R_CONNECTION_UNAVAILABLE)}))}},{key:"restartEvents",value:function(){this.init()}},{key:"stopEvents",value:function(){this.tService.doStop((function(){console.error("Service stopped")}))}},{key:"register",value:function(){this.sendStatus(),this.sendPosition()}},{key:"unRegister",value:function(){this.unregisterSource(this.tService.sourceGUID,this.tService.personId)}},{key:"unregisterSource",value:function(e,t){var n=new _e({targetGuid:e,command:"UNREGISTER",args:[t,e]});this.processCommand(n),this.tService.sendCommand(n)}},{key:"deleteObservation",value:function(e){var t=new _e({targetGuid:e,command:"DELETE_OBSERVATION"});this.processCommand(t),this.tService.sendCommand(t)}},{key:"deleteObjective",value:function(e){var t=new _e({targetGuid:e,command:"DELETE_OBJECTIVE"});this.processCommand(t),this.tService.sendCommand(t)}},{key:"deleteObjectivePossibleTargets",value:function(){ge.forEachKeyValue(this.sharedModel.sources,(function(e,t){var n,i=null===(n=t.objectives)||void 0===n?void 0:n.filter((function(e){return e.type!==we.POSSIBLE_TARGET}));t.objectives=i})),Ze.broadcast(We.RECEIVED_COP_UPDATE)}},{key:"zoomInMap",value:function(e){var t=new _e({targetGuid:e,command:"ZOOM_IN"});this.tService.sendCommand(t)}},{key:"zoomOutMap",value:function(e){var t=new _e({targetGuid:e,command:"ZOOM_OUT"});this.tService.sendCommand(t)}},{key:"hideMap",value:function(e){var t=new _e({targetGuid:e,command:"HIDE_MAP"});this.tService.sendCommand(t)}},{key:"showMap",value:function(e){var t=new _e({targetGuid:e,command:"SHOW_MAP"});this.tService.sendCommand(t)}},{key:"processCommand",value:function(e){if(ge.matches(e.command,"UNREGISTER")){var t=e.targetGuid,n=e.args[0];this.removeSource(this.sharedModel,t,n),Ze.broadcast(We.RECEIVED_COP_UPDATE)}if(ge.matches(e.command,"FLUSH")&&(this.sharedModel={},this.personModel={},this.refreshedModel={},Ze.broadcast(We.RECEIVED_COP_UPDATE)),ge.matches(e.command,"DELETE_OBJECTIVE")){var i=e.targetGuid;this.removeObjective(this.sharedModel,i),Ze.broadcast(We.RECEIVED_COP_UPDATE)}if(ge.matches(e.command,"DELETE_OBSERVATION")){var r=e.targetGuid;this.removeObservation(this.sharedModel,r),Ze.broadcast(We.RECEIVED_COP_UPDATE)}ge.matches(e.command,"ZOOM_IN")&&Ze.broadcast(We.RECEIVED_ZOOM_IN_COMMAND),ge.matches(e.command,"ZOOM_OUT")&&Ze.broadcast(We.RECEIVED_ZOOM_OUT_COMMAND),ge.matches(e.command,"HIDE_MAP")&&Ze.broadcast(We.RECEIVED_HIDE_MAP_COMMAND),ge.matches(e.command,"SHOW_MAP")&&Ze.broadcast(We.RECEIVED_SHOW_MAP_COMMAND)}},{key:"refreshFromServer",value:function(e){var t=this,n=new je({serviceKey:"refreshFromServer$",endpoint:"/ClientHub/CentralModel"});this.http.getAny$(n).subscribe((function(n){n.hasError?console.error(n.message):(t.refreshedModel=n.payload[0],t.processAllSourceData(t.refreshedModel),console.log("refreshing")),e&&e()}),(function(e){console.error(e)}))}},{key:"flushCentralModel",value:function(e){var t=this,n=new je({serviceKey:"refreshFromServer$",endpoint:"/ClientHub/flushCentralModel"});this.http.getAny$(n).subscribe((function(n){n.hasError?Qe.error(n.message):(t.sharedModel={},t.personModel={},t.refreshedModel={},Ze.broadcast(We.RECEIVED_COP_UPDATE)),e&&e()}),(function(e){Qe.error(e),console.error(e)}))}},{key:"sendPing",value:function(){this.tService.doPing()}},{key:"receivePing",value:function(e){console.log("received ping data=",e),this.addProperty("ping",e)}},{key:"sendPingPong",value:function(){this.tService.doPingPong()}},{key:"sendGeneric",value:function(){this.tService.sendGeneric(new De({}))}},{key:"receiveGeneric",value:function(e){this.addToSource("generic",e)}},{key:"sendChatMessageMesh",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Me({});this.tService.sendChatMessageMesh(e)}},{key:"receiveChatMessage",value:function(e){this.addToSource("last_message",e),Ze.broadcastPayload(We.RECEIVED_CHAT_MESSAGE,e)}},{key:"sendPosition",value:function(){this.tService.sendPosition(new Te({lat:this.tService.lastLat,lng:this.tService.lastLng}))}},{key:"receivePosition",value:function(e){this.addToSource("position",e),Ze.broadcast(We.RECEIVED_COP_UPDATE)}},{key:"sendObjective",value:function(e){this.tService.sendObjective(e)}},{key:"receiveObjective",value:function(e){this.addObjective("objectives",e),Ze.broadcast(We.RECEIVED_COP_UPDATE)}},{key:"sendObservation",value:function(e){return this.tService.sendObservation(e)}},{key:"receiveObservation",value:function(e){this.addObservation("observations",e),Ze.broadcast(We.RECEIVED_COP_UPDATE)}},{key:"sendPlatform",value:function(e){return this.tService.sendPlatform(e)}},{key:"receivePlatform",value:function(e){this.addPlatform(e),Ze.broadcast(We.RECEIVED_COP_UPDATE)}},{key:"sendBody",value:function(e){return this.tService.sendBody(e)}},{key:"receiveBody",value:function(e){this.retrievePlatform(this.sharedModel,e.platformName).establishBody(e),Ze.broadcast(We.RECEIVED_COP_UPDATE)}},{key:"computeTargetsFromObservations",value:function(){var e=this,t=[];Reflect.ownKeys(this.sharedModel.sources||{}).sort().forEach((function(n){var i;null===(i=e.sharedModel.sources[n].observations)||void 0===i||i.forEach((function(e){t.push(e)}))}));for(var n=0;n<t.length;n++)for(var i=t[n],r=0;r<t.length;r++)if(n!==r){var a=t[r];this.computeObjective(i,a,"target")}Ze.broadcast(We.RECEIVED_COP_UPDATE)}},{key:"createPossableTarget",value:function(e,t){var n=new Be({lat:Se.asLat(e),lng:Se.asLng(e),uniqueGuid:ge.generateUUID(),name:"assets/images/ICON_Enemy.png",type:we.POSSIBLE_TARGET,note:"".concat(t," Computed from Observations")});return this.tService.sendObjective(n),n}},{key:"computeObjective",value:function(e,t,n){var i=e.intersection(t);if(0===i.length)return!1;var r=i[0];return r&&this.createPossableTarget(r,n),i[1]&&this.createPossableTarget(r,n),!0}},{key:"resetPosition",value:function(e){var t=this;this.tService.resetPosition((function(){t.sendPosition(),e&&e([t.tService.lastLat,t.tService.lastLng])}))}},{key:"moveAndSendPosition",value:function(e,t){this.tService.movePosition(e,t),this.sendPosition()}},{key:"sendStatus",value:function(){this.tService.sendStatus(new Le({user:this.tService.personId,device:"Squire",ammo:100,heartrate:62,ip_address:"0.0.0.0",battery:"full",notes:"Ready"}))}},{key:"receiveStatus",value:function(e){this.addToSource("status",e)}},{key:"sendCommand",value:function(e){this.tService.sendCommand(new _e(e))}},{key:"receiveCommand",value:function(e){this.addToSource("command",e)}}]),e}()),at=function(){function e(){Object(P.a)(this,e)}return Object(M.a)(e,[{key:"sendPlatformMessage",value:function(e){console.log("send platform message"),rt.sendPlatform(e)}},{key:"sendBody",value:function(e){console.log("send body message"),rt.sendBody(e)}}]),e}(),ot=function(e){Object(C.a)(n,e);var t=Object(D.a)(n);function n(e,i){var r;return Object(P.a)(this,n),(r=t.call(this,e,i)).imagePath="/images",r.scale=void 0,r.name=void 0,r.code=void 0,r.filename=void 0,r.uniqueGuid=void 0,r.uniqueGuid=ge.generateUUID(),r}return Object(M.a)(n,[{key:"xLoc",value:function(){var e=this.myParent().pinX();return this.x-e}},{key:"yLoc",value:function(){return 5}},{key:"zLoc",value:function(){var e=this.myParent().pinY();return this.y-e}},{key:"asBody",value:function(){var e=this.myParent(),t=new Ce;t.override({units:"m",width:.25,height:1,depth:.25});var n=new Ne;n.override({xLoc:e.scaleStageHorizontally(this.xLoc()),yLoc:this.yLoc(),zLoc:e.scaleStageVertically(this.zLoc())});var i=new Re;return i.override({uniqueGuid:this.uniqueGuid,bodyName:this.code,position:n,boundingBox:t,platformName:e.myName}),i}},{key:"finalize",value:function(){this.imageURL="".concat(this.imagePath,"/").concat(this.filename)}}]),n}(me),st=function(e){Object(C.a)(n,e);var t=Object(D.a)(n);function n(){var e;Object(P.a)(this,n);for(var i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return(e=t.call.apply(t,[this].concat(r))).scale=.3,e.code="airForce",e.name="Air Force",e.filename="air-force-logo.jpg",e}return Object(M.a)(n,[{key:"width",get:function(){return 198*this.scale}},{key:"height",get:function(){return 254*this.scale}}]),n}(ot),ct=function(e){Object(C.a)(n,e);var t=Object(D.a)(n);function n(){var e;Object(P.a)(this,n);for(var i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return(e=t.call.apply(t,[this].concat(r))).scale=.3,e.code="army",e.name="Army",e.filename="army-logo.png",e}return Object(M.a)(n,[{key:"width",get:function(){return 198*this.scale}},{key:"height",get:function(){return 254*this.scale}}]),n}(ot),ut=function(e){Object(C.a)(n,e);var t=Object(D.a)(n);function n(){var e;Object(P.a)(this,n);for(var i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return(e=t.call.apply(t,[this].concat(r))).scale=.3,e.code="navy",e.name="Navy",e.filename="navy-logo.png",e}return Object(M.a)(n,[{key:"width",get:function(){return 255*this.scale}},{key:"height",get:function(){return 255*this.scale}}]),n}(ot),ht=function(e){Object(C.a)(n,e);var t=Object(D.a)(n);function n(){var e;Object(P.a)(this,n);for(var i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return(e=t.call.apply(t,[this].concat(r))).scale=.125,e.code="marines",e.name="Marines",e.filename="marines-logo.png",e}return Object(M.a)(n,[{key:"width",get:function(){return 512*this.scale}},{key:"height",get:function(){return 512*this.scale}}]),n}(ot),lt=function(e){Object(C.a)(n,e);var t=Object(D.a)(n);function n(){var e;Object(P.a)(this,n);for(var i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return(e=t.call.apply(t,[this].concat(r))).scale=.05,e.code="nasa",e.name="NASA",e.filename="nasa-logo.png",e}return Object(M.a)(n,[{key:"width",get:function(){return 3400*this.scale}},{key:"height",get:function(){return 1700*this.scale}}]),n}(ot),vt=function(e){Object(C.a)(n,e);var t=Object(D.a)(n);function n(){var e;Object(P.a)(this,n);for(var i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return(e=t.call.apply(t,[this].concat(r))).scale=.04,e.code="spaceForce",e.name="Space Force",e.filename="space-force-logo.png",e}return Object(M.a)(n,[{key:"width",get:function(){return 1755*this.scale}},{key:"height",get:function(){return 2047*this.scale}}]),n}(ot),dt=function(e){Object(C.a)(n,e);var t=Object(D.a)(n);function n(){var e;Object(P.a)(this,n);for(var i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return(e=t.call.apply(t,[this].concat(r))).scale=.3,e.code="faa",e.name="FAA",e.filename="faa-logo.png",e}return Object(M.a)(n,[{key:"width",get:function(){return 255*this.scale}},{key:"height",get:function(){return 255*this.scale}}]),n}(ot),ft=function(e){Object(C.a)(n,e);var t=Object(D.a)(n);function n(){var e;Object(P.a)(this,n);for(var i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return(e=t.call.apply(t,[this].concat(r))).scale=.3,e.code="vip",e.name="VIP",e.filename="vip-logo.png",e}return Object(M.a)(n,[{key:"width",get:function(){return 255*this.scale}},{key:"height",get:function(){return 255*this.scale}}]),n}(ot),yt=function(e){Object(C.a)(n,e);var t=Object(D.a)(n);function n(){var e;Object(P.a)(this,n);for(var i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return(e=t.call.apply(t,[this].concat(r))).scale=.4,e.code="contractor",e.name="Contractor",e.filename="contractor.png",e}return Object(M.a)(n,[{key:"width",get:function(){return 272*this.scale}},{key:"height",get:function(){return 185*this.scale}}]),n}(ot),mt=new(function(e){Object(C.a)(n,e);var t=Object(D.a)(n);function n(){var e;return Object(P.a)(this,n),(e=t.call(this)).messageHandler=void 0,e.stageImageURL="/images/park-theatre/theatre-floor-plan.png",e.stageImageWidth=1338,e.stageImageHeight=1039,e.logoTypes=[st,ct,ut,ht,lt,vt,dt,ft,yt],e.logos=[],e.showBoundry=void 0,e.theatreWidth=48.4,e.theatreHeight=100,e.theatreDepth=37.58415,e.subHandle=void 0,e.onItemHoverEnter=function(e,t,n){t.drawHover=t.drawHighlight},e.onItemHoverExit=function(e,t,n){t.drawHover=void 0},e.pinX=function(){return.496*e.width},e.pinY=function(){return.217*e.height},e.draw=function(t){e.drawPage(t)},e.setName("ParkTheatre"),e.messageHandler=new at,e.setupMouseEvents(),e.setEventSubscriptions(),e}return Object(M.a)(n,[{key:"setEventSubscriptions",value:function(){var e=this;oe.observable.subscribe((function(t){if(console.log(t),"dropped"===t.cmd){var n=t.object;e.messageHandler.sendBody(n.asBody()),Ze.broadcast(We.RECEIVED_COP_UPDATE)}else if("moveComplete"===t.cmd){var i=t.object;e.messageHandler.sendBody(i.asBody()),Ze.broadcast(We.RECEIVED_COP_UPDATE)}else"pageCreated"===t.cmd&&e.messageHandler.sendPlatformMessage(e.asPlatform())}))}},{key:"canvas2Params",get:function(){var e=this;return{width:this.width,height:this.height,draw:function(t,n){e.render(t)}}}},{key:"scaleStageHorizontally",value:function(e){return this.theatreWidth*(e/this.width)}},{key:"scaleStageVertically",value:function(e){return this.theatreDepth*(e/this.height)}},{key:"asPlatform",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=new Ce;t.override({units:"m",width:this.theatreWidth,height:this.theatreHeight,depth:this.theatreDepth});var n=new Ge;return n.override({uniqueGuid:n.uniqueGuid,platformName:this.myName,boundingBox:t}),e&&(n.members=this.subcomponents.members.map((function(e){return e.asBody()}))),n}},{key:"createLogos",value:function(){var e=this;this.logos=[],Object.values(this.logoTypes).forEach((function(t){var n=new t(void 0,e);n.scale=n.scale*e.width*.001,n.finalize(),e.logos.push(n)}))}},{key:"init",value:function(e){var t=this,n=e()/this.stageImageWidth;this.width=this.stageImageWidth*n,this.height=this.stageImageHeight*n;var i=new ye({imageURL:this.stageImageURL,width:this.width,height:this.height});this.createLogos(),this.postDraw=function(e){i.draw(e),t.drawPin(e)}}},{key:"dropLogo",value:function(e){e.dropAt(this.width/2,this.height/2),this.subcomponents.addMember(e)}}]),n}(fe)),bt=n(16),gt=n(165),pt=n(83),kt=n(82),Ot=Object(y.a)((function(e){return Object(m.a)({iconButton:{border:"1px solid #e6e6e6",padding:e.spacing(.5),borderRadius:e.spacing(.5),cursor:"pointer",display:"flex",alignItems:"center"},buttonWithLabel:Object(b.a)(Object(b.a)({},e.typography.button),{},{backgroundColor:kt.a[500],paddingRight:e.spacing(2),color:e.palette.common.white}),disabledIconButton:{opacity:"0.25",cursor:"default"}})})),At=function e(){Object(P.a)(this,e),this.default=Object(i.forwardRef)((function(e,t){var n=Object(S.a)(),i=Ot(),r=e.director.spec.muiIcon,a=e.director.spec.faIcon,o=e.director.label;return Object(A.jsxs)(B.a,{className:O()(i.iconButton,Object(bt.a)({},i.buttonWithLabel,Boolean(o))),color:"primary",onClick:function(){return e.director.start()},children:[r&&Object(A.jsx)(r,{color:"inherit",fontSize:"small"}),a&&Object(A.jsx)(pt.a,{icon:a,size:"1x",color:n.palette.common.white}),Object(A.jsx)(B.a,{ml:.5,children:o})]},"option-".concat(e.id))})),this.tooltip=Object(i.forwardRef)((function(e,t){var n=Object(S.a)(),i=Ot(),r=e.director.spec.muiIcon,a=e.director.spec.faIcon;return Object(A.jsx)(gt.a,{arrow:!0,title:e.director.label,placement:"top",children:Object(A.jsxs)(B.a,{className:O()(i.iconButton),color:"primary",onClick:function(){return e.director.start()},children:[r&&Object(A.jsx)(r,{color:"inherit",fontSize:"small"}),a&&Object(A.jsx)(pt.a,{icon:a,size:"1x",color:n.palette.common.white})]},"option-".concat(e.id))})})),this.disabled=Object(i.forwardRef)((function(e,t){var n=Object(S.a)(),i=Ot(),r=e.director.spec.muiIcon,a=e.director.spec.faIcon,o=e.director.label;return Object(A.jsxs)(B.a,{color:"lightgrey",className:O()("disabled",i.iconButton,i.disabledIconButton,Object(bt.a)({},i.buttonWithLabel,Boolean(o))),onClick:function(e){e.preventDefault(),e.stopPropagation()},children:[r&&Object(A.jsx)(r,{color:"inherit",fontSize:"small"}),a&&Object(A.jsx)(pt.a,{icon:a,size:"1x",color:n.palette.common.white}),Object(A.jsx)(B.a,{ml:.5,children:o})]},"option-".concat(e.id))}))},jt=n(31),wt=n.n(jt),xt=function e(){Object(P.a)(this,e),this.director=void 0,this.name="Unnamed",this.execute=void 0},Et=function(e){Object(C.a)(n,e);var t=Object(D.a)(n);function n(e){var i;return Object(P.a)(this,n),(i=t.call(this)).pathname=void 0,i.dialogProps=void 0,i.onOk=void 0,i.onCancel=void 0,i.execute=function(){Ze.broadcastPayload(We.DISPLAY_OVERLAY_PAGE,{pathname:i.pathname,props:{ok:function(){i.onOk&&i.onOk(),i.director.next("OK")},cancel:function(){i.onCancel&&i.onCancel()},dialogProps:i.dialogProps,director:i.director}})},Object.assign(Object($.a)(i),Object(b.a)({},e)),i}return n}(xt);Et.default={pathname:"/confirm-info-add-offering-page",dialogProps:{},name:"defaultDialogPageCommand"};var Pt=function(e){Object(C.a)(n,e);var t=Object(D.a)(n);function n(e){var i;return Object(P.a)(this,n),(i=t.call(this)).action=void 0,i.execute=function(){i.action&&i.action(i.director),window.setTimeout((function(){i.director.next("SYNC COMMAND")}),0)},Object.assign(Object($.a)(i),Object(b.a)({},e)),i}return n}(xt),St=function(e){Object(C.a)(n,e);var t=Object(D.a)(n);function n(e){var i;return Object(P.a)(this,n),(i=t.call(this)).action=void 0,i.execute=function(){i.action&&i.action(i.director)},Object.assign(Object($.a)(i),Object(b.a)({},e)),i}return n}(xt),Ct=function(e){Object(C.a)(n,e);var t=Object(D.a)(n);function n(e){var i;return Object(P.a)(this,n),(i=t.call(this)).action=void 0,i.delayMs=0,i.execute=function(){window.setTimeout((function(){i.action&&i.action(i.director)}),i.delayMs)},Object.assign(Object($.a)(i),Object(b.a)({},e)),i}return n}(xt),Dt=function(){function e(t){Object(P.a)(this,e),this.label=void 0,this.isLog=!1,this.spec=void 0,this.commands=[],this.iterator=void 0,this.getRender=function(e){return e.default},this.existsWhenFunc=function(){return!0},Object.assign(this,Object(b.a)({},t)),this.spec=t}return Object(M.a)(e,[{key:"add",value:function(e){return e.director=this,this.commands.push(e),this}},{key:"addTimeout",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=new Ct(e);return n.delayMs=t,this.add(n)}},{key:"coroutine",value:wt.a.mark((function e(t){var n,i,r,a;return wt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Object(z.a)(t.commands),e.prev=1,n.s();case 3:if((i=n.n()).done){e.next=13;break}return r=i.value,t.isLog&&console.log('CommandListDirector before execute command name="'.concat(r.name,'"')),r.execute(),e.next=9,"Command name: ".concat(r.name);case 9:a=e.sent,t.isLog&&console.log("CommandListDirector yieldValue=",a);case 11:e.next=3;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(1),n.e(e.t0);case 18:return e.prev=18,n.f(),e.finish(18);case 21:return e.abrupt("return","START");case 22:case"end":return e.stop()}}),e,null,[[1,15,18,21]])}))},{key:"addDialogPage",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Et.default,t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(t){var n=new Et(e);return this.add(n)}return this}},{key:"addSync",value:function(e){var t=new Pt(e);return this.add(t)}},{key:"addASync",value:function(e){var t=new St(e);return this.add(t)}},{key:"addConditional",value:function(e){return this.addTimeout(e,0)}},{key:"addSleep",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:250,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"sleepBetweenDialogs",n={action:function(e){e.next("SLEEP")},name:t};return this.addTimeout(n,e),this}},{key:"renderRule",value:function(e){return this.getRender=e,this}},{key:"existsWhenRule",value:function(e){return this.existsWhenFunc=e,this}},{key:"do",value:function(e){var t=this,n={action:function(n){e(t),n.next("DO")},name:"DO FUNC"};return this.addTimeout(n),this}},{key:"writeCustomProperty",value:function(e,t){if(Reflect.set(this,e,t))return this;throw new Error("".concat(e," was not able to be created."))}},{key:"readCustomProperty",value:function(e){if(Reflect.getOwnPropertyDescriptor(this,e))return this[e];throw new Error("".concat(e," is not a known custom property on this command list.  You may need to set a property with writeCustomProperty."))}},{key:"hasCustomProperty",value:function(e){return Reflect.getOwnPropertyDescriptor(this,e)}},{key:"start",value:function(){this.iterator=this.coroutine(this),this.iterator.next("START_ITERATOR")}},{key:"next",value:function(e){var t=this.iterator.next(e);this.isLog&&console.log("next method yieldValue=",t)}},{key:"end",value:function(e){var t=e||"END";this.iterator.return(t)}},{key:"construct",value:function(){return this}}],[{key:"getInstance",value:function(t){return new e(t)}}]),e}(),Mt=function(){function e(t){Object(P.a)(this,e),this.page=t,this.maxAllowedLogoCount=3,this.currentLogoCount=0}return Object(M.a)(e,[{key:"directDropLogo",value:function(e){var t=this,n={label:" + ".concat(e.name)};return Dt.getInstance(n).renderRule((function(e){return t.currentLogoCount<t.maxAllowedLogoCount?e.default:e.disabled})).addSync({action:function(){t.currentLogoCount++,t.page.dropLogo(e)}})}},{key:"createElement",value:function(e,t){return Object(i.createElement)(e,Object(b.a)({key:t.id},t))}},{key:"generateOptions",value:function(e,t){var n=this;return e.filter((function(e){return e.existsWhenFunc()})).map((function(e,i){return n.createElement(e.getRender(t),{id:"".concat(e.label),director:e})}))}},{key:"generateTextButtonActions",value:function(e){var t=new At;return this.generateOptions(e,t)}},{key:"getTextButtons",value:function(){var e,t=this;return e=this.page.logos.map((function(e){return t.directDropLogo(e)})),this.generateTextButtonActions(e)}}]),e}();var Lt=function(e){var t=Object(S.a)(),n=function(){var e=Object(i.useState)({width:window.innerWidth,height:window.innerHeight}),t=Object(xe.a)(e,2),n=t[0],r=t[1];return Object(i.useEffect)((function(){function e(){r({width:window.innerWidth,height:window.innerHeight})}return window.addEventListener("resize",e),e(),function(){return window.removeEventListener("resize",e)}}),[]),n}(),r=Object(i.useState)(0)[1],a=Object(i.useMemo)((function(){return new Y}),[]);a.model=mt;var o=Object(i.useMemo)((function(){return new Mt(a.model)}),[a.model]);return a.actionButtons=o.getTextButtons(),Object(i.useEffect)((function(){window.setTimeout((function(){rt.sendPing(),oe.event("pageCreated",a.model)}),1e3)}),[a.model]),Object(i.useEffect)((function(){mt.init((function(){return Math.min(t.breakpoints.values[e.containerMaxWidthBreakpoint],n.width)}))}),[n,t,e.containerMaxWidthBreakpoint]),Object(i.useEffect)((function(){Ze.pubSub$(We.RECEIVED_COP_UPDATE).subscribe((function(){r((new Date).getTime())}))}),[r]),a.display()},_t=function(e){Object(C.a)(n,e);var t=Object(D.a)(n);function n(){var e;Object(P.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).cService=void 0,e.Component=function(e){return Object(A.jsxs)(i.Fragment,{children:[Object(A.jsx)("div",{children:"Display Logos"}),Object(A.jsx)(W.a,{only:"xs",children:Object(A.jsx)(H,{children:rt.sharedModel})})]})},e}return n}(K),It=function(e){var t=Object(i.useState)(0)[1],n=Object(i.useMemo)((function(){return new _t}),[]);return Object(i.useEffect)((function(){Ze.pubSub$(We.RECEIVED_COP_UPDATE).subscribe((function(){t((new Date).getTime())}))}),[t]),n.display()},Tt=Object(y.a)((function(e){return Object(m.a)({root:{},menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1},page:{marginTop:e.spacing(8),paddingLeft:0,paddingRight:0}})})),Nt="md",Rt=function(e){var t=Tt();return Object(A.jsxs)(u.a,{children:[Object(A.jsx)("div",{className:t.root,children:Object(A.jsx)(l.a,{position:"fixed",children:Object(A.jsxs)(v.a,{variant:"dense",children:[Object(A.jsx)(d.a,{variant:"h6",className:t.title,children:Object(A.jsx)(u.b,{to:"/",children:"IoBT Client Canvas"})}),Object(A.jsxs)("div",{children:[Object(A.jsx)(E,{children:Object(A.jsx)(u.b,{to:"/",children:"Park Theater"})}),Object(A.jsx)(E,{children:Object(A.jsx)(u.b,{to:"/display-logos",children:"Display Logos"})})]})]})})}),Object(A.jsx)(f.a,{className:t.page,maxWidth:Nt,children:Object(A.jsxs)(h.c,{children:[Object(A.jsx)(h.a,{path:"/display-logos",children:Object(A.jsx)(It,{containerMaxWidthBreakpoint:Nt})}),Object(A.jsx)(h.a,{path:"/",children:Object(A.jsx)(Lt,{containerMaxWidthBreakpoint:Nt})})]})})]})},Gt=(n(131),n(132),n(99)),Bt=n(100),Ut=function(){function e(){Object(P.a)(this,e)}return Object(M.a)(e,null,[{key:"pingServer$",value:function(){var e=new ee.a,t=new je({serviceKey:"pingServer$",endpoint:"/ping"}),n=it.get$(ke,t).subscribe((function(t){var i=t.message,r=t.error;r&&console.log(r);var a=!!i&&i.toLowerCase().indexOf("up")>=0;n.unsubscribe(),e.next(a),e.complete()}),(function(t){e.error(t)}));return e}},{key:"loadConfiguration$",value:function(){var e=new ee.a,t=Gt;return t=Bt,Ae.override(t),rt.init(),window.setTimeout((function(){e.next(!0)}),10),e}}]),e}(),Vt=Object(c.a)({palette:{}});Ut.loadConfiguration$().subscribe((function(e){a.a.render(Object(A.jsxs)(i.StrictMode,{children:[Object(A.jsx)(s.a,{}),Object(A.jsx)(Ye.a,{position:"bottom-right",autoClose:2500}),Object(A.jsx)(o.a,{theme:Vt,children:Object(A.jsx)(Rt,{})})]}),document.getElementById("root"))}))},99:function(e){e.exports=JSON.parse('{"baseURL???":"http://192.168.1.19:8080","baseURL??":"http://localhost:53000","baseURL":"http://localhost:5000","baseURL?":"https://iobtweb.azurewebsites.net","rootAPIPath":"/api","localDebug":true,"mesh":[{"name":"n1","url":"http://localhost:5000"},{"name":"n2","url":"https://iobtmesh.azurewebsites.net"}],"defaultLatLng":[38.5876921,-79.39259]}')}},[[133,1,2]]]);
//# sourceMappingURL=main.baf1f116.chunk.js.map