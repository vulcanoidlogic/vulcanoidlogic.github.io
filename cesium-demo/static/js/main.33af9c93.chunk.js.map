{"version":3,"sources":["../external \"Cesium\"","app/shared/K2PubSub.ts","app/shared/foTools.ts","app/shared/runtime-type.ts","app/shared/model-base.ts","app/shared/environment.ts","app/shared/service-locator.ts","app/shared/payload-handler.ts","app/shared/app-http.service.ts","app/shared/user.ts","app/k2-mui-core/K2Alert.tsx","app/elementals/empty.tsx","app/k2-mui-core/K2JsonPreview.tsx","app/k2-core/K2Render.ts","app/k2-mui-core/data-grid/ag-grid/K2Grid.tsx","app/pages/home-page/entity-points.render.tsx","app/shared/hooks.ts","app/models/vault-entity.model.ts","app/pages/home-page/entity-points.container.ts","app/pages/home-page/home-page.render.tsx","app/pages/home-page/home-page.container.ts","app/pages/example-1-page/vesseltrack-points.render.tsx","app/pages/example-1-page/vesseltrack-points.container.ts","app/pages/example-1-page/example-1-page.render.tsx","app/pages/example-1-page/example-1-page.container.ts","app/elementals/Timeline.ts","app/pages/example-2-page/satellite-vessel-timeline.render.tsx","app/pages/example-2-page/satellite-vessel-timeline.container.ts","app/pages/example-2-page/example-2-page.render.tsx","app/pages/example-2-page/example-2-page.container.ts","app/pages/example-3-page/allvesseltracks-points.render.tsx","app/pages/example-3-page/allvesseltracks-points.container.ts","app/pages/example-3-page/example-3-page.render.tsx","app/pages/example-3-page/example-3-page.container.ts","app/pages/api.service.ts","app/theme.ts","app/pages/python-output-1-page/satellite-vessel-timeline.render.tsx","app/pages/python-output-1-page/satellite-vessel-timeline.container.ts","app/pages/python-output-1-page/python-output-1-page.render.tsx","app/pages/python-output-1-page/python-output-1-page.container.ts","app/pages/pipeline-ouput-9-sat-10-ves-page/satellite-vessel-timeline.render.tsx","app/pages/pipeline-ouput-9-sat-10-ves-page/satellite-vessel-timeline.container.ts","app/pages/pipeline-ouput-9-sat-10-ves-page/pipeline-ouput-9-sat-10-ves-page.render.tsx","app/pages/pipeline-ouput-9-sat-10-ves-page/pipeline-ouput-9-sat-10-ves-page.container.ts","app/page-layout/page-resource.render.tsx","app/page-layout/page-resource.container.ts","app/page-layout/page-layout.render.tsx","app/page-layout/page-layout.container.ts","app/app.render.tsx","app/app.container.ts","app/app.service.ts","index.tsx"],"names":["module","exports","Cesium","Topics","foNames","PubSub","_subject","Subject","_subjectPayload","this","topic","next","message","_defaultRenderComponent","_defaultRoute","prefix","render","path","documentName","defaultPath","Tools","hasOwnProperty","Object","prototype","funct","ret","toString","substr","length","indexOf","trim","d","Date","getTime","replace","c","r","Math","random","floor","target","result","stringify","JSON","parse","deep","resolveReference","value","asReference","constructor","name","resolveCircular","key","map","item","id","startsWith","primitive","typeId","split","namespace","obj","myNamespace","myType","low","high","g","b","str1","str2","toLocaleLowerCase","charAt","toUpperCase","slice","ref","matches","AT","THIS","SELF","Array","isArray","call","isInstanceOf","str","removeSpecial","removeSpaces","keys","substring","filename","string","toLowerCase","host","fullpath","source","foTools","spec","forEach","intersect","defineProperty","enumerable","configurable","func","get","set","list","m","push","mapOverKeyValue","mapFunc","body","forEachKeyValue","k","v","isFunction","properties","defineCalculatedProperty","ex","console","log","x","distinct","pluckBy","dictionary","g1","g2","item1","item2","isoDate","format","formatDistance","addSuffix","includeSeconds","toISOString","getFullYear","event","ctrlKey","days","formatISO","addDays","parseISO","hours","addHours","ModelBase","data","writable","object","dataToRetrieve","token","propertyName","asArray","getter","getPropertyValue","join","setter","defaultData","defaultLabel","remove","pull","labelForAdd","defaultDataForAdd","assign","isME","minReq","isEmpty","clear","getEnumValues","setTimeout","complete","mutuallyExclusive","minRequiredSelections","undefined","ignore","Environment","production","e2eBaseURL","rootAPIPath","APIVersion","localMockPath","componentLibrary","version","didHealthCheckPass","envVars","services","featureflags","isHideDocumentInspector","override","ServiceLocator","serviceKey","endpoint","localDataPath","localMockData","forceLocalMock","found","Toast","info","warning","longPath","REACT_APP_BASE_URL","url","encodeURI","payloadHandler","type","successResponse","res","response","payload","AppHttpService","mapToModel","status","warningMessage","request","of","errorResponse","mapErrorResponse","error","dateTime","hasError","payloadType","metadata","serviceOptions","additionalHeaders","subject","getUrl","headers","AppHttpServiceClass","makeHeaders","ajaxPost","pipe","switchMap","ajaxRes","success","catchError","subscribe","ajaxPut","ajaxGet","responce","options","get$","getAnySuccess","contentType","CurrentUser","Token","accessToken","bearerToken","Authorization","idToken","refreshToken","signInUserSession","jwtToken","User","roles","firstName","lastName","email","password","phoneNumber","gender","isAuthenticated","keycloak","username","_token","role","includes","userID","K2Alert","props","elevation","variant","Display","data-testid","title","display","severity","broadcastPayload","TOAST_DISPLAYED","EmptyRender","makeStyles","theme","createStyles","summary","justifyContent","preBlock","backgroundColor","width","K2Render","Component","createElement","defaultColumnDef","headerCheckboxSelection","checkboxSelection","suppressSizeToFit","resizable","filter","sortable","editable","autoHeight","K2Grid","rowSelection","selectedRows","setApi","useState","height","Boolean","Typography","style","minWidth","className","defaultColDef","onSelectionChanged","params","api","getSelectedRows","handleChangeSelection","isCallHandleChange","updatedRowData","getModel","rowsToDisplay","rowNode","isSelected","selected","onFirstDataRendered","sizeColumnsToFit","resetRowHeights","setGridApi","onGridSizeChanged","handleGridSizeChanged","onNewColumnsLoaded","handleNewColumnsLoaded","onGridReady","setColumnApi","columnApi","window","forEachNode","index","setSelected","singleClickEdit","suppressColumnVirtualisation","suppressRowClickSelection","defaultProps","isHideButtonBar","styles","viewer","position","border","fontSize","fontWeight","paddingLeft","spacing","paddingRight","margin","overflowY","color","palette","common","white","top","EntityPointsRender","classes","utc","Self","timeline","fullscreenButton","enableLighting","SatelliteEntity","VesselEntity","HitEntity","DisplayTable","Box","mt","gridDefinitions","current","scaleByDistance","NearFarScalar","satellites","satellite","worldLocation","Description","text","eyeOffset","Cartesian3","image","vessels","vessel","pixelSize","Color","PLUM","hits","hit","satelliteWorldLocation","vesselWorldLocation","YELLOW","LAVENDER","material","Material","fromType","positions","targets","lat","lon","alt","my","useRenderClass","Impl","useMemo","TrackedEntityGeoLocation","locationsByHour","p1","fromDegrees","p2","dist","distance","alert","Satellite","extraAlt","Vessel","TrackedEntityPair","sat_id","ves_id","azimuth","range","TrackedEntitySnapshot","pairs","sateliteLookUp","vesselLookUp","satelliteSpec","vesselSpec","values","pairSpec","addTarget","purge","JulianDate","fromIso8601","GridDefinitions","snapshot","rowData","columnDefs","field","headerName","valueFormatter","getIdListFormatter","snapshots","EntityPoints","setData","setRefreshMs","previousUtc","useRef","useEffect","s","service","APIService","getTrackedEntitySnapshot$","localData","getSnapshotDefinitions","unsubscribe","pubSub$","TIME_INDEX_CHANGED","now","Render","HomePageRender","HomePage","VesselTrackPointsRender","VesselTrackEntity","VesselTracks","getShipTracks$","Example1PageRender","Example1Page","Timeline","createCesiumComponent","create","context","element","zoomTo","startTime","stopTime","destroy","isDestroyed","SatelliteVesselTimelineRender","currentSnapshot","dataPoints","start","finish","onTickFunc","clock","num","secondsDifference","currentTime","den","localIndex","setIndex","clockRange","ClockRange","LOOP_STOP","clockStep","ClockStep","SYSTEM_CLOCK_MULTIPLIER","multiplier","shouldAnimate","onTick","displayItems","SatelliteVesselTimeline","getTrackedEntity6HourTimeline$","getPathsOverTimeDefinitions","Example2PageRender","Example2Page","AllVesselTrackPointsRender","AllVesselTrackEntity","LIGHTCORAL","AllVesselTracks","getAllShipTracks$","Example3PageRender","Example3Page","http","localSubject","warn","newEntity","_source","appTheme","sidebar","overrides","RaMenu","open","createMuiTheme","defaultTheme","getTrackedEntityPythonOutput1$","PythonOutput1PageRender","PythonOutput1Page","getTrackedEntityPipelineOutput9Sat10Ves$","PipelineOutput9Sat10VesPageRender","PipelineOutput9Sat10VesPage","PageResourceRender","Admin","dataProvider","disableTelemetry","Resource","icon","Home","label","Tune","PageResource","fakeDataProvider","PageLayoutRender","CssBaseline","snackbarQueue","snackbarProps","Snackbar","anchorOrigin","vertical","horizontal","onClose","autoHideDuration","getSnackbarTopPosition","PageLayout","AppRender","NoSsr","App","AppService","health","config","Ion","defaultAccessToken","cesiumToken","configDevelopment","configProduction","rawFetch$","baseUrl","configureCesium","loadConfiguration$","ok","ReactDOM","document","getElementById","pingServer$","isApiAccessible","process"],"mappings":"uiCAAAA,EAAOC,QAAUC,Q,kECELC,E,sIAAAA,O,qCAAAA,I,4CAAAA,M,KAKL,ICLKC,ED+BDC,EAAmB,I,iDApBlBC,SAAW,IAAIC,I,KACfC,gBAAkB,IAAID,I,sDAG1B,OAAOE,KAAKH,W,gCAGNI,GACND,KAAKH,SAASK,KAAKD,K,uCAInB,OAAOD,KAAKD,kB,uCAGCI,GACbH,KAAKD,gBAAgBG,KAAKC,O,SEEQ,I,iDA5B9BC,wBAAoE,G,KAEpEC,cAA0C,G,sEAExBC,EAAgBC,GACtCP,KAAKI,wBAAwBE,GAAUC,I,gDAGjBD,GACtB,OAAON,KAAKI,wBAAwBE,K,yCAGrBA,GACf,QAAON,KAAKI,wBAAwBE,K,6CAGjBA,EAAgBE,GAEnC,OADAR,KAAKK,cAAcC,GAAUE,EACvB,IAAN,OAAWA,K,0CAGKF,EAAgBG,EAAsBC,GACtD,IAAMF,EAAOR,KAAKK,cAAcC,GAEhC,OADcE,EAAI,WAAOA,EAAP,YAAeC,GAAiBC,M,mIDxB9Cf,K,kBAAAA,E,OAAAA,E,YAAAA,E,YAAAA,E,aAAAA,M,KAoBL,IA6oBIgB,EAAiB,IA7oB5B,iDAEYC,eAAiBC,OAAOC,UAAUF,eAF9C,4DAQoBG,GACZ,IAAIC,EAAMD,EAAME,WAGhB,OADAD,GADAA,EAAMA,EAAIE,OAAO,YAAYC,SACnBD,OAAO,EAAGF,EAAII,QAAQ,OACrBC,SAZnB,qCAiBQ,IAAIC,GAAI,IAAIC,MAAOC,UAQnB,MAPa,uCAAuCC,QAAQ,SAAS,SAAUC,GAE3E,IAAMC,GAAKL,EAAoB,GAAhBM,KAAKC,UAAiB,GAAK,EAG1C,OAFAP,EAAIM,KAAKE,MAAMR,EAAI,KAEL,MAANI,EAAYC,EAAS,EAAJA,EAAW,GAAKV,SAAS,SAvB9D,6BA4BWc,GACH,IAAMC,EAAShC,KAAKiC,UAAUF,GAC9B,OAAOG,KAAKC,MAAMH,KA9B1B,gCAiCcD,GAA0C,IAAXK,EAAU,uDAAH,EAC5C,SAASC,EAAiBC,GACtB,OAAIA,GAASA,EAAMC,YACR,cAAgBD,EAAMC,cAAgB,IAAMD,EAAME,YAAYC,KAAO,IAEzEH,EAEX,SAASI,EAAgBC,EAAUL,GAC/B,OAAQK,GACJ,IAAK,WACD,OAAON,EAAiBC,GAC5B,IAAK,YACD,OAAOA,EACDA,EAAMM,KAAI,SAACC,GACP,OAAOR,EAAiBQ,MAE5BP,EACV,IAAK,UAEL,IAAK,WACD,OAAOA,EACX,IAAK,UACD,OAAOA,EAAMM,KAAI,SAACC,GACd,OAAOA,EAAKC,MAGxB,IAAIH,EAAII,WAAW,KAOnB,OAAOT,EAGX,OAAOJ,KAAKD,UAAUF,EAAQW,EAAiBN,KArEvD,yCAwEuBU,EAAYE,GAC3B,IAAMC,EAASH,EAAGI,MAAM,MACpBlB,EAAS,CAAEmB,UAAW,GAAIV,KAAMK,GAYpC,OAXsB,IAAlBG,EAAO9B,OACPa,EAAS,CACLmB,UAAWF,EAAO,GAClBR,KAAMQ,EAAO,IAEVD,IACPhB,EAAS,CACLmB,UAAWF,EAAO,GAClBR,KAAMO,IAGPhB,IAtFf,mCAyFiBoB,GACT,IAAIC,EAAcD,EAAIE,OAASF,EAAIE,OAAOJ,MAAM,MAAQ,CAAC,IAEzD,OADAG,EAAcA,EAAY,KA3FlC,8BA+FYD,GACJ,IAAIE,EAASF,EAAIE,OAASF,EAAIE,OAAOJ,MAAM,MAAQ,CAAC,IAEpD,OADAI,EAA2B,IAAlBA,EAAOnC,OAAemC,EAAO,GAAKA,EAAO,KAjG1D,gCAqGcH,EAAmBV,GACzB,MAAM,GAAN,OAAUU,EAAV,aAAwBV,KAtGhC,gCAyGcc,EAAaC,GACnB,OAAOD,EAAM3B,KAAKE,MAAMF,KAAKC,UAAY2B,EAAOD,EAAM,MA1G9D,6BA6GWA,EAAaC,GAChB,OAAOD,EAAM3B,KAAKC,UAAY2B,EAAOD,KA9G7C,uCAmHQ,IAAM5B,EAAK,IAAMC,KAAKC,SAAY,EAE5B4B,EAAK,IAAM7B,KAAKC,SAAY,EAE5B6B,EAAK,IAAM9B,KAAKC,SAAY,EAClC,MAAM,OAAN,OAAcF,EAAd,YAAmB8B,EAAnB,YAAwBC,EAAxB,OAxHR,8BA2HYC,EAAcC,GAClB,OAAID,IAASC,GAGND,GAAQC,GAAQD,EAAKE,sBAAwBD,EAAKC,sBA/HjE,iCAkIeF,EAAcC,GACrB,OAAID,IAASC,GAGND,GAAQC,GAAQD,EAAKE,oBAAoBd,WAAWa,EAAKC,uBAtIxE,4CAyI0BF,GAClB,OAAOA,EAAKG,OAAO,GAAGC,cAAgBJ,EAAKK,MAAM,KA1IzD,6BA6IWC,GACH,OAAOjE,KAAKkE,QAAQD,EAAKtE,EAAQwE,KAAOnE,KAAKkE,QAAQD,EAAKtE,EAAQyE,OAASpE,KAAKkE,QAAQD,EAAKtE,EAAQ0E,QA9I7G,8BAiJYjB,GACJ,OAAIkB,MAAMC,QACCD,MAAMC,QAAQnB,GAEsB,mBAAxCvC,OAAOC,UAAUG,SAASuD,KAAKpB,KArJ9C,iCAwJeA,GACP,MAAsB,oBAARA,IAzJtB,+BA4JaA,GACL,MAAsB,kBAARA,IA7JtB,+BAgKaA,GACL,MAAsB,kBAARA,IAjKtB,6BAoKWA,GACH,OAAOA,aAAe7B,OArK9B,+BAwKa6B,GACL,OAAOA,GAAsB,kBAARA,IAzK7B,uCA4KqBT,GACb,OAAO,IA7Kf,8BAgLYS,GACJ,OAAOA,GAAOA,EAAIqB,eAjL1B,8BAoLYrB,GAEJ,GAAW,MAAPA,EACA,OAAO,EAKX,GAAIA,EAAIjC,OAAS,EACb,OAAO,EAEX,GAAmB,IAAfiC,EAAIjC,OACJ,OAAO,EAMX,GAAmB,kBAARiC,EACP,OAAO,EAOX,IAAK,IAAIT,KAAOS,EACZ,GAAIpD,KAAKY,eAAe4D,KAAKpB,EAAKT,GAC9B,OAAO,EAIf,OAAO,IApNf,oCAuNkB+B,GACV,OAAOA,EAAIjD,QAAQ,QAAS,OAxNpC,mCA2NiBiD,GACT,OAAOA,EAAIjD,QAAQ,QAAS,OA5NpC,oCA+NkBiD,GACV,OAAOA,EAAIjD,QAAQ,kBAAmB,MAhO9C,sCAmOoBiD,GACZ,IAAI1C,EAAShC,KAAK2E,cAAcD,GAEhC,OADA1C,EAAShC,KAAK4E,aAAa5C,IACb6B,sBAtOtB,oCAyOkBa,EAAatB,GAGvB,IAFA,IAAIpB,EAAS0C,GAAO,GAEpB,MADa7D,OAAOgE,KAAKzB,GACzB,eAAwB,CAAnB,IAAMT,EAAG,KACJF,EAAO,IAAME,EAAM,IACnBL,EAAQc,EAAIT,GAClBX,EAASA,EAAOP,QAAQgB,EAAMH,GAIlC,OAAON,IAnPf,+BAsPa0C,GACL,OAAOA,EAAIjD,QAAQ,WAAY,QAvPvC,6BA0PWiD,GACH,OAAOA,EAAII,UAAU,EAAGJ,EAAIvD,OAAS,KA3P7C,6BA8PWuD,GACH,MAAM,IAAN,OAAWA,EAAX,OA/PR,6BAkQWA,GACH,MAAM,IAAN,OAAWA,EAAX,OAnQR,wCAsQsBK,GACd,IAAIC,EAASD,EAASE,cAIhBC,GAFNF,GADAA,EAASA,EAAOvD,QAAQ,UAAW,KACnBA,QAAQ,WAAY,KAEhByB,MAAM,KAAK,GAE/B,MAAO,CACHiC,SAAUJ,EACVG,OACA1E,KAJSwE,EAAOvD,QAAQyD,EAAM,OA5Q1C,6BAoRWnD,EAAaqD,GAChB,IAAKA,EACD,OAAOrD,EAGX,IAAK,IAAIY,KAAOyC,EACRpF,KAAKY,eAAe4D,KAAKY,EAAQzC,KACjCZ,EAAOY,GAAOyC,EAAOzC,IAG7B,OAAOZ,IA9Rf,4BAiSUA,EAAaqD,GACf,IAAKA,EACD,OAAOrD,EAEX,IAAKA,EACD,OAAOqD,EALiB,oBAQVA,GARU,IAQ5B,2BAA0B,CAAC,IAAhBzC,EAAe,QACtBZ,EAAOY,GAAOyC,EAAOzC,IATG,8BAW5B,OAAOZ,IA5Sf,+BA+SaA,EAAaqD,GAClB,IAAKA,EACD,OAAOrD,EAEX,IAAKA,EACD,OAAOqD,EAEX,IAAK,IAAMzC,KAAOyC,EACVC,EAAQzE,eAAe4D,KAAKzC,EAAQY,KACpCZ,EAAOY,GAAOyC,EAAOzC,IAG7B,OAAOZ,IA3Tf,6BA8TWA,EAAaqD,GAChB,IAAKA,EACD,OAAOrD,EAEX,IAAKA,EACD,OAAOqD,EAEX,IAAK,IAAMzC,KAAOyC,EACVpF,KAAKY,eAAe4D,KAAKzC,EAAQY,WAC1BZ,EAAOY,GAGtB,OAAOZ,IA1Uf,8BA6UYA,EAAa8C,GACjB,IAAMS,EAAY,GAKlB,OAJAT,GACIA,EAAKU,SAAQ,SAAC5C,GACV2C,EAAK3C,GAAOZ,EAAOY,MAEpB2C,IAnVf,6BAsVWvD,EAAaqD,GAChB,IAAKA,EACD,OAAOrD,EAGX,IAAMC,EAAc,GACpB,IAAK,IAAMW,KAAOZ,EAAQ,CAEtBC,EADeoD,EAAOzC,IAAQA,GACbZ,EAAOY,GAE5B,OAAOX,IAhWf,gCAmWcD,EAAaqD,GACnB,IAAKA,EACD,OAAOrD,EAEX,IAAKA,EACD,OAAOqD,EAEX,IAAMI,EAAiB,GACvB,IAAK,IAAM7C,KAAOZ,EACV/B,KAAKY,eAAe4D,KAAKY,EAAQzC,GACjC6C,EAAU7C,GAAOyC,EAAOzC,GAExB6C,EAAU7C,GAAOZ,EAAOY,GAGhC,OAAO6C,IAlXf,4BAqXUzD,EAAaqD,GACf,IAAMpD,EAAc,GACpB,GAAID,EACA,IAAK,IAAMY,KAAOZ,EACdC,EAAOW,GAAOZ,EAAOY,GAG7B,GAAIyC,EACA,IAAK,IAAMzC,KAAOyC,EACdpD,EAAOW,GAAOyC,EAAOzC,GAG7B,OAAOX,IAjYf,0CAmYwBD,EAAaU,EAAcH,GAM3C,OALAzB,OAAO4E,eAAe1D,EAAQU,EAAM,CAChCH,MAAOA,EACPoD,YAAY,EACZC,cAAc,IAEX5D,IAzYf,gDA4Y8BA,EAAaU,EAAcmD,GAOjD,OALA/E,OAAO4E,eAAe1D,EAAQU,EAAM,CAChCiD,YAAY,EACZC,cAAc,EACdE,IAAKD,IAEF7D,IAnZf,+CAsZ6BA,EAAaU,EAAcmD,GAUhD,OARA/E,OAAO4E,eAAe1D,EAAQU,EAAM,CAChCiD,YAAY,EACZC,cAAc,EACdE,IAAKD,EACLE,IAJgC,SAI5BxD,GACAtC,KAAK,IAAL,OAASyC,IAAUH,KAGpBP,IAhaf,iCAmaeqB,GACP,IAAM2C,EAAc,GACpB,IAAK,IAAMC,KAAK5C,EAAItC,UACM,oBAAXsC,EAAI4C,IACXD,EAAKE,KAAKD,GAGlB,OAAOD,IA1af,8BA6aY3C,EAAUrC,GACd,OAAIf,KAAKuE,QAAQnB,GACNA,EAEJpD,KAAKkG,gBAAgB9C,GAAK,SAACT,EAAUL,GACxC,OAAOvB,EAAQA,EAAM4B,EAAKL,GAASA,OAlb/C,wCAsbsBc,EAAU+C,GAAe,IAAD,OAEhCC,EAAY,GAWlB,OAVahD,EAAMvC,OAAOgE,KAAKzB,GAAO,IACjCmC,SAAQ,SAAC5C,GACV,GAAI,EAAK/B,eAAe4D,KAAKpB,EAAKT,GAAM,CACpC,IAAML,EAAQc,EAAIT,GACZX,EAASmE,EAAQxD,EAAKL,GACxBN,IACAoE,EAAKzD,GAAOX,OAIjBoE,IAncf,sCAscoBhD,EAAU+C,GAAmB,IAAD,OAElCJ,EAAY,GAWlB,OAVa3C,EAAMvC,OAAOgE,KAAKzB,GAAO,IACjCmC,SAAQ,SAAC5C,GACV,GAAI,EAAK/B,eAAe4D,KAAKpB,EAAKT,GAAM,CACpC,IAAML,EAAac,EAAIT,GACjBX,EAAcmE,EAAQxD,EAAKL,GAC7BN,GACA+D,EAAKE,KAAKjE,OAIf+D,IAndf,sCAsdoB3C,EAAU+C,GAAe,IAAD,QAEvB/C,EAAMvC,OAAOgE,KAAKzB,GAAO,IACjCmC,SAAQ,SAAC5C,GACV,GAAI,EAAK/B,eAAe4D,KAAKpB,EAAKT,GAAM,CACpC,IAAML,EAAQc,EAAIT,GAClBwD,EAAQxD,EAAKL,SA5d7B,sCAieoBc,EAAUT,GACtB,IAAK,IAAMF,KAAQW,EACf,GAAIpD,KAAKY,eAAe4D,KAAKpB,EAAKT,IAC1BS,EAAIX,GAAMyB,QAAQvB,GAClB,OAAOF,EAInB,OAAOW,IAzef,qCA2emBrB,EAAaY,EAAaL,GAChCP,EAAOY,GAGRZ,EAAOY,GAAKsD,KAAK3D,GAFjBP,EAAOY,GAAO,CAACL,KA7e3B,2CAmfyBgD,GACjB,IAAMT,EAAiB,GAMvB,OALAlE,EAAM0F,gBAAgBf,GAAM,SAACgB,EAAQC,GAC5B5F,EAAM6F,WAAWD,IAClB1B,EAAKoB,KAAKK,MAGXzB,IA1ff,0CA6fwBS,GAChB,IAAMT,EAAiB,GAMvB,OALAlE,EAAM0F,gBAAgBf,GAAM,SAACgB,EAAQC,GAC7B5F,EAAM6F,WAAWD,IACjB1B,EAAKoB,KAAKK,MAGXzB,IApgBf,uCAugBqBzB,EAAUqD,GACvB9F,EAAM0F,gBAAgBI,GAAY,SAAC9D,EAAUL,GACzC,IACQ3B,EAAM6F,WAAWlE,GACjB3B,EAAM+F,yBAAyBtD,EAAKT,EAAKL,GAEzCc,EAAIT,GAAOL,EAEjB,MAAOqE,GACLC,QAAQC,IAAIF,SAhhB5B,qCAqhBmBvD,EAAUqD,GACrB9F,EAAM0F,gBAAgBI,GAAY,SAAC9D,EAAUL,GACzC,IACSc,EAAIT,KACDhC,EAAM6F,WAAWlE,GACjB3B,EAAM+F,yBAAyBtD,EAAKT,EAAKL,GAEzCc,EAAIT,GAAOL,GAGrB,MAAOqE,GACLC,QAAQC,IAAIF,SAhiB5B,4BAqiBUlE,GACF,OAAO,SAACqE,GACJ,OAAOA,EAAErE,MAviBrB,oCA2iBkBsD,GACV,IAAMgB,EAAW,GAIjB,OAHAhB,EAAKR,SAAQ,SAAC1C,GACVkE,EAASlE,GAAQA,KAEdhC,OAAOgE,KAAKkC,KAhjB3B,8BAmjBYC,EAAcjB,GAClB,IAAMkB,EAAkB,GAQxB,OAPAlB,EAAKR,SAAQ,SAAC1C,GACV,IAAMF,EAAMqE,EAAQnE,GACfoE,EAAWtE,KACZsE,EAAWtE,GAAO,IAEtBsE,EAAWtE,GAAKsD,KAAKpD,MAElBoE,IA5jBf,kCA8jBgBC,EAASC,GACjB,IAAMF,EAAkB,GAUxB,OATApG,OAAOgE,KAAKqC,GAAI3B,SAAQ,SAAC5C,GACrB,IAAMyE,EAAQF,EAAGvE,GACX0E,EAAQF,EAAGxE,GAEbsE,EAAWtE,GADX0E,EACA,sBAAsBA,GAAtB,YAAgCD,IAEhC,YAAsBA,MAGvBH,IAzkBf,yCA4kBuBK,GACf,OAAOC,YAAO,IAAIhG,KAAK+F,GAAU,8BA7kBzC,uCAglBqBA,GACb,OAAOE,YAAe,IAAIjG,KAAK+F,GAAU,IAAI/F,KAAQ,CAAEkG,WAAW,EAAMC,gBAAgB,MAjlBhG,sCAqlBQ,OAAO,IAAInG,MAAOoG,gBArlB1B,4BAylBQ,OAAO,IAAIpG,MAAOC,YAzlB1B,oCA6lBQ,OAAO,IAAID,MAAOqG,gBA7lB1B,mCAomBiBC,GACT,OAAY,OAALA,QAAK,IAALA,OAAA,EAAAA,EAAOC,UAAgD,QAA/B,OAALD,QAAK,IAALA,OAAA,EAAAA,EAAOlF,MAAO,IAAIoB,gBArmBpD,iCAwmBeuD,GAAoC,IAAnBS,EAAkB,uDAAX,EAC/B,OAAOC,YAAUC,YAAQC,YAASZ,GAAUS,MAzmBpD,kCA4mBgBT,GAAqC,IAApBa,EAAmB,uDAAX,EACjC,OAAOH,YAAUI,YAASF,YAASZ,GAAUa,MA7mBrD,gCAimBQ,OAAO,iBAjmBf,MEIaE,EAAb,iGACaC,GAAY,IAAD,OACZA,GACAzH,OAAOgE,KAAKyD,GAAM/C,SAAQ,SAAC5C,GACvB9B,OAAO4E,eAAe,EAAM9C,EAAK,CAC7BL,MAAOgG,EAAK3F,GACZgD,cAAc,EACdD,YAAY,EACZ6C,UAAU,SAR9B,uCAgBqBC,EAAaC,GAI1B,OAHAA,EAAevF,MAAM,KAAKqC,SAAQ,SAACmD,GAC3BF,IAAQA,EAASA,EAAOE,OAEzBF,IApBf,kCAuBgBG,EAAsBC,GAAuC,IAAD,OACpE,MAAO,CACHC,OAAQ,WACJ,IAAM7G,EAAS,EAAK8G,iBAAiB,EAAMH,GAC3C,OAAOC,GAAW5G,EAASA,EAAO+G,KAAK,KAAO/G,GAElDgH,OAAQ,SAAC1G,GACL,IAAMN,EAAS4G,EAAU,CAACtG,GAASA,EACnCzB,OAAO4E,eAAe,EAAMkD,EAAc,CACtCrG,MAAON,EACP2D,cAAc,EACdD,YAAY,EACZ6C,UAAU,QAnC9B,wCAyCsBI,EAAsBM,EAAmBC,GAA+C,IAAD,OACrG,MAAO,CACHL,OAAQ,WACJ,IAAM7G,EAAS,EAAK8G,iBAAiB,EAAMH,GAC3C,OAAO3G,GAAkB,IAE7BgH,OAAQ,SAAC1G,GACL,IAAMN,EAASM,EACfzB,OAAO4E,eAAe,EAAMkD,EAAc,CACtCrG,MAAON,EACP2D,cAAc,EACdD,YAAY,EACZ6C,UAAU,KAGlBtC,KAAM,SAAC3D,GACH,IAAMN,EAAS,EAAK8G,iBAAiB,EAAMH,GAC3C3G,EAAOiE,KAAK3D,GACZzB,OAAO4E,eAAe,EAAMkD,EAAc,CACtCrG,MAAON,EACP2D,cAAc,EACdD,YAAY,EACZ6C,UAAU,KAGlBY,OAAQ,SAAC7G,GACL,IAAMN,EAAS,EAAK8G,iBAAiB,EAAMH,GAC3CS,eAAKpH,EAAQM,GACbzB,OAAO4E,eAAe,EAAMkD,EAAc,CACtCrG,MAAON,EACP2D,cAAc,EACdD,YAAY,EACZ6C,UAAU,KAGlBc,YAAa,WACT,OAAOH,GAAgB,YAE3BI,kBAAmB,WACf,IAAMvD,EAAO,EAAK+C,iBAAiB,EAAMH,GACzC,OAAOM,GAAgBlD,EAAK5E,OAAS,GAAKN,OAAO0I,OAAO,GAAIxD,EAAK,KAAQ,OAjFzF,4CAsF0B4C,EAAsB5C,EAAUyD,EAAeC,EAAgBR,EAAmBC,GAA+C,IAAD,OAClJ,MAAO,CACHL,OAAQ,WACJ,IAAM7G,EAAS,EAAK8G,iBAAiB,EAAMH,GAC3C,OAAO3G,IAAkBwH,EAAO,GAAK,KAEzCR,OAAQ,SAAC1G,GACL,IAAIN,EAASM,GACR3B,EAAM+I,QAAQpH,IAAU3B,EAAM4D,QAAQjC,IAAUkH,IACjDxH,EAASM,EAAM,IAEnBzB,OAAO4E,eAAe,EAAMkD,EAAc,CACtCrG,MAAON,EACP2D,cAAc,EACdD,YAAY,EACZ6C,UAAU,KAGlBtC,KAAM,SAAC3D,GACH,IAAIN,EAAS,EAAK8G,iBAAiB,EAAMH,GACrCa,EACAxH,EAASM,EAETN,EAAOiE,KAAK3D,GAEhBzB,OAAO4E,eAAe,EAAMkD,EAAc,CACtCrG,MAAON,EACP2D,cAAc,EACdD,YAAY,EACZ6C,UAAU,KAGlBoB,MAAO,WAEH9I,OAAO4E,eAAe,EAAMkD,EAAc,CACtCrG,MAFW,GAGXqD,cAAc,EACdD,YAAY,EACZ6C,UAAU,KAGlBY,OAAQ,SAAC7G,GACL,IAAMN,EAAS,EAAK8G,iBAAiB,EAAMH,GAC3CS,eAAKpH,EAAQM,GACbzB,OAAO4E,eAAe,EAAMkD,EAAc,CACtCrG,MAAON,EACP2D,cAAc,EACdD,YAAY,EACZ6C,UAAU,KAGlBqB,cAAe,WACX,IAAM5H,EAAS,IAAIlC,IAKnB,OAJA+J,YAAW,WACP7H,EAAO9B,KAAK6F,GACZ/D,EAAO8H,aACR,IACI9H,GAEX+H,kBAAmB,WACf,OAAOP,GAEXQ,sBAAuB,WACnB,OAAOP,MArJvB,wCA2JQ,IAAK,IAAI9G,KAAO3C,UACMiK,IAAdjK,KAAK2C,WACE3C,KAAK2C,GAGpB,OAAO3C,OAhKf,+BA2KQ,OAAOa,OAAO0I,OAAO,GAAIvJ,QA3KjC,6BAqKQ,OADkBA,KAAKwC,YACXC,MArKpB,aAuKeyH,QAvKf,KCGaC,EAAc,I,kDANvB,WAAY1D,GAAmB,IAAD,8BAC1B,gBAhBJ2D,YAAsB,EAeQ,EAd9BC,WAAqB,GAcS,EAb9BC,YAAsB,OAaQ,EAZ9BC,WAAqB,MAYS,EAX9BC,cAAwB,QAWM,EAV9BC,iBAA2B,MAUG,EAT9BC,QAAkB,QASY,EAR9BC,oBAA8B,EAQA,EAP9BC,aAO8B,IAN9BC,cAM8B,IAJ9BC,aAAoB,CAChBC,yBAAyB,GAKzB,EAAKC,SAASvE,GAFY,E,UAhBH4B,ICiBlB4C,EAAb,kDAOI,WAAYxE,GAA+B,IAAD,uBACtC,gBAPJyE,gBAM0C,IAL1CC,cAK0C,IAJ1CC,mBAI0C,IAH1CC,eAAyB,EAGiB,EAF1CC,gBAA0B,EAItB,EAAKN,SAASvE,GAEd,IAAM8E,EAAQpB,EAAYU,SAAS,EAAKK,YAJF,OAKtCK,GAAS,EAAKP,SAASO,GALe,EAP9C,qDAgB6B,IAAD,EAChBF,EAAyBrL,KAAKqL,cAC9BD,EAAwBpL,KAAKoL,cAEjC,GAAIC,EAEA,OADAG,EAAMC,KAAN,8BAAkCzL,KAAKkL,aACjC,GAAN,OAAUf,EAAYK,eAAtB,OAAsCY,GACnC,GAAKpL,KAAKsL,eAEb,OADAE,EAAME,QAAN,0BAAiC1L,KAAKkL,WAAtC,wBACM,GAAN,OAAUf,EAAYK,eAAtB,OAAsCY,GAG1C,IAAMO,EAAQ,oBAAMxB,EAAYS,eAAlB,aAAM,EAAqBgB,oBAA3B,OAAgDzB,EAAYG,aAA5D,OAA0EH,EAAYI,YAC9FsB,EAAG,UAAMF,GAAN,OAAiB3L,KAAKmL,UAC/B,OAAOW,UAAUD,OA9BzB,GAAoCxD,GChBvB0D,EAAb,qGAEsBC,EAAwBC,EAA+B9F,GACrE,IAAM+F,EAAoBD,EAAgBE,SAE1C,GADAD,EAAIE,QAAUC,EAAeC,WAAWN,EAAME,EAAIE,QAASjG,GACxC,YAAf+F,EAAIK,OAAsB,CAC1B,IAAMC,EAAc,UAAMN,EAAIK,OAAV,YAAoBL,EAAI/L,QAAxB,YAAmC8L,EAAgBQ,QAAQZ,KAC/EL,EAAME,QAAQc,GAElB,OAAOE,YAAiBR,KAThC,oCAYyBD,GACjB,IAAMC,EAAsBD,EAAgBE,SAC5C,GAAmB,YAAfD,EAAIK,OAAsB,CAC1B,IAAMC,EAAc,UAAMN,EAAIK,OAAV,YAAoBL,EAAI/L,QAAxB,YAAmC8L,EAAgBQ,QAAQZ,KAC/EL,EAAME,QAAQc,GAElB,OAAOE,YAAmBR,KAlBlC,4BAsBoBS,GACZ,OAAOD,YAAE,eAAoBL,EAAeO,iBAAiBD,SAvBrE,KCgMaN,EAAiB,IAtK9B,mGAYkBL,EAAwBI,EAAqBxG,GAKvD,OAJawG,EAAQxJ,KAAO,SAACC,GACzB,IAAMyF,EAAO1C,EAAOA,EAAK/C,GAAQA,EACjC,OAAO,IAAImJ,EAAK1D,QAf5B,uCAqBwBuE,GAYhB,MAXqC,CACjCC,UAAU,IAAIvL,MAAOoG,cACrBoF,UAAU,EACVR,OAAQ,QACRpL,QAAS,EACTiL,QAAS,GACTY,YAAa,GACbC,SAAU,GACV9M,QAAS0M,EAAM1M,QACf0M,WA/BZ,4BAoCsCb,EAAwBkB,EAAgC5E,EAAS6E,EAAyBvH,GACxH,IAAMwH,EAAU,IAAItN,IACd+L,EAAMqB,EAAeG,SAErBC,EAAUC,EAAoBC,YAAYL,EAAmB,CAAE,eAAgB,qBAerF,OAbAvG,QAAQC,IAAI,aAAcgF,GAC1B4B,mBAAS5B,EAAKvD,EAAMgF,GACfI,KACGC,aAAU,SAACC,GACP,OAAO7B,EAAe8B,QAAQ7B,EAAM4B,EAAShI,MAEjDkI,aAAW,SAACjB,GAER,OADAjG,QAAQC,IAAI3E,KAAKD,UAAUqG,OAAM2B,EAAW,IACrC8B,EAAec,MAASA,OAGtCkB,UAAUX,GAERA,IAvDf,2BA0DqCpB,EAAwBkB,EAAgC5E,EAAS6E,EAAyBvH,GACvH,IAAMwH,EAAU,IAAItN,IACd+L,EAAMqB,EAAeG,SAC3BzG,QAAQC,IAAI,YAAagF,GAEzB,IAAMyB,EAAUC,EAAoBC,YAAYL,GAahD,OAXAa,kBAAQnC,EAAK3J,KAAKD,UAAUqG,GAAOgF,GAC9BI,KACGC,aAAU,SAACC,GACP,OAAO7B,EAAe8B,QAAQ7B,EAAM4B,EAAShI,MAEjDkI,aAAW,SAACjB,GACR,OAAOd,EAAec,MAASA,OAGtCkB,UAAUX,GAERA,IA5Ef,2BA+EqCpB,EAAwBkB,EAAgCC,EAAyBvH,GAAwC,IAAD,OAC/IwH,EAAU,IAAItN,IACd+L,EAAMqB,EAAeG,SAErBC,EAAUC,EAAoBC,YAAYL,GAkChD,OAhCAvG,QAAQC,IAAI,WAAYgF,GAExBoC,kBAAQpC,EAAKyB,GACRI,KACGC,aAAU,SAACC,GAEyB,kBAArBA,EAAQzB,WACfyB,EAAQzB,SAAWjK,KAAKC,MAAMyL,EAAQzB,WAE1C,IAAM+B,EAAWN,EAAQzB,SAEzB,GAAwB,YAApB+B,EAAS3B,OAAsB,CAC/B,GAAK2B,EAAS/M,QAAU,GAAK+L,EAAe9B,cAAe,CACvD,IAAI+C,EAAU,IAAIlD,EAAJ,2BACPiC,GADO,IAEV5B,gBAAgB,KAEpB,OAAO,EAAK8C,KAAQpC,EAAMmC,EAASvI,GAGnC,OADA4F,EAAME,QAAN,UAAiBwC,EAAS/M,OAA1B,wDACO4K,EAAe8B,QAAQ7B,EAAM4B,EAAShI,GAGrD,OAAOmG,EAAe8B,QAAQ7B,EAAM4B,EAAShI,MAEjDkI,aAAW,SAACjB,GAER,OADArB,EAAMqB,MAAMhB,EAAK,cACVE,EAAec,MAASA,OAGtCkB,UAAUX,GAERA,IArHf,8BAwHmBF,EAAgCC,GAC3C,IAAMtB,EAAMqB,EAAeG,SAE3BzG,QAAQC,IAAI,cAAegF,GAE3B,IAAMyB,EAAUC,EAAoBC,YAAYL,GAEhD,OAAOc,kBAAQpC,EAAKyB,GAASI,KACzBC,aAAU,SAACC,GAMP,MAJgC,kBAArBA,EAAQzB,WACfyB,EAAQzB,SAAWjK,KAAKC,MAAMyL,EAAQzB,WAGnCJ,EAAesC,cAAcT,MAExCE,aAAW,SAACjB,GAER,OADArB,EAAMqB,MAAMhB,EAAK,cACVE,EAAec,MAAWA,SA1IjD,gCAiJqBhB,EAAYsB,GAEzB,IAAMG,EAAUC,EAAoBC,YAAYL,GAEhD,OAAOc,kBAAQpC,EAAKyB,GAASI,KACzBC,aAAU,SAACC,GAKP,MAHgC,kBAArBA,EAAQzB,WACfyB,EAAQzB,SAAWjK,KAAKC,MAAMyL,EAAQzB,WAEnCO,YAAGkB,EAAQzB,aAEtB2B,aAAW,SAACjB,GAER,OADArB,EAAMqB,MAAMhB,EAAK,cACVa,YAAGG,UA/J1B,mCAEuBM,EAAwBmB,GACvC,IAAM5F,EAAK,OAAG6F,QAAH,IAAGA,OAAH,EAAGA,EAAaC,MAAMC,YACjC,GAAI/F,EAAO,CACP,IAAMgG,EAAc,CAAEC,cAAc,UAAD,OAAYjG,IAC/C,OAAO,uCAAKgG,GAAgBvB,GAAsBmB,GAElD,OAAO,2BAAKnB,GAAsBmB,OAR9C,MChCME,E,iDACFC,iB,OACAG,a,OACAC,kB,sDAGI7O,KAAKyO,YAAc,GACnBzO,KAAK4O,QAAU,GACf5O,KAAK6O,aAAe,K,qCAMFC,GAClB9O,KAAKyO,YAAcK,EAAkBL,YAAYM,SACjD/O,KAAK4O,QAAUE,EAAkBF,QAAQG,SACzC/O,KAAK6O,aAAeC,EAAkBD,aAAanG,Q,8BAPxC,IAAD,EACV,OAAO,UAAA1I,KAAKyO,mBAAL,eAAkBtN,QAAS,O,KAU7B6N,EAAb,kDAaI,WAAYvI,GAAmB,IAAD,kCAC1B,gBAbJ3D,QAY8B,IAX9BmM,WAW8B,IAV9BC,eAU8B,IAT9BC,cAS8B,IAR9BC,WAQ8B,IAP9BC,cAO8B,IAN9BC,iBAM8B,IAL9BC,YAK8B,IAJ9BC,qBAI8B,IAH9BC,cAG8B,IAF9BC,cAE8B,IA+B9BC,YA/B8B,EAE1B,EAAK3E,SAASvE,GACd,EAAKyI,UAAL,iBAAiBzI,QAAjB,IAAiBA,OAAjB,EAAiBA,EAAYyI,iBAA7B,QAA0C,GAC1C,EAAKD,MAAL,iBAAaxI,QAAb,IAAaA,OAAb,EAAaA,EAAYwI,aAAzB,QAAkC,GAJR,EAblC,sDAoBgC,IAAD,EAAnBW,EAAmB,uDAAJ,GAAI,cACJA,EAAK1M,MAAM,MADP,IACvB,2BAAoC,CAAC,IAA1BL,EAAyB,QAChC,GAAI7C,KAAKiP,MAAMY,SAAShN,GACpB,OAAO,GAHQ,8BAMvB,OAAO,IA1Bf,kCA8BQ,OAAK7C,KAAKiP,MAAM9N,SA9BxB,sCAoDoBkO,MApDpB,gCAuDYrP,KAAK2P,SACL3P,KAAK2P,OAAOhG,QACZ3J,KAAK2P,YAAS1F,GAElBjK,KAAKwP,iBAAkB,EACvBxP,KAAKiP,MAAQ,CAAC,kBACdjP,KAAKkP,UAAY,UACjBlP,KAAKmP,SAAW,SA9DxB,8BAqCQ,MAAM,GAAN,OAAUnP,KAAKkP,WAAalP,KAAK8P,OAAjC,YAA2C9P,KAAKmP,UAAY,MArCpE,6BAyCQ,OAAOnP,KAAKoP,OAASpP,KAAK8C,KAzClC,4BAiDQ,OAHK9C,KAAK2P,SACN3P,KAAK2P,OAAS,IAAInB,GAEfxO,KAAK2P,WAjDpB,GAA0BtH,GA8LbkG,EAAc,IAAIS,EAAK,CAChClM,GAAI,GACJoM,UAAW,GACXC,SAAU,GACVF,MAAO,CAAC,kBACRG,MAAO,GACPE,YAAa,GACbC,OAAQ,GACRC,iBAAiB,EACjBE,SAAU,KCpNP,IAAMK,EAA2C,SAAC,GAAyC,IAAvC5P,EAAsC,EAAtCA,QAAY6P,EAA0B,2BACvFC,EAAYD,EAAMC,WAAa,EAC/BC,EAAUF,EAAME,SAAW,SACjC,OACI,cAAC,IAAD,yBAAUD,UAAWA,EAAWC,QAASA,GAAaF,GAAtD,aACK7P,MAYPgQ,EAA+C,SAACH,GAClD,OACI,sBAAKI,cAAY,cAAjB,UACKJ,EAAMK,OAAS,6BAAKL,EAAMK,QAC3B,8BAAML,EAAM7P,cAuBXqL,EAAQ,I,iDAjBT8E,QAAU,WAA2F,IAA1FC,EAAyF,uDAAvE,OAAQpQ,EAA+D,uDAA7C,kBAAmBkQ,EAA0B,uCACxGzQ,EAAO4Q,iBAAiB,CAAEvQ,MAAOP,EAAO+Q,gBAAiBrE,QAAS,CAAC,CAAEmE,WAAUpQ,QAAS,cAAC,EAAD,CAASA,QAASA,EAASkQ,MAAOA,S,KAE9HxD,MAAQ,SAAC1M,EAAiBkQ,GACtB,EAAKC,QAAQ,QAASnQ,EAASkQ,I,KAEnC3E,QAAU,SAACvL,EAAiBkQ,GACxB,EAAKC,QAAQ,UAAWnQ,EAASkQ,I,KAErCxC,QAAU,SAAC1N,EAAiBkQ,GACxB,EAAKC,QAAQ,UAAWnQ,EAASkQ,I,KAErC5E,KAAO,SAACtL,EAAiBkQ,GACrB,EAAKC,QAAQ,OAAQnQ,EAASkQ,K,oDC9CzBK,G,cCGKC,aAAW,SAACC,GAAD,OACzBC,YAAa,CACTC,QAAS,CACLC,eAAgB,iBAEpBC,SAAU,CACNC,gBAAiB,UACjBC,MAAO,aDV2C,WAC1D,OAAO,6GECEC,EAAb,iDACInB,MAAW,GADf,KAEIoB,UAAwCV,EAF5C,oDAIYV,GAIJ,OAHIA,IACAhQ,KAAKgQ,MAAQA,GAEVqB,wBAAcrR,KAAKoR,UAAWpR,KAAKgQ,WARlD,K,kFC0BMsB,I,OAA2B,CAC7BC,yBAAyB,EACzBC,mBAAmB,EACnBC,mBAAmB,EACnBC,WAAW,EACXC,QAAQ,EACRC,UAAU,EACVC,UAAU,EACVC,YAAY,IAGHC,GAAyC,SAAC/B,GACnD,IAAMgC,EAAehC,EAAMgC,aAAehC,EAAMgC,aAAe,WAC3DC,EAAe,GACbC,EAASC,mBAAyB,MAAM,GAmDxCC,EAASpC,EAAMoC,OAASpC,EAAMoC,OAAS,SAE7C,OACI,eAAC,WAAD,WAEKC,QAAQrC,EAAMK,QACX,eAAC,WAAD,WACI,cAACiC,EAAA,EAAD,CAAYpC,QAAQ,KAApB,SAA0BF,EAAMK,QAChC,0BAGR,qBAAKkC,MAAO,CAAEH,OAAQA,EAAQlB,MAAO,OAAQsB,SAAUxC,EAAMwC,UAAY,KAAOC,UAAU,kBAA1F,SAEI,cAAC,eAAD,aACIT,aAAcA,EACdU,cAAe7R,OAAO0I,OAAO,GAAI+H,GAAkBtB,EAAMsB,kBACzDqB,mBAjEe,SAACC,GAE5B,GADAX,EAAeW,EAAOC,IAAIC,kBACtB9C,EAAM+C,sBAAuB,CAC7B,IAAIC,GAAqB,EACnBC,EAAiBL,EAAOC,IAAIK,WAAWC,cAAcvQ,KAAI,SAACwQ,GAC5D,OAAIA,EAAQC,eAAiBD,EAAQ9K,KAAKgL,SAE/BF,EAAQ9K,MAEf0K,GAAqB,EACdnS,OAAO0I,OAAO,GAAI6J,EAAQ9K,KAAM,CAAEgL,SAAUF,EAAQC,oBAIxC,IAAvBL,GACAhD,EAAM+C,sBAAsBE,EAAgBhB,EAAcW,KAmDtDW,oBA9CgB,SAACX,GAC7BA,EAAOC,IAAIW,mBACXZ,EAAOC,IAAIY,kBACXvB,EAAOU,EAAOC,KACd7C,EAAM0D,YAAc1D,EAAM0D,WAAWd,EAAOC,MA2ChCc,kBAxCc,SAACf,GAC3BA,EAAOC,IAAIW,mBACXxD,EAAM4D,uBAAyB5D,EAAM4D,sBAAsBhB,IAuC/CiB,mBApCe,SAACjB,GAC5BA,EAAOC,IAAIY,kBACXb,EAAOC,IAAIW,mBACXxD,EAAM8D,wBAA0B9D,EAAM8D,uBAAuBlB,IAkCjDmB,YA/BQ,SAACnB,GACrBV,EAAOU,EAAOC,KACd7C,EAAM0D,YAAc1D,EAAM0D,WAAWd,EAAOC,KAC5C7C,EAAMgE,cAAgBhE,EAAMgE,aAAapB,EAAOqB,WAChDC,OAAOrK,YAAW,WACd+I,EAAOC,IAAIsB,aAAY,SAACf,EAAkBgB,GACtChB,EAAQiB,YAAYjB,EAAQ9K,KAAKgL,eAEtC,MAwBSgB,iBAAiB,EACjBC,8BAA8B,EAC9BC,2BAA2B,GACvBxE,UAQxB+B,GAAO0C,aAAe,CAAEC,iBAAiB,GClHzC,IAAMC,GAAShE,aAAW,SAACC,GACvB,MAAO,CACHgE,OAAQ,CACJC,SAAU,YAEdvE,QAAS,CACLwE,OAAQ,kBACR7D,gBAAiB,0BACjB8D,SAAU,OACVC,WAAY,IACZ5C,OAAQ,MACR6C,YAAarE,EAAMsE,QAAQ,GAC3BC,aAAcvE,EAAMsE,QAAQ,GAC5BE,OAAQxE,EAAMsE,QAAQ,GACtBG,UAAW,OACXC,MAAO1E,EAAM2E,QAAQC,OAAOC,MAC5BZ,SAAU,WACVa,IAAK,OAKJC,GAAb,4MACIvE,UAAkC,SAACpB,GAC/B,IAAM4F,EAAUjB,KAChB,IAAKtC,QAAQrC,EAAM1H,KAAKuN,KACpB,OAAO,kDAEX,IAAMC,EAAI,gBAEV,OACI,eAAC,WAAD,WACI,eAAC,KAAD,CAAQC,UAAU,EAAMC,kBAAkB,EAAOvD,UAAWmD,EAAQhB,OAApE,UACI,cAAC,KAAD,CAAOqB,gBAAgB,IACvB,cAACH,EAAKI,gBAAN,IACA,cAACJ,EAAKK,aAAN,IACA,cAACL,EAAKM,UAAN,IACA,cAACN,EAAKO,aAAN,OAEJ,eAACC,EAAA,EAAD,CAAKC,GAAI,EAAT,UACI,6BAAKvG,EAAM1H,KAAKuN,MAChB,cAAC,GAAD,eAAY7F,EAAMwG,gBAAgBC,iBAnBtD,EAwBIP,gBAAqC,WACjC,IAAMJ,EAAI,gBACJY,EAAkB,IAAIC,iBAAc,IAAO,GAAI,IAAO,IAC5D,OACI,cAAC,WAAD,UACK,EAAK3G,MAAM1H,KAAKsO,WAAWhU,KAAI,SAACiU,GAC7B,OACI,eAAC,KAAD,CAA0C/T,GAAE,oBAAe+T,EAAU/T,IAAML,KAAI,qBAAgBoU,EAAU/T,IAAM+R,SAAUgC,EAAUC,cAAnI,UACI,cAAChB,EAAKiB,YAAN,eAAsBF,IACtB,cAAC,KAAD,CAAeG,KAAI,UAAKH,EAAU/T,IAAMmU,UAAW,IAAIC,cAAW,IAAK,EAAG,GAAIR,gBAAiBA,IAC/F,cAAC,KAAD,CAAmBS,MAAM,4BAA4BT,gBAAiBA,MAH1E,oBAA0BG,EAAU/T,WA/B5D,EAyCIqT,aAAkC,WAC9B,IAAML,EAAI,gBACV,OACI,cAAC,WAAD,UACK,EAAK9F,MAAM1H,KAAK8O,QAAQxU,KAAI,SAACyU,EAAQjD,GAClC,OACI,eAAC,KAAD,CAAuC3R,KAAI,kBAAa4U,EAAOvU,IAAM+R,SAAUwC,EAAOP,cAAtF,UACI,cAAChB,EAAKiB,YAAN,eAAsBM,IACtB,cAAC,KAAD,CAAeC,UAAW,EAAGhC,MAAOiC,SAAMC,SAF9C,wBAA8BpD,UA/CtD,EAwDIgC,UAA+B,WAC3B,OACI,cAAC,WAAD,UACK,EAAKpG,MAAM1H,KAAKmP,KAAK7U,KAAI,SAAC8U,EAAKtD,GAC5B,IAAIuD,EAAyBD,EAAIb,UAAUC,cACvCc,EAAsBF,EAAIL,OAAOP,cAC/BxB,EAAQoC,EAAIA,IAAM,CAAEpC,MAAOiC,SAAMM,QAAW,CAAEvC,MAAOiC,SAAMO,UAC3DC,EAAWC,YAASC,SAAS,QAAS3C,GAE5C,OACI,cAAC,KAAD,UACI,cAAC,KAAD,CAAU4C,UAAW,CAACP,EAAwBC,GAAsBG,SAAUA,KADlF,uBAAyC3D,UAlEjE,EA2EI2C,YAAoE,SAAC/G,GAAyB,IAAD,EACzF,OACI,eAAC,KAAD,qBACKA,EAAMmI,eADX,aACK,EAAevV,KAAI,SAACb,GACjB,OAAO,qCAA4BA,QAA5B,IAA4BA,OAA5B,EAA4BA,EAAQe,IAApC,iBAAaf,QAAb,IAAaA,OAAb,EAAaA,EAAQe,QAEhC,6BAAKkN,EAAMoI,MACX,6BAAKpI,EAAMqI,MACVhG,QAAQrC,EAAMsI,MAAQ,6BAAKtI,EAAMsI,UAnFlD,EAuFIjC,aAAkC,WAC9B,IAAMT,EAAUjB,KAEhB,OACI,qBAAKlC,UAAWmD,EAAQtF,QAAxB,SACK,EAAKN,MAAM1H,KAAKsO,WACZjF,QAAO,SAACkF,GACL,OAAOxE,QAAQwE,EAAUsB,QAAQhX,WAEpCyB,KAAI,SAACiU,GACF,OACI,eAACP,EAAA,EAAD,CAA+CiC,GAAI,EAAnD,UACI,6CAAgB1B,EAAU/T,GAA1B,uBACC+T,EAAUsB,QAAQvV,KAAI,SAACb,GACpB,OAAO,8BAA4DA,EAAOe,IAAnE,2BAA8B+T,EAAU/T,GAAxC,YAA8Cf,EAAOe,UAHpE,4BAA+B+T,EAAU/T,WAlGrE,YAAyEqO,GC5B5DqH,GAAiB,SAA0BC,GACpD,OAAOC,mBAAQ,WACX,OAAO,IAAID,IACZ,CAACA,KCQKE,GAAb,kDA4BI,WAAYlS,GAAyC,IAAD,8BAChD,gBA5BJ3D,QA2BoD,IA1BpDsV,SA0BoD,IAzBpDC,SAyBoD,IAxBpDC,SAwBoD,IAvBpDH,QAAsC,GAuBc,EAtBpDS,gBAAgC,GAwB5B,EAAK5N,SAASvE,GAFkC,EA5BxD,sDAQc1E,GACN/B,KAAKmY,QAAQlS,KAAKlE,KAT1B,8BAaQ/B,KAAKmY,QAAU,KAbvB,uCAqBQ,IAAMU,EAAK3B,cAAW4B,YAAY9Y,KAAKqY,IAAKrY,KAAKoY,IAAKpY,KAAKsY,KACrDS,EAAK7B,cAAW4B,YAAY9Y,KAAKqY,IAAKrY,KAAKoY,IAAK,GAChDY,EAAO9B,cAAW+B,SAASJ,EAAIE,GAErCG,MAAM,GAAD,OAAIlZ,KAAKsY,IAAT,kBAAsBU,MAzBnC,oCAiBQ,OAAO9B,cAAW4B,YAAY9Y,KAAKqY,IAAKrY,KAAKoY,IAAKpY,KAAKsY,SAjB/D,GAA8CjQ,GAoCjC8Q,GAAb,kDAOI,WAAY1S,GAAmB,IAAD,8BAC1B,gBAPJ2S,SAAmB,EAQf,EAAKpO,SAASvE,GAFY,EAPlC,0DAIQ,OAAOyQ,cAAW4B,YAAY9Y,KAAKqY,IAAKrY,KAAKoY,IAAKpY,KAAKsY,IAAMtY,KAAKoZ,cAJ1E,GAA+BT,IAYlBU,GAAb,kDACI,WAAY5S,GAAmB,IAAD,8BAC1B,gBACKuE,SAASvE,GAFY,EADlC,UAA4BkS,IAOtBW,G,kDA2BF,WAAY7S,GAAkC,IAAD,8BACzC,gBA3BJ8S,YA0B6C,IAzB7CC,YAyB6C,IAxB7CC,aAwB6C,IAvB7CxJ,eAuB6C,IAtB7CyJ,WAsB6C,IArB7ChC,SAqB6C,IApB7Cb,eAoB6C,IAnB7CQ,YAmB6C,EAEzC,EAAKrM,SAASvE,GAF2B,E,oDAZzCzG,KAAK6W,UAAY,KACjB7W,KAAKqX,OAAS,O,oCAId,IAAMwB,EAAK7Y,KAAK6W,UAAUC,cACpBiC,EAAK/Y,KAAKqX,OAAOP,cACjBkC,EAAO9B,cAAW+B,SAASJ,EAAIE,GAErCG,MAAM,GAAD,OAAIlZ,KAAK0Z,MAAT,kBAAwBV,M,4CAb7B,MAAO,CAAChZ,KAAK6W,UAAUC,cAAe9W,KAAKqX,OAAOP,mB,GAX1BzO,GAwCnBsR,GAAb,kDAuBI,WAAYlT,GAAsC,IAAD,8BAC7C,gBAvBJoP,SAsBiD,IArBjDe,gBAqBiD,IApBjDQ,aAoBiD,IAnBjDwC,WAmBiD,IAjBjDnC,UAiBiD,IAhBjDoC,eAA4C,GAgBK,EAfjDC,aAAuC,GAiBnC,EAAK9O,SAASvE,GAEd,EAAKmQ,YACS,OAAVnQ,QAAU,IAAVA,OAAA,EAAAA,EAAYmQ,WAAWhU,KAAI,SAACmX,GACxB,OAAO,IAAIZ,GAAUY,QACnB,GAEV,EAAKnD,WAAWrR,SAAQ,SAAC1C,GACrB,EAAKgX,eAAehX,EAAKC,IAAMD,KAGnC,EAAKuU,SACS,OAAV3Q,QAAU,IAAVA,OAAA,EAAAA,EAAY2Q,QAAQxU,KAAI,SAACoX,GACrB,OAAO,IAAIX,GAAOW,QAChB,GAEV,EAAK5C,QAAQ7R,SAAQ,SAAC1C,GAClB,EAAKiX,aAAajX,EAAKC,IAAMD,KAGjC,EAAK4U,KACD5W,OAAOoZ,QAAiB,OAAVxT,QAAU,IAAVA,OAAA,EAAAA,EAAYmT,QAAS,IAC9BjI,QAAO,SAACuI,GACL,OAAOA,EAASxC,OAEnB9U,KAAI,SAACsX,GACF,OAAO,IAAIZ,GAAkBY,OAC3B,GAEd,EAAKzC,KAAKlS,SAAQ,SAAC1C,GACfA,EAAKgU,UAAY,EAAKgD,eAAehX,EAAK0W,QAC1C1W,EAAKwU,OAAS,EAAKyC,aAAajX,EAAK2W,QACrC3W,EAAKgU,UAAUsD,UAAUtX,EAAKwU,QAC9BxU,EAAKwU,OAAO8C,UAAUtX,EAAKgU,cAnCc,EAvBrD,oDAeQ7W,KAAK4W,WAAWrR,SAAQ,SAAC1C,GAAD,OAAUA,EAAKuX,WACvCpa,KAAKoX,QAAQ7R,SAAQ,SAAC1C,GAAD,OAAUA,EAAKuX,WACpCpa,KAAKyX,KAAKlS,SAAQ,SAAC1C,GAAD,OAAUA,EAAKuX,WAEjCpa,KAAK6Z,eAAiB,GACtB7Z,KAAK8Z,aAAe,KApB5B,gCAWQ,OAAOO,cAAWC,YAAYta,KAAK6V,SAX3C,GAA2CxN,GAsH9BkS,GAAkB,I,6GAhDvB,OAAO,SAAC3H,GACJ,OAAOA,EAAOtQ,MACTM,KAAI,SAACyU,GACF,OAAOA,EAAOvU,MAEjBiG,KAAK,U,6CAGKyR,GACnB,MAAO,CACHC,QAASD,EAAS5D,WAClB8D,WAAY,CACR,CAAEC,MAAO,KAAMC,WAAY,gBAC3B,CACID,MAAO,UACPC,WAAY,kBACZC,eAAgB7a,KAAK8a,sBAEzB,CAAEH,MAAO,MAAOC,WAAY,YAC5B,CAAED,MAAO,MAAOC,WAAY,aAC5B,CAAED,MAAO,MAAOC,WAAY,gB,kDAKZG,EAAoC3G,GAC5D,OAAI/B,QAAQ0I,EAAU3G,IACX,CACHqG,QAASM,EAAU3G,GAAOwC,WAC1B8D,WAAY,CACR,CAAEC,MAAO,KAAMC,WAAY,gBAC3B,CACI9I,YAAY,EACZ6I,MAAO,UACPC,WAAY,kBACZC,eAAgB7a,KAAK8a,sBAEzB,CAAEH,MAAO,MAAOC,WAAY,YAC5B,CAAED,MAAO,MAAOC,WAAY,aAC5B,CAAED,MAAO,MAAOC,WAAY,cAI7B,CAAEH,QAAS,GAAIC,WAAY,Q,MC5NjCM,GAAkC,SAAChL,GAAyB,IAAD,EAC5CmC,mBAAgC,IAAIwH,IADQ,oBAC7DrR,EAD6D,KACvD2S,EADuD,KAE9DC,EAAe/I,mBAAiB,GAAG,GACnCgJ,EAAcC,iBAAe,QAC7B5E,EAAkB4E,iBAAyB,CAAEX,QAAS,GAAIC,WAAY,KAEtE7E,EAAMvN,EAAKuN,IACjBwF,qBAAU,WACN,IAAIC,EACEC,EAAU,IAAIC,GACpB,GAAI3F,IAAQsF,EAAY1E,QAAS,CAC7B,IAAMtL,EAAWoQ,EAAQE,4BAEzBH,EAAInQ,EAAS4C,WAAU,SAAC2N,GACpBP,EAAY1E,QAAUiF,EAAU7F,IAChCW,EAAgBC,QAAU8D,GAAgBoB,uBAAuBD,GACjET,EAAQS,MAGhB,OAAO,WAEHJ,GAAKA,EAAEM,iBAEZ,CAAC/F,EAAKsF,EAAaF,EAASzE,IAE/B6E,qBAAU,WACN,IAAIC,EAMJ,OALAA,EAAI1b,EAAOic,UAAU9N,WAAU,SAAC9N,GACxBA,IAAUP,EAAOoc,oBACjBZ,EAAava,EAAMob,UAGpB,WACHT,GAAKA,EAAEM,kBAIf,IAAMI,EAASxD,GAAe7C,IAE9B,OADAqG,EAAOhM,MAAQ,CAAE1H,OAAMkO,mBAChBwF,EAAO1L,WC1CL2L,GAAb,4MACI7K,UAAkC,WAC9B,OACI,gCACI,8CACA,cAAC,GAAD,QALhB,YAAiED,GCDpD+K,GAA8B,SAAClM,GAExC,OADewI,GAAeyD,IAChB3L,WCKL6L,GAAb,4MACI/K,UAAkC,SAACpB,GAAyB,IAAD,EACvD,GAAIqC,QAA+B,KAAvB,UAAArC,EAAM1H,YAAN,eAAYnH,SACpB,OAAO,kDAEX,IAAM2U,EAAI,gBACV,OACI,cAAC,WAAD,UACI,eAAC,KAAD,CAAQC,UAAU,EAAMC,kBAAkB,EAA1C,UACI,cAAC,KAAD,CAAOC,gBAAgB,IACvB,cAACH,EAAKsG,kBAAN,UAVpB,EAgBIA,kBAAuC,WACnC,OACI,cAAC,WAAD,UACK,EAAKpM,MAAM1H,KAAK1F,KAAI,SAACyU,EAAQjD,GAC1B,OACI,cAAC,KAAD,CAAuC3R,KAAI,kBAAa4U,EAAOvU,IAAM+R,SAAUwC,EAAOP,cAAtF,SACI,cAAC,KAAD,CAAeQ,UAAW,GAAIhC,MAAOiC,SAAMM,UAD/C,wBAA8BzD,UArBtD,YAAmFjD,GCJtEkL,GAAkC,WAAqB,IAAD,EACvClK,mBAAmB,IADoB,oBACxD7J,EADwD,KAClD2S,EADkD,KAG/DI,qBAAU,WACN,IAAIC,EACEC,EAAU,IAAIC,GACpB,GAAqB,KAAb,OAAJlT,QAAI,IAAJA,OAAA,EAAAA,EAAMnH,QAAc,CACpB,IAAMgK,EAAWoQ,EAAQe,iBACzBhB,EAAInQ,EAAS4C,WAAU,SAAC2N,GACpBT,EAAQS,MAGhB,OAAO,WAEHJ,GAAKA,EAAEM,iBAEZ,CAACtT,EAAM2S,IAEV,IAAMe,EAASxD,GAAe2D,IAE9B,OADAH,EAAOhM,MAAQ,CAAE1H,QACV0T,EAAO1L,WCnBLiM,GAAb,4MACInL,UAAkC,WAC9B,OACI,gCACI,6DACA,cAAC,GAAD,QALhB,YAAyED,GCJ5DqL,GAAkC,SAACxM,GAE5C,OADewI,GAAe+D,IAChBjM,WCHLmM,GAAgBC,aAAuF,CAChHja,KAAM,WACNka,OAFgH,SAEzGC,EAAS5M,GAAQ,IAAD,EACnB,GAAI,UAAC4M,EAAQhI,cAAT,aAAC,EAAgBmB,SAArB,CACA,IAAM8G,EAAUD,EAAQhI,OAAOmB,SAE/B,OADA8G,EAAQC,OAAO9M,EAAM+M,UAAW/M,EAAMgN,UAC/BH,IAEXI,QARgH,SAQxGL,IACHA,EAAQM,aAAeN,EAAQK,aCMlCtI,GAAShE,aAAW,SAACC,GACvB,MAAO,CACHgE,OAAQ,CACJC,SAAU,YAEdvE,QAAS,CACLwE,OAAQ,kBACR7D,gBAAiB,0BACjB8D,SAAU,OACVC,WAAY,IACZ5C,OAAQ,MACR6C,YAAarE,EAAMsE,QAAQ,GAC3BC,aAAcvE,EAAMsE,QAAQ,GAC5BE,OAAQxE,EAAMsE,QAAQ,GACtBG,UAAW,OACXC,MAAO1E,EAAM2E,QAAQC,OAAOC,MAC5BZ,SAAU,WACVa,IAAK,OAKJyH,GAAb,4MACIC,qBADJ,IAEIC,gBAFJ,IAGIC,WAHJ,IAIIC,YAJJ,IAKIC,WAAa,SAACC,GACV,IAAMC,EAAMrD,cAAWsD,kBAAkBF,EAAMG,YAAa,EAAKN,OAC3DO,EAAMxD,cAAWsD,kBAAkB,EAAKJ,OAAQ,EAAKD,OACvDQ,EAAalc,KAAKE,MAAM,EAAKub,WAAWlc,QAAUuc,EAAMG,IAExDH,EAAMG,IACNC,EAAa,GAEbA,IAAe,EAAK9N,MAAMoE,OAC1B,EAAKpE,MAAM+N,SAASD,IAdhC,EAkBI1M,UAAkC,SAACpB,GAAyB,IAAD,EACvD,GAAIqC,QAA+B,KAAvB,UAAArC,EAAM1H,YAAN,eAAYnH,SACpB,OAAO,kDAEX,IAAMyU,EAAUjB,KACVmB,EAAI,qBACS7L,IAAf,EAAKqT,QACL,EAAKD,WAAarN,EAAM1H,KACxB,EAAKgV,MAAQ,EAAKD,WAAW,GAAGN,UAChC,EAAKQ,OAAS,EAAKF,WAAW,EAAKA,WAAWlc,OAAS,GAAG4b,WAG9D,EAAKK,gBAAkB,EAAKC,WAAWrN,EAAMoE,OAC7C,IAAMqC,EAAU,EAAK2G,gBAAgBL,UAErC,OACI,eAAC,WAAD,WACI,eAAC,KAAD,CAAQhH,UAAU,EAAMC,kBAAkB,EAAOvD,UAAWmD,EAAQhB,OAApE,UACI,cAAC,KAAD,CAAOqB,gBAAgB,IACvB,cAAC,KAAD,CACI8G,UAAW,EAAKO,MAChBM,YAAanH,EACbuG,SAAU,EAAKO,OACfS,WAAYC,cAAWC,UACvBC,UAAWC,aAAUC,wBACrBC,WAAY,IACZC,eAAe,EACfC,OAAQ,EAAKhB,aAEjB,cAACf,GAAD,CAAUM,UAAW,EAAKO,MAAON,SAAU,EAAKO,SAChD,cAACzH,EAAKI,gBAAN,IACA,cAACJ,EAAKK,aAAN,IACA,cAACL,EAAKM,UAAN,IACA,cAACN,EAAKO,aAAN,OAGJ,eAACC,EAAA,EAAD,CAAKC,GAAI,EAAT,UACI,6BAAK,EAAK8G,WAAWrN,EAAMoE,OAAOyB,MAClC,cAAC,GAAD,eAAY7F,EAAMwG,gBAAgBC,iBAxDtD,EA8DIP,gBAAqC,SAAClG,GAAyB,IAAD,EACpD8F,EAAI,gBACJY,EAAkB,IAAIC,iBAAc,IAAO,GAAI,IAAO,IAC5D,OACI,cAAC,WAAD,oBACK,EAAKyG,uBADV,aACK,EAAsBxG,WAAWhU,KAAI,SAACiU,EAAWzC,GAC9C,OACI,eAAC,KAAD,CAA0CtR,GAAE,oBAAe+T,EAAU/T,IAAML,KAAI,qBAAgBoU,EAAU/T,IAAM+R,SAAUgC,EAAUC,cAAnI,UACI,cAAChB,EAAKiB,YAAN,eAAsBF,IACtB,cAAC,KAAD,CAAeG,KAAI,UAAKH,EAAU/T,IAAMmU,UAAW,IAAIC,cAAW,IAAK,EAAG,GAAIR,gBAAiBA,IAC/F,cAAC,KAAD,CAAmBS,MAAM,4BAA4BT,gBAAiBA,MAH1E,oBAA0BG,EAAU/T,WArE5D,EAgFIqT,aAAkC,SAACnG,GAAyB,IAAD,EACjD8F,EAAI,gBACV,OACI,cAAC,WAAD,oBACK,EAAKsH,uBADV,aACK,EAAsBhG,QAAQxU,KAAI,SAACyU,EAAQjD,GACxC,OACI,eAAC,KAAD,CAAuC3R,KAAI,kBAAa4U,EAAOvU,IAAM+R,SAAUwC,EAAOP,cAAtF,UACI,cAAChB,EAAKiB,YAAN,eAAsBM,IACtB,cAAC,KAAD,CAAeC,UAAW,EAAGhC,MAAOiC,SAAMC,SAF9C,wBAA8BpD,UAtFtD,EAgGIgC,UAA+B,SAACpG,GAAyB,IAAD,EACpD,OACI,cAAC,WAAD,oBACK,EAAKoN,uBADV,aACK,EAAsB3F,KAAK7U,KAAI,SAAC8U,EAAKtD,GAClC,IAAIuD,EAAyBD,EAAIb,UAAUC,cACvCc,EAAsBF,EAAIL,OAAOP,cAC/BxB,EAAQoC,EAAIA,IAAM,CAAEpC,MAAOiC,SAAMM,QAAW,CAAEvC,MAAOiC,SAAMO,UAC3DC,EAAWC,YAASC,SAAS,QAAS3C,GAE5C,OACI,cAAC,KAAD,UACI,cAAC,KAAD,CAAU4C,UAAW,CAACP,EAAwBC,GAAsBG,SAAUA,KADlF,uBAAyC3D,UA1GjE,EAmHI2C,YAAoE,SAAC/G,GAAyB,IAAD,EACzF,OACI,eAAC,KAAD,qBACKA,EAAMmI,eADX,aACK,EAAevV,KAAI,SAACb,GACjB,OAAO,qCAA4BA,QAA5B,IAA4BA,OAA5B,EAA4BA,EAAQe,IAApC,iBAAaf,QAAb,IAAaA,OAAb,EAAaA,EAAQe,QAEhC,6BAAKkN,EAAMoI,MACX,6BAAKpI,EAAMqI,MACVhG,QAAQrC,EAAMsI,MAAQ,6BAAKtI,EAAMsI,UA3HlD,EAgIIjC,aAAkC,SAACrG,GAAyB,IAAD,EACjD4F,EAAUjB,KAEV8J,EAAY,UAAG,EAAKrB,uBAAR,aAAG,EAAsBxG,WACtCjF,QAAO,SAACkF,GACL,OAAOxE,QAAQwE,EAAUsB,QAAQhX,WAEpCyB,KAAI,SAACiU,GACF,OACI,eAACP,EAAA,EAAD,CAA+CiC,GAAI,EAAnD,UACI,6CAAgB1B,EAAU/T,GAA1B,uBACC+T,EAAUsB,QAAQvV,KAAI,SAACb,GACpB,OAAO,8BAA4DA,EAAOe,IAAnE,2BAA8B+T,EAAU/T,GAAxC,YAA8Cf,EAAOe,UAHpE,4BAA+B+T,EAAU/T,QASrD,OAAOuP,QAAQoM,EAAatd,QAAU,qBAAKsR,UAAWmD,EAAQtF,QAAxB,SAAkCmO,IAAsB,cAAC,WAAD,KAlJtG,YAA+FtN,GCjClFuN,GAA6C,SAAC1O,GAAyB,IAAD,EACrDmC,mBAAiB,GADoC,oBACxEiC,EADwE,KACjE2J,EADiE,OAEvD5L,mBAAkC,IAFqB,oBAExE7J,EAFwE,KAElE2S,EAFkE,KAGzEzE,EAAkB4E,iBAAyB,CAAEX,QAAS,GAAIC,WAAY,KAE5EW,qBAAU,WACN,IAAIC,EACEC,EAAU,IAAIC,GACpB,GAAqB,KAAb,OAAJlT,QAAI,IAAJA,OAAA,EAAAA,EAAMnH,QAAc,CACpB,IAAMgK,EAAWoQ,EAAQoD,iCACzBrD,EAAInQ,EAAS4C,WAAU,SAAC2N,GACpBT,EAAQS,MAGhB,OAAO,WACHJ,GAAKA,EAAEM,iBAEZ,CAACtT,EAAM2S,EAAS7G,IAEnBoC,EAAgBC,QAAU8D,GAAgBqE,4BAA4BtW,EAAM8L,GAE5E,IAAM4H,EAASxD,GAAe2E,IAE9B,OADAnB,EAAOhM,MAAQ,CAAE1H,OAAM8L,QAAO2J,WAAUvH,mBACjCwF,EAAO1L,WCxBLuO,GAAb,4MACIzN,UAAkC,SAACpB,GAC/B,OACI,gCACI,kEACA,cAAC,GAAD,QALhB,YAAyEmB,GCF5D2N,GAAkC,SAAC9O,GAE5C,OADewI,GAAeqG,IAChBvO,WCOLyO,GAAb,4MACI3N,UAAkC,SAACpB,GAAyB,IAAD,IACvD,GAAIqC,QAA+B,KAAvB,UAAArC,EAAM1H,YAAN,eAAYnH,SACpB,OAAO,kDAEX,IAAM2U,EAAI,gBACV,OACI,eAAC,WAAD,WACI,eAAC,KAAD,CAAQC,UAAU,EAAMC,kBAAkB,EAA1C,UACI,cAAC,KAAD,CAAOC,gBAAgB,IACvB,cAACH,EAAKkJ,qBAAN,OAEJ,wDAAiBhP,EAAM1H,YAAvB,aAAiB,EAAYnH,cAZ7C,EAiBI6d,qBAA0C,WACtC,OACI,cAAC,WAAD,UACK,EAAKhP,MAAM1H,KAAK1F,KAAI,SAACyW,EAAQjF,GAC1B,OACI,cAAC,KAAD,CAAuC3R,KAAI,kBAAa4W,EAAOvW,IAAM+R,SAAUwE,EAAOvC,cAAtF,SACI,cAAC,KAAD,CAAeQ,UAAW,GAAIhC,MAAOiC,SAAM0H,cAD/C,wBAA8B7K,UAtBtD,YAAyFjD,GCJ5E+N,GAAqC,WAAqB,IAAD,EAC1C/M,mBAAmB,IADuB,oBAC3D7J,EAD2D,KACrD2S,EADqD,KAGlEI,qBAAU,WACN,IAAIC,EACEC,EAAU,IAAIC,GACpB,GAAqB,KAAb,OAAJlT,QAAI,IAAJA,OAAA,EAAAA,EAAMnH,QAAc,CACpB,IAAMgK,EAAWoQ,EAAQ4D,oBACzB7D,EAAInQ,EAAS4C,WAAU,SAAC2N,GACpBT,EAAQS,MAGhB,OAAO,WAEHJ,GAAKA,EAAEM,iBAEZ,CAACtT,EAAM2S,IAEV,IAAMe,EAASxD,GAAeuG,IAE9B,OADA/C,EAAOhM,MAAQ,CAAE1H,QACV0T,EAAO1L,WCrBL8O,GAAb,4MACIhO,UAAkC,WAC9B,OACI,gCACI,6CACA,cAAC,GAAD,QALhB,YAAyED,GCJ5DkO,GAAkC,SAACrP,GAE5C,OADewI,GAAe4G,IAChB9O,WCDLkL,GAAb,iDACI8D,KAAOjT,EADX,wEAIQ,IAAMkT,EAAe,IAAIzf,IAEnBoN,EAAiB,IAAIjC,EAAe,CACtCC,WAAY,4BACZG,eAAe,EACfD,cAAe,0BACfD,SAAS,WAkBb,OAfoBnL,KAAKsf,KAAKlR,KAA4BuL,GAAuBzM,GAErEa,WAAU,SAAC/L,GACnB,GAAIA,EAAO+K,SACPnG,QAAQ4Y,KAAKxd,EAAO7B,QAAS+M,EAAehC,YAC5CM,EAAME,QAAQ1J,EAAO7B,QAAS+M,EAAe/B,eAC1C,GAAInJ,EAAOb,QAAU,EACxByF,QAAQiG,MAAM,yCAA0CK,EAAehC,YACvEM,EAAMqB,MAAM,yCAA0CK,EAAehC,gBAClE,CACH,IAAMuU,EAAYzd,EAAOoK,QAAQ,GACjCmT,EAAarf,KAAKuf,OAInBF,IA5Bf,yCAgCQ,IAAMA,EAAe,IAAIzf,IAEnBoN,EAAiB,IAAIjC,EAAe,CACtCC,WAAY,mBACZG,eAAe,EACfD,cAAe,qBACfD,SAAS,WAkBb,OAfoBnL,KAAKsf,KAAKlR,KAA4BuL,GAAuBzM,GAErEa,WAAU,SAAC/L,GACnB,GAAIA,EAAO+K,SACPnG,QAAQ4Y,KAAKxd,EAAO7B,QAAS+M,EAAehC,YAC5CM,EAAME,QAAQ1J,EAAO7B,QAAS+M,EAAe/B,eAC1C,GAAInJ,EAAOb,QAAU,EACxByF,QAAQiG,MAAM,yCAA0CK,EAAehC,YACvEM,EAAMqB,MAAM,yCAA0CK,EAAehC,gBAClE,CACH,IAAMuU,EAAYzd,EAAOoK,QAAQ,GACjCmT,EAAarf,KAAKuf,OAInBF,IAxDf,uCA4DQ,IAAMA,EAAe,IAAIzf,IAEnBoN,EAAiB,IAAIjC,EAAe,CACtCC,WAAY,iBACZG,eAAe,EACfD,cAAe,yBACfD,SAAS,WAsBb,OAfoBnL,KAAKsf,KAAKlR,KAAaiL,GAAQnM,OAAgBjD,GAHtC,SAAC7G,GAC1B,OAAOA,EAAIsc,WAIH3R,WAAU,SAAC/L,GACnB,GAAIA,EAAO+K,SACPnG,QAAQ4Y,KAAKxd,EAAO7B,QAAS+M,EAAehC,YAC5CM,EAAME,QAAQ1J,EAAO7B,QAAS+M,EAAe/B,eAC1C,GAAInJ,EAAOb,QAAU,EACxByF,QAAQiG,MAAM,yCAA0CK,EAAehC,YACvEM,EAAMqB,MAAM,yCAA0CK,EAAehC,gBAClE,CACH,IAAMuU,EAAYzd,EAAOoK,QACzBmT,EAAarf,KAAKuf,OAInBF,IAxFf,uDA4FQ,IAAMA,EAAe,IAAIzf,IAEnBoN,EAAiB,IAAIjC,EAAe,CACtCC,WAAY,iCACZG,eAAe,EACfD,cAAe,gCACfD,SAAS,WAkBb,OAfoBnL,KAAKsf,KAAKlR,KAA4BuL,GAAuBzM,GAErEa,WAAU,SAAC/L,GACnB,GAAIA,EAAO+K,SACPnG,QAAQ4Y,KAAKxd,EAAO7B,QAAS+M,EAAehC,YAC5CM,EAAME,QAAQ1J,EAAO7B,QAAS+M,EAAe/B,eAC1C,GAAInJ,EAAOb,QAAU,EACxByF,QAAQiG,MAAM,yCAA0CK,EAAehC,YACvEM,EAAMqB,MAAM,yCAA0CK,EAAehC,gBAClE,CACH,IAAMuU,EAAYzd,EAAOoK,QACzBmT,EAAarf,KAAKuf,OAInBF,IApHf,uDAwHQ,IAAMA,EAAe,IAAIzf,IAEnBoN,EAAiB,IAAIjC,EAAe,CACtCC,WAAY,iCACZG,eAAe,EACfD,cAAe,kCACfD,SAAS,WAkBb,OAfoBnL,KAAKsf,KAAKlR,KAA4BuL,GAAuBzM,GAErEa,WAAU,SAAC/L,GACnB,GAAIA,EAAO+K,SACPnG,QAAQ4Y,KAAKxd,EAAO7B,QAAS+M,EAAehC,YAC5CM,EAAME,QAAQ1J,EAAO7B,QAAS+M,EAAe/B,eAC1C,GAAInJ,EAAOb,QAAU,EACxByF,QAAQiG,MAAM,yCAA0CK,EAAehC,YACvEM,EAAMqB,MAAM,yCAA0CK,EAAehC,gBAClE,CACH,IAAMuU,EAAYzd,EAAOoK,QACzBmT,EAAarf,KAAKuf,OAInBF,IAhJf,iEAoJQ,IAAMA,EAAe,IAAIzf,IAEnBoN,EAAiB,IAAIjC,EAAe,CACtCC,WAAY,iCACZG,eAAe,EACfD,cAAe,iDACfD,SAAS,WAkBb,OAfoBnL,KAAKsf,KAAKlR,KAA4BuL,GAAuBzM,GAErEa,WAAU,SAAC/L,GACnB,GAAIA,EAAO+K,SACPnG,QAAQ4Y,KAAKxd,EAAO7B,QAAS+M,EAAehC,YAC5CM,EAAME,QAAQ1J,EAAO7B,QAAS+M,EAAe/B,eAC1C,GAAInJ,EAAOb,QAAU,EACxByF,QAAQiG,MAAM,yCAA0CK,EAAehC,YACvEM,EAAMqB,MAAM,yCAA0CK,EAAehC,gBAClE,CACH,IAAMuU,EAAYzd,EAAOoK,QACzBmT,EAAarf,KAAKuf,OAInBF,IA5Kf,0CAgLQ,IAAMA,EAAe,IAAIzf,IAEnBoN,EAAiB,IAAIjC,EAAe,CACtCC,WAAY,oBACZG,eAAe,EACfD,cAAe,mBACfD,SAAS,WAsBb,OAfoBnL,KAAKsf,KAAKlR,KAAaiL,GAAQnM,OAAgBjD,GAHtC,SAAC7G,GAC1B,OAAOA,EAAIsc,WAIH3R,WAAU,SAAC/L,GACnB,GAAIA,EAAO+K,SACPnG,QAAQ4Y,KAAKxd,EAAO7B,QAAS+M,EAAehC,YAC5CM,EAAME,QAAQ1J,EAAO7B,QAAS+M,EAAe/B,eAC1C,GAAInJ,EAAOb,QAAU,EACxByF,QAAQiG,MAAM,yCAA0CK,EAAehC,YACvEM,EAAMqB,MAAM,yCAA0CK,EAAehC,gBAClE,CACH,IAAMuU,EAAYzd,EAAOoK,QACzBmT,EAAarf,KAAKuf,OAInBF,MA5Mf,K,oBCIMI,GAAW,CACbC,QAAS,CACL1O,MAAO,KAEX2O,UAVc,CACdC,OAAQ,CACJC,KAAM,CAAE7O,MAAO,WAWVN,GAAQoP,aAAenf,OAAO0I,OAAO0W,KAAcN,KCE1DhL,GAAShE,aAAW,SAACC,GACvB,MAAO,CACHgE,OAAQ,CACJC,SAAU,YAEdvE,QAAS,CACLwE,OAAQ,kBACR7D,gBAAiB,0BACjB8D,SAAU,OACVC,WAAY,IACZ5C,OAAQ,MACR6C,YAAarE,EAAMsE,QAAQ,GAC3BC,aAAcvE,EAAMsE,QAAQ,GAC5BE,OAAQxE,EAAMsE,QAAQ,GACtBG,UAAW,OACXC,MAAO1E,EAAM2E,QAAQC,OAAOC,MAC5BZ,SAAU,WACVa,IAAK,OAKJyH,GAAb,4MACIC,qBADJ,IAEIC,gBAFJ,IAGIC,WAHJ,IAIIC,YAJJ,IAKIC,WAAa,SAACC,GACV,IAAMC,EAAMrD,cAAWsD,kBAAkBF,EAAMG,YAAa,EAAKN,OAC3DO,EAAMxD,cAAWsD,kBAAkB,EAAKJ,OAAQ,EAAKD,OACvDQ,EAAalc,KAAKE,MAAM,EAAKub,WAAWlc,QAAUuc,EAAMG,IAExDH,EAAMG,IACNC,EAAa,GAEbA,IAAe,EAAK9N,MAAMoE,OAC1B,EAAKpE,MAAM+N,SAASD,IAdhC,EAkBI1M,UAAkC,SAACpB,GAAyB,IAAD,EACvD,GAAIqC,QAA+B,KAAvB,UAAArC,EAAM1H,YAAN,eAAYnH,SACpB,OAAO,kDAEX,IAAMyU,EAAUjB,KACVmB,EAAI,qBACS7L,IAAf,EAAKqT,QACL,EAAKD,WAAarN,EAAM1H,KACxB,EAAKgV,MAAQ,EAAKD,WAAW,GAAGN,UAChC,EAAKQ,OAAS,EAAKF,WAAW,EAAKA,WAAWlc,OAAS,GAAG4b,WAG9D,EAAKK,gBAAkB,EAAKC,WAAWrN,EAAMoE,OAC7C,IAAMqC,EAAU,EAAK2G,gBAAgBL,UAErC,OACI,eAAC,WAAD,WACI,eAAC,KAAD,CAAQhH,UAAU,EAAMC,kBAAkB,EAAOvD,UAAWmD,EAAQhB,OAApE,UACI,cAAC,KAAD,CAAOqB,gBAAgB,IACvB,cAAC,KAAD,CACI8G,UAAW,EAAKO,MAChBM,YAAanH,EACbuG,SAAU,EAAKO,OACfS,WAAYC,cAAWC,UACvBC,UAAWC,aAAUC,wBACrBC,WAAY,IACZC,eAAe,EACfC,OAAQ,EAAKhB,aAEjB,cAACf,GAAD,CAAUM,UAAW,EAAKO,MAAON,SAAU,EAAKO,SAChD,cAACzH,EAAKI,gBAAN,IACA,cAACJ,EAAKK,aAAN,IACA,cAACL,EAAKM,UAAN,IACA,cAACN,EAAKO,aAAN,OAGJ,eAACC,EAAA,EAAD,CAAKC,GAAI,EAAT,UACI,6BAAK,EAAK8G,WAAWrN,EAAMoE,OAAOyB,MAClC,cAAC,GAAD,eAAY7F,EAAMwG,gBAAgBC,iBAxDtD,EA8DIP,gBAAqC,SAAClG,GAAyB,IAAD,EACpD8F,EAAI,gBACJY,EAAkB,IAAIC,iBAAc,IAAO,GAAI,IAAO,IAC5D,OACI,cAAC,WAAD,oBACK,EAAKyG,uBADV,aACK,EAAsBxG,WAAWhU,KAAI,SAACiU,EAAWzC,GAC9C,OACI,eAAC,KAAD,CAA0CtR,GAAE,oBAAe+T,EAAU/T,IAAML,KAAI,qBAAgBoU,EAAU/T,IAAM+R,SAAUgC,EAAUC,cAAnI,UACI,cAAChB,EAAKiB,YAAN,eAAsBF,IACtB,cAAC,KAAD,CAAeG,KAAI,UAAKH,EAAU/T,IAAMmU,UAAW,IAAIC,cAAW,IAAK,EAAG,GAAIR,gBAAiBA,IAC/F,cAAC,KAAD,CAAmBS,MAAM,4BAA4BT,gBAAiBA,MAH1E,oBAA0BG,EAAU/T,WArE5D,EAgFIqT,aAAkC,SAACnG,GAAyB,IAAD,EACjD8F,EAAI,gBACV,OACI,cAAC,WAAD,oBACK,EAAKsH,uBADV,aACK,EAAsBhG,QAAQxU,KAAI,SAACyU,EAAQjD,GACxC,OACI,eAAC,KAAD,CAAuC3R,KAAI,kBAAa4U,EAAOvU,IAAM+R,SAAUwC,EAAOP,cAAtF,UACI,cAAChB,EAAKiB,YAAN,eAAsBM,IACtB,cAAC,KAAD,CAAeC,UAAW,EAAGhC,MAAOiC,SAAMC,SAF9C,wBAA8BpD,UAtFtD,EAgGIgC,UAA+B,SAACpG,GAAyB,IAAD,EACpD,OACI,cAAC,WAAD,oBACK,EAAKoN,uBADV,aACK,EAAsB3F,KAAK7U,KAAI,SAAC8U,EAAKtD,GAClC,IAAIuD,EAAyBD,EAAIb,UAAUC,cACvCc,EAAsBF,EAAIL,OAAOP,cAC/BxB,EAAQoC,EAAIA,IAAM,CAAEpC,MAAOiC,SAAMM,QAAW,CAAEvC,MAAOiC,SAAMO,UAC3DC,EAAWC,YAASC,SAAS,QAAS3C,GAE5C,OACI,cAAC,KAAD,UACI,cAAC,KAAD,CAAU4C,UAAW,CAACP,EAAwBC,GAAsBG,SAAUA,KADlF,uBAAyC3D,UA1GjE,EAmHI2C,YAAoE,SAAC/G,GAAyB,IAAD,EACzF,OACI,eAAC,KAAD,qBACKA,EAAMmI,eADX,aACK,EAAevV,KAAI,SAACb,GACjB,OAAO,qCAA4BA,QAA5B,IAA4BA,OAA5B,EAA4BA,EAAQe,IAApC,iBAAaf,QAAb,IAAaA,OAAb,EAAaA,EAAQe,QAEhC,6BAAKkN,EAAMoI,MACX,6BAAKpI,EAAMqI,MACVhG,QAAQrC,EAAMsI,MAAQ,6BAAKtI,EAAMsI,UA3HlD,EAgIIjC,aAAkC,SAACrG,GAAyB,IAAD,EACjD4F,EAAUjB,KAEV8J,EAAY,UAAG,EAAKrB,uBAAR,aAAG,EAAsBxG,WACtCjF,QAAO,SAACkF,GACL,OAAOxE,QAAQwE,EAAUsB,QAAQhX,WAEpCyB,KAAI,SAACiU,GACF,OACI,eAACP,EAAA,EAAD,CAA+CiC,GAAI,EAAnD,UACI,6CAAgB1B,EAAU/T,GAA1B,uBACC+T,EAAUsB,QAAQvV,KAAI,SAACb,GACpB,OAAO,8BAA4DA,EAAOe,IAAnE,2BAA8B+T,EAAU/T,GAAxC,YAA8Cf,EAAOe,UAHpE,4BAA+B+T,EAAU/T,QASrD,OAAOuP,QAAQoM,EAAatd,QAAU,qBAAKsR,UAAWmD,EAAQtF,QAAxB,SAAkCmO,IAAsB,cAAC,WAAD,KAlJtG,YAA+FtN,GCjClFuN,GAA6C,SAAC1O,GAAyB,IAAD,EACrDmC,mBAAiB,GADoC,oBACxEiC,EADwE,KACjE2J,EADiE,OAEvD5L,mBAAkC,IAFqB,oBAExE7J,EAFwE,KAElE2S,EAFkE,KAGzEzE,EAAkB4E,iBAAyB,CAAEX,QAAS,GAAIC,WAAY,KAE5EW,qBAAU,WACN,IAAIC,EACEC,EAAU,IAAIC,GACpB,GAAqB,KAAb,OAAJlT,QAAI,IAAJA,OAAA,EAAAA,EAAMnH,QAAc,CACpB,IAAMgK,EAAWoQ,EAAQ2E,iCACzB5E,EAAInQ,EAAS4C,WAAU,SAAC2N,GACpBT,EAAQS,MAGhB,OAAO,WACHJ,GAAKA,EAAEM,iBAEZ,CAACtT,EAAM2S,EAAS7G,IAEnBoC,EAAgBC,QAAU8D,GAAgBqE,4BAA4BtW,EAAM8L,GAE5E,IAAM4H,EAASxD,GAAe2E,IAE9B,OADAnB,EAAOhM,MAAQ,CAAE1H,OAAM8L,QAAO2J,WAAUvH,mBACjCwF,EAAO1L,WCxBL6P,GAAb,4MACI/O,UAAkC,SAACpB,GAC/B,OACI,gCACI,kEACA,cAAC,GAAD,QALhB,YAAmFmB,GCFtEiP,GAAuC,SAACpQ,GAEjD,OADewI,GAAe2H,IAChB7P,WCYZqE,GAAShE,aAAW,SAACC,GACvB,MAAO,CACHgE,OAAQ,CACJC,SAAU,YAEdvE,QAAS,CACLwE,OAAQ,kBACR7D,gBAAiB,0BACjB8D,SAAU,OACVC,WAAY,IACZ5C,OAAQ,MACR6C,YAAarE,EAAMsE,QAAQ,GAC3BC,aAAcvE,EAAMsE,QAAQ,GAC5BE,OAAQxE,EAAMsE,QAAQ,GACtBG,UAAW,OACXC,MAAO1E,EAAM2E,QAAQC,OAAOC,MAC5BZ,SAAU,WACVa,IAAK,OAKJyH,GAAb,4MACIC,qBADJ,IAEIC,gBAFJ,IAGIC,WAHJ,IAIIC,YAJJ,IAKIC,WAAa,SAACC,GACV,IAAMC,EAAMrD,cAAWsD,kBAAkBF,EAAMG,YAAa,EAAKN,OAC3DO,EAAMxD,cAAWsD,kBAAkB,EAAKJ,OAAQ,EAAKD,OACvDQ,EAAalc,KAAKE,MAAM,EAAKub,WAAWlc,QAAUuc,EAAMG,IAExDH,EAAMG,IACNC,EAAa,GAEbA,IAAe,EAAK9N,MAAMoE,OAC1B,EAAKpE,MAAM+N,SAASD,IAdhC,EAkBI1M,UAAkC,SAACpB,GAAyB,IAAD,EACvD,GAAIqC,QAA+B,KAAvB,UAAArC,EAAM1H,YAAN,eAAYnH,SACpB,OAAO,kDAEX,IAAMyU,EAAUjB,KACVmB,EAAI,qBACS7L,IAAf,EAAKqT,QACL,EAAKD,WAAarN,EAAM1H,KACxB,EAAKgV,MAAQ,EAAKD,WAAW,GAAGN,UAChC,EAAKQ,OAAS,EAAKF,WAAW,EAAKA,WAAWlc,OAAS,GAAG4b,WAG9D,EAAKK,gBAAkB,EAAKC,WAAWrN,EAAMoE,OAC7C,IAAMqC,EAAU,EAAK2G,gBAAgBL,UAErC,OACI,eAAC,WAAD,WACI,eAAC,KAAD,CAAQhH,UAAU,EAAMC,kBAAkB,EAAOvD,UAAWmD,EAAQhB,OAApE,UACI,cAAC,KAAD,CAAOqB,gBAAgB,IACvB,cAAC,KAAD,CACI8G,UAAW,EAAKO,MAChBM,YAAanH,EACbuG,SAAU,EAAKO,OACfS,WAAYC,cAAWC,UACvBC,UAAWC,aAAUC,wBACrBC,WAAY,IACZC,eAAe,EACfC,OAAQ,EAAKhB,aAEjB,cAACf,GAAD,CAAUM,UAAW,EAAKO,MAAON,SAAU,EAAKO,SAChD,cAACzH,EAAKI,gBAAN,IACA,cAACJ,EAAKK,aAAN,IACA,cAACL,EAAKM,UAAN,IACA,cAACN,EAAKO,aAAN,OAGJ,eAACC,EAAA,EAAD,CAAKC,GAAI,EAAT,UACI,6BAAK,EAAK8G,WAAWrN,EAAMoE,OAAOyB,MAClC,cAAC,GAAD,eAAY7F,EAAMwG,gBAAgBC,iBAxDtD,EA8DIP,gBAAqC,SAAClG,GAAyB,IAAD,EACpD8F,EAAI,gBACJY,EAAkB,IAAIC,iBAAc,IAAO,GAAI,IAAO,IAC5D,OACI,cAAC,WAAD,oBACK,EAAKyG,uBADV,aACK,EAAsBxG,WAAWhU,KAAI,SAACiU,EAAWzC,GAC9C,OACI,eAAC,KAAD,CAA0CtR,GAAE,oBAAe+T,EAAU/T,IAAML,KAAI,qBAAgBoU,EAAU/T,IAAM+R,SAAUgC,EAAUC,cAAnI,UACI,cAAChB,EAAKiB,YAAN,eAAsBF,IACtB,cAAC,KAAD,CAAeG,KAAI,UAAKH,EAAU/T,IAAMmU,UAAW,IAAIC,cAAW,IAAK,EAAG,GAAIR,gBAAiBA,IAC/F,cAAC,KAAD,CAAmBS,MAAM,4BAA4BT,gBAAiBA,MAH1E,oBAA0BG,EAAU/T,WArE5D,EAgFIqT,aAAkC,SAACnG,GAAyB,IAAD,EACjD8F,EAAI,gBACV,OACI,cAAC,WAAD,oBACK,EAAKsH,uBADV,aACK,EAAsBhG,QAAQxU,KAAI,SAACyU,EAAQjD,GACxC,OACI,eAAC,KAAD,CAAuC3R,KAAI,kBAAa4U,EAAOvU,IAAM+R,SAAUwC,EAAOP,cAAtF,UACI,cAAChB,EAAKiB,YAAN,eAAsBM,IACtB,cAAC,KAAD,CAAeC,UAAW,EAAGhC,MAAOiC,SAAMC,SAF9C,wBAA8BpD,UAtFtD,EAgGIgC,UAA+B,SAACpG,GAAyB,IAAD,EACpD,OACI,cAAC,WAAD,oBACK,EAAKoN,uBADV,aACK,EAAsB3F,KAAK7U,KAAI,SAAC8U,EAAKtD,GAClC,IAAIuD,EAAyBD,EAAIb,UAAUC,cACvCc,EAAsBF,EAAIL,OAAOP,cAC/BxB,EAAQoC,EAAIA,IAAM,CAAEpC,MAAOiC,SAAMM,QAAW,CAAEvC,MAAOiC,SAAMO,UAC3DC,EAAWC,YAASC,SAAS,QAAS3C,GAE5C,OACI,cAAC,KAAD,UACI,cAAC,KAAD,CAAU4C,UAAW,CAACP,EAAwBC,GAAsBG,SAAUA,KADlF,uBAAyC3D,UA1GjE,EAmHI2C,YAAoE,SAAC/G,GAAyB,IAAD,EACzF,OACI,eAAC,KAAD,qBACKA,EAAMmI,eADX,aACK,EAAevV,KAAI,SAACb,GACjB,OAAO,qCAA4BA,QAA5B,IAA4BA,OAA5B,EAA4BA,EAAQe,IAApC,iBAAaf,QAAb,IAAaA,OAAb,EAAaA,EAAQe,QAEhC,6BAAKkN,EAAMoI,MACX,6BAAKpI,EAAMqI,MACVhG,QAAQrC,EAAMsI,MAAQ,6BAAKtI,EAAMsI,UA3HlD,EAgIIjC,aAAkC,SAACrG,GAAyB,IAAD,EACjD4F,EAAUjB,KAEV8J,EAAY,UAAG,EAAKrB,uBAAR,aAAG,EAAsBxG,WACtCjF,QAAO,SAACkF,GACL,OAAOxE,QAAQwE,EAAUsB,QAAQhX,WAEpCyB,KAAI,SAACiU,GACF,OACI,eAACP,EAAA,EAAD,CAA+CiC,GAAI,EAAnD,UACI,6CAAgB1B,EAAU/T,GAA1B,uBACC+T,EAAUsB,QAAQvV,KAAI,SAACb,GACpB,OAAO,8BAA4DA,EAAOe,IAAnE,2BAA8B+T,EAAU/T,GAAxC,YAA8Cf,EAAOe,UAHpE,4BAA+B+T,EAAU/T,QASrD,OAAOuP,QAAQoM,EAAatd,QAAU,qBAAKsR,UAAWmD,EAAQtF,QAAxB,SAAkCmO,IAAsB,cAAC,WAAD,KAlJtG,YAA+FtN,GCjClFuN,GAA6C,SAAC1O,GAAyB,IAAD,EACrDmC,mBAAiB,GADoC,oBACxEiC,EADwE,KACjE2J,EADiE,OAEvD5L,mBAAkC,IAFqB,oBAExE7J,EAFwE,KAElE2S,EAFkE,KAGzEzE,EAAkB4E,iBAAyB,CAAEX,QAAS,GAAIC,WAAY,KAE5EW,qBAAU,WACN,IAAIC,EACEC,EAAU,IAAIC,GACpB,GAAqB,KAAb,OAAJlT,QAAI,IAAJA,OAAA,EAAAA,EAAMnH,QAAc,CACpB,IAAMgK,EAAWoQ,EAAQ8E,2CACzB/E,EAAInQ,EAAS4C,WAAU,SAAC2N,GACpBT,EAAQS,MAGhB,OAAO,WACHJ,GAAKA,EAAEM,iBAEZ,CAACtT,EAAM2S,EAAS7G,IAEnBoC,EAAgBC,QAAU8D,GAAgBqE,4BAA4BtW,EAAM8L,GAE5E,IAAM4H,EAASxD,GAAe2E,IAE9B,OADAnB,EAAOhM,MAAQ,CAAE1H,OAAM8L,QAAO2J,WAAUvH,mBACjCwF,EAAO1L,WCxBLgQ,GAAb,4MACIlP,UAAkC,SAACpB,GAC/B,OACI,gCACI,kEACA,cAAC,GAAD,QALhB,YAAuGmB,GCF1FoP,GAAiD,SAACvQ,GAE3D,OADewI,GAAe8H,IAChBhQ,WCKLkQ,GAAb,4MACIpP,UAAkC,SAACpB,GAC/B,OACI,eAACyQ,EAAA,EAAD,CAAOC,aAAc1Q,EAAM0Q,aAAcC,kBAAkB,EAAM/P,MAAOA,GAAxE,UACI,cAACgQ,EAAA,EAAD,CAAUne,KAAK,OAAOsD,KAAMmW,GAAU2E,KAAMC,KAAM3S,QAAS,CAAE4S,MAAO,cACpE,cAACH,EAAA,EAAD,CAAUne,KAAK,kBAAkBsD,KAAMqa,GAAmBS,KAAMG,KAAM7S,QAAS,CAAE4S,MAAO,qBACxF,cAACH,EAAA,EAAD,CAAUne,KAAK,oBAAoBsD,KAAMwa,GAA6BM,KAAMG,KAAM7S,QAAS,CAAE4S,MAAO,0BACpG,cAACH,EAAA,EAAD,CAAUne,KAAK,YAAYsD,KAAMyW,GAAcqE,KAAMG,KAAM7S,QAAS,CAAE4S,MAAO,wBAC7E,cAACH,EAAA,EAAD,CAAUne,KAAK,YAAYsD,KAAM+Y,GAAc+B,KAAMG,KAAM7S,QAAS,CAAE4S,MAAO,qBAC7E,cAACH,EAAA,EAAD,CAAUne,KAAK,YAAYsD,KAAMsZ,GAAcwB,KAAMG,KAAM7S,QAAS,CAAE4S,MAAO,qBAT7F,YAAyE5P,G,UCP5D8P,GAAkC,SAACjR,GAC5C,IAAMgM,EAAS7J,mBAAS,IAAIqO,IAAsB,GAE5CE,EAAeQ,aAAiB,IAKtC,OAHAlF,EAAOhM,MAAQ,CACX0Q,gBAEG1E,EAAO1L,WCHL6Q,GAAb,4MAII/P,UAAkC,SAACpB,GAC/B,OACI,eAAC,WAAD,WACI,cAACoR,EAAA,EAAD,IACA,cAAC,GAAD,IACCpR,EAAMqR,cAAcze,KAAI,SAAC0e,EAAelN,GACrC,OACI,cAACmN,EAAA,EAAD,CAEIC,aAAc,CACVC,SAAU,MACVC,WAAY,UAEhBC,QAASL,EAAcK,QACvB5B,KAAMuB,EAAcvB,KACpB6B,iBAAkBN,EAAcM,iBAChCrP,MAAO,CAAEmD,IAAK,EAAKmM,uBAAuBzN,IAT9C,SAWI,eAAC,WAAD,WACKkN,EAAcvB,MAAQ,cAAC,EAAD,CAASxP,SAAU+Q,EAAc/Q,SAAUpQ,QAASmhB,EAAcnhB,WACvFmhB,EAAcvB,MAAQ,6BAbhC,mBACqB3L,WAZ7C,qEAC2BA,GACnB,MAAM,GAAN,OAAU,GAAa,GAARA,EAAf,UAFR,GAAqEjD,GCNxD2Q,GAAgC,SAAC9R,GAC1C,IAAMgM,EAAS7J,mBAAS,IAAIgP,IAAoB,GAIhD,OAHAnF,EAAOhM,MAAQ,CACXqR,cAAe,IAEZrF,EAAO1L,WCJLyR,GAA+B,SAAC/R,GACzC,OACI,cAAC,aAAD,UACI,cAACgS,EAAA,EAAD,UACI,cAAC,GAAD,SCLHC,GAA6B,WACtC,OAAO5Q,wBAAc0Q,K,oBCGZG,GAAb,2GAEQ,IAAM3C,EAAe,IAAIzf,IAEnBoN,EAAiB,IAAIjC,EAAe,CACtCC,WAAY,cACZC,SAAS,UAGPmU,EAAOjT,EAAe+B,KAAgB/F,EAAW6E,GAAgBa,WACnE,YAAyB,IAAtB5N,EAAqB,EAArBA,QAAS0M,EAAY,EAAZA,MACRA,GAASjG,QAAQC,IAAIgG,GAErB,IAAIsV,IAAWhiB,GAAWA,EAAQ8E,cAAc7D,QAAQ,OAAS,EAEjEke,EAAK1D,cACL2D,EAAarf,KAAKiiB,GAClB5C,EAAazV,cAEjB,SAAC+C,GACG0S,EAAa1S,MAAMA,MAI3B,OAAO0S,IAxBf,sCA2B2B6C,GACnBC,OAAIC,mBAAqBF,EAAOG,cA5BxC,2CAgCQ,IAAMhD,EAAe,IAAIzf,IAMrBsiB,EAAcI,GA0BlB,OAxBIJ,EAASK,GAGbtY,EAAYa,SAASoX,GAGrB/V,EAAeqW,UAAU,iBAAiB3U,WACtC,SAACzF,GACG6B,EAAYS,QAAUtC,GAGjB6B,EAAYC,YAAcgY,EAAOO,UAClCxY,EAAYS,QAAQgB,mBAAqBwW,EAAOO,SAGpDT,EAAWU,gBAAgBR,GAC3B7C,EAAarf,MAAK,GAClBqf,EAAazV,cAEjB,SAAC+C,GACG0S,EAAa1S,MAAMA,MAIpB0S,MAhEf,K,OCAA2C,GAAWW,qBAAqB9U,WAAU,SAAC+U,GACvCC,IAASxiB,OAAO,cAAC,GAAD,IAASyiB,SAASC,eAAe,SAEjDf,GAAWgB,cAAcnV,WACrB,SAACoV,GACGhZ,EAAYQ,mBAAqBwY,EAEjC,IACMhjB,EAAO,UADIijB,aACJ,aAAmBjZ,EAAYO,QAA/B,eAA6CP,EAAYS,QAAQgB,oBAC9EJ,EAAMC,KAAKtL,MAEf,SAAC0M,GACG1C,EAAYQ,oBAAqB,U","file":"static/js/main.33af9c93.chunk.js","sourcesContent":["module.exports = Cesium;","import { Subject } from 'rxjs';\r\n\r\nexport enum Topics {\r\n    TOAST_DISPLAYED,\r\n    TIME_INDEX_CHANGED\r\n}\r\n\r\nexport class PubSubPayloadProps {\r\n    topic: Topics;\r\n    payload: any[];\r\n}\r\n\r\nclass K2PubSub {\r\n    private _subject = new Subject<Topics>();\r\n    private _subjectPayload = new Subject<PubSubPayloadProps>();\r\n\r\n    pubSub$(): Subject<Topics> {\r\n        return this._subject;\r\n    }\r\n\r\n    broadcast(topic: Topics) {\r\n        this._subject.next(topic);\r\n    }\r\n\r\n    pubSubPayload$(): Subject<PubSubPayloadProps> {\r\n        return this._subjectPayload;\r\n    }\r\n\r\n    broadcastPayload(message: PubSubPayloadProps) {\r\n        this._subjectPayload.next(message);\r\n    }\r\n}\r\n\r\nexport let PubSub: K2PubSub = new K2PubSub();\r\n","import { format, formatDistance, formatISO, addDays, parseISO, addHours } from 'date-fns';\r\n\r\nexport enum foNames {\r\n    UNKNOWN = 'unknown',\r\n    AT = '@',\r\n    THIS = 'this',\r\n    SELF = 'self',\r\n    ROOT = 'root'\r\n}\r\n\r\n// Converts numeric degrees to radians\r\n// if (typeof (Number.prototype.toRad) === \"undefined\") {\r\n//     Number.prototype.toRad = function () {\r\n//         return this * Math.PI / 180;\r\n//     }\r\n// }\r\n// if (typeof (Number.prototype.toDeg) === \"undefined\") {\r\n//     Number.prototype.toDeg = function () {\r\n//         return this * 180 / Math.PI;\r\n//     }\r\n// }\r\n\r\nexport class foTools {\r\n    // Speed up calls to hasOwnProperty\r\n    private hasOwnProperty = Object.prototype.hasOwnProperty;\r\n\r\n    /**\r\n     * http://stackoverflow.com/questions/6588977/how-to-to-extract-a-javascript-function-from-a-javascript-file\r\n     * @param funct\r\n     */\r\n    getFunctionName(funct: string) {\r\n        let ret = funct.toString(); // do with regx\r\n        ret = ret.substr('function '.length);\r\n        ret = ret.substr(0, ret.indexOf('('));\r\n        return ret.trim();\r\n    }\r\n\r\n    // http://stackoverflow.com/questions/105034/how-to-create-a-guid-uuid-in-javascript\r\n    generateUUID() {\r\n        let d = new Date().getTime();\r\n        const uuid = 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {\r\n            // tslint:disable-next-line:no-bitwise\r\n            const r = (d + Math.random() * 16) % 16 | 0;\r\n            d = Math.floor(d / 16);\r\n            // tslint:disable-next-line:no-bitwise\r\n            return (c === 'x' ? r : (r & 0x7) | 0x8).toString(16);\r\n        });\r\n        return uuid;\r\n    }\r\n\r\n    asJson(target: any) {\r\n        const result = this.stringify(target);\r\n        return JSON.parse(result);\r\n    }\r\n\r\n    stringify(target: any, func = undefined, deep = 3) {\r\n        function resolveReference(value: any) {\r\n            if (value && value.asReference) {\r\n                return 'resolveRef(' + value.asReference() + ',' + value.constructor.name + ')';\r\n            }\r\n            return value;\r\n        }\r\n        function resolveCircular(key: any, value: any) {\r\n            switch (key) {\r\n                case 'myParent':\r\n                    return resolveReference(value);\r\n                case 'myMembers':\r\n                    return value\r\n                        ? value.map((item: any) => {\r\n                              return resolveReference(item);\r\n                          })\r\n                        : value;\r\n                case '_lookup':\r\n                    return value;\r\n                case '_members':\r\n                    return value;\r\n                case 'targets':\r\n                    return value.map((item: any) => {\r\n                        return item.id;\r\n                    });\r\n            }\r\n            if (key.startsWith('_')) {\r\n                return;\r\n            }\r\n            // if (this.isCustomLinkName(key)) {\r\n            //    return resolveReference(value);\r\n            // }\r\n\r\n            return value;\r\n        }\r\n\r\n        return JSON.stringify(target, resolveCircular, deep);\r\n    }\r\n\r\n    splitNamespaceType(id: string, primitive?: string) {\r\n        const typeId = id.split('::');\r\n        let result = { namespace: '', name: id };\r\n        if (typeId.length === 2) {\r\n            result = {\r\n                namespace: typeId[0],\r\n                name: typeId[1]\r\n            };\r\n        } else if (primitive) {\r\n            result = {\r\n                namespace: typeId[0],\r\n                name: primitive\r\n            };\r\n        }\r\n        return result;\r\n    }\r\n\r\n    getNamespace(obj: any) {\r\n        let myNamespace = obj.myType ? obj.myType.split('::') : [''];\r\n        myNamespace = myNamespace[0];\r\n        return myNamespace;\r\n    }\r\n\r\n    getType(obj: any): string {\r\n        let myType = obj.myType ? obj.myType.split('::') : [''];\r\n        myType = myType.length === 2 ? myType[1] : myType[0];\r\n        return myType;\r\n    }\r\n\r\n    namespace(namespace: string, name: string) {\r\n        return `${namespace}::${name}`;\r\n    }\r\n\r\n    randomInt(low: number, high: number) {\r\n        return low + Math.floor(Math.random() * (high - low + 1));\r\n    }\r\n\r\n    random(low: number, high: number) {\r\n        return low + Math.random() * (high - low);\r\n    }\r\n\r\n    randomRGBColor() {\r\n        // tslint:disable-next-line:no-bitwise\r\n        const r = (255 * Math.random()) | 0;\r\n        // tslint:disable-next-line:no-bitwise\r\n        const g = (255 * Math.random()) | 0;\r\n        // tslint:disable-next-line:no-bitwise\r\n        const b = (255 * Math.random()) | 0;\r\n        return `rgb(${r},${g},${b})`;\r\n    }\r\n\r\n    matches(str1: string, str2: string) {\r\n        if (str1 === str2) {\r\n            return true;\r\n        }\r\n        return str1 && str2 && str1.toLocaleLowerCase() === str2.toLocaleLowerCase();\r\n    }\r\n\r\n    startsWith(str1: string, str2: string) {\r\n        if (str1 === str2) {\r\n            return true;\r\n        }\r\n        return str1 && str2 && str1.toLocaleLowerCase().startsWith(str2.toLocaleLowerCase());\r\n    }\r\n\r\n    capitalizeFirstLetter(str1: string) {\r\n        return str1.charAt(0).toUpperCase() + str1.slice(1);\r\n    }\r\n\r\n    isSelf(ref: any) {\r\n        return this.matches(ref, foNames.AT) || this.matches(ref, foNames.THIS) || this.matches(ref, foNames.SELF);\r\n    }\r\n\r\n    isArray(obj: any) {\r\n        if (Array.isArray) {\r\n            return Array.isArray(obj);\r\n        }\r\n        return Object.prototype.toString.call(obj) === '[object Array]' ? true : false;\r\n    }\r\n\r\n    isFunction(obj: any) {\r\n        return typeof obj === 'function';\r\n    }\r\n\r\n    isString(obj: any) {\r\n        return typeof obj === 'string';\r\n    }\r\n\r\n    isNumber(obj: any) {\r\n        return typeof obj === 'number';\r\n    }\r\n\r\n    isDate(obj: any) {\r\n        return obj instanceof Date;\r\n    }\r\n\r\n    isObject(obj: any) {\r\n        return obj && typeof obj === 'object'; // prevents typeOf null === 'object'\r\n    }\r\n\r\n    isCustomLinkName(key: any) {\r\n        return false;\r\n    }\r\n\r\n    isTyped(obj: any) {\r\n        return obj && obj.isInstanceOf;\r\n    }\r\n\r\n    isEmpty(obj: any) {\r\n        // null and undefined are \"empty\"\r\n        if (obj == null) {\r\n            return true;\r\n        }\r\n\r\n        // Assume if it has a length property with a non-zero value\r\n        // that that property is correct.\r\n        if (obj.length > 0) {\r\n            return false;\r\n        }\r\n        if (obj.length === 0) {\r\n            return true;\r\n        }\r\n\r\n        // If it isn't an object at this point\r\n        // it is empty, but it can't be anything *but* empty\r\n        // Is it empty?  Depends on your application.\r\n        if (typeof obj !== 'object') {\r\n            return true;\r\n        }\r\n\r\n        // Otherwise, does it have any properties of its own?\r\n        // Note that this doesn't handle\r\n        // toString and valueOf enumeration bugs in IE < 9\r\n        // tslint:disable-next-line:prefer-const\r\n        for (let key in obj) {\r\n            if (this.hasOwnProperty.call(obj, key)) {\r\n                return false;\r\n            }\r\n        }\r\n\r\n        return true;\r\n    }\r\n\r\n    replaceSpaces(str: string) {\r\n        return str.replace(/[\\s]/g, '_');\r\n    }\r\n\r\n    removeSpaces(str: string) {\r\n        return str.replace(/[\\s]/g, '_');\r\n    }\r\n\r\n    removeSpecial(str: string) {\r\n        return str.replace(/[^a-zA-Z 0-9]+/g, '');\r\n    }\r\n\r\n    toVirtualFolder(str: string) {\r\n        let result = this.removeSpecial(str);\r\n        result = this.removeSpaces(result);\r\n        return result.toLocaleLowerCase();\r\n    }\r\n\r\n    applyTemplate(str: string, obj: any) {\r\n        let result = str || '';\r\n        const keys = Object.keys(obj);\r\n        for (const key of keys) {\r\n            const name = '{' + key + '}';\r\n            const value = obj[key];\r\n            result = result.replace(name, value);\r\n        }\r\n        // result = this.removeSpecial(result);\r\n        // result = this.removeSpaces(result);\r\n        return result;\r\n    }\r\n\r\n    removeDQ(str: string): string {\r\n        return str.replace(/^\"(.*)\"$/, '$1');\r\n    }\r\n\r\n    unwrap(str: string): string {\r\n        return str.substring(1, str.length - 1);\r\n    }\r\n\r\n    wrapDQ(str: string): string {\r\n        return `\"${str}\"`;\r\n    }\r\n\r\n    wrapSQ(str: string): string {\r\n        return `'${str}'`;\r\n    }\r\n\r\n    decomposeHostPath(filename: string) {\r\n        let string = filename.toLowerCase();\r\n        string = string.replace('http://', '');\r\n        string = string.replace('https://', '');\r\n\r\n        const host = string.split('/')[0];\r\n        const path = string.replace(host, '');\r\n        return {\r\n            fullpath: filename,\r\n            host,\r\n            path\r\n        };\r\n    }\r\n\r\n    extend(target: any, source: any) {\r\n        if (!source) {\r\n            return target;\r\n        }\r\n        // tslint:disable-next-line:prefer-const\r\n        for (let key in source) {\r\n            if (this.hasOwnProperty.call(source, key)) {\r\n                target[key] = source[key];\r\n            }\r\n        }\r\n        return target;\r\n    }\r\n\r\n    mixin(target: any, source: any) {\r\n        if (!source) {\r\n            return target;\r\n        }\r\n        if (!target) {\r\n            return source;\r\n        }\r\n\r\n        for (const key of source) {\r\n            target[key] = source[key];\r\n        }\r\n        return target;\r\n    }\r\n\r\n    mixExact(target: any, source: any) {\r\n        if (!source) {\r\n            return target;\r\n        }\r\n        if (!target) {\r\n            return source;\r\n        }\r\n        for (const key in source) {\r\n            if (foTools.hasOwnProperty.call(target, key)) {\r\n                target[key] = source[key];\r\n            }\r\n        }\r\n        return target;\r\n    }\r\n\r\n    mixout(target: any, source: any) {\r\n        if (!source) {\r\n            return target;\r\n        }\r\n        if (!target) {\r\n            return source;\r\n        }\r\n        for (const key in source) {\r\n            if (this.hasOwnProperty.call(target, key)) {\r\n                delete target[key];\r\n            }\r\n        }\r\n        return target;\r\n    }\r\n\r\n    extract(target: any, keys?: string[]) {\r\n        const spec: any = {};\r\n        keys &&\r\n            keys.forEach((key) => {\r\n                spec[key] = target[key];\r\n            });\r\n        return spec;\r\n    }\r\n\r\n    mixMap(target: any, source: any) {\r\n        if (!source) {\r\n            return target;\r\n        }\r\n\r\n        const result: any = {};\r\n        for (const key in target) {\r\n            const keyMap = source[key] || key;\r\n            result[keyMap] = target[key];\r\n        }\r\n        return result;\r\n    }\r\n\r\n    intersect(target: any, source: any) {\r\n        if (!source) {\r\n            return target;\r\n        }\r\n        if (!target) {\r\n            return source;\r\n        }\r\n        const intersect: any = {};\r\n        for (const key in target) {\r\n            if (this.hasOwnProperty.call(source, key)) {\r\n                intersect[key] = source[key];\r\n            } else {\r\n                intersect[key] = target[key];\r\n            }\r\n        }\r\n        return intersect;\r\n    }\r\n\r\n    union(target: any, source: any) {\r\n        const result: any = {};\r\n        if (target) {\r\n            for (const key in target) {\r\n                result[key] = target[key];\r\n            }\r\n        }\r\n        if (source) {\r\n            for (const key in source) {\r\n                result[key] = source[key];\r\n            }\r\n        }\r\n        return result;\r\n    }\r\n    defineValueProperty(target: any, name: string, value: any) {\r\n        Object.defineProperty(target, name, {\r\n            value: value,\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        return target;\r\n    }\r\n\r\n    defineComputeOnlyProperty(target: any, name: string, func: () => any) {\r\n        // var self = target;\r\n        Object.defineProperty(target, name, {\r\n            enumerable: true,\r\n            configurable: true,\r\n            get: func\r\n        });\r\n        return target;\r\n    }\r\n\r\n    defineCalculatedProperty(target: any, name: string, func: () => any) {\r\n        // var self = target;\r\n        Object.defineProperty(target, name, {\r\n            enumerable: true,\r\n            configurable: true,\r\n            get: func, // .call(self, self),\r\n            set(value) {\r\n                this[`_${name}`] = value;\r\n            }\r\n        });\r\n        return target;\r\n    }\r\n\r\n    getMethods(obj: any) {\r\n        const list: any[] = [];\r\n        for (const m in obj.prototype) {\r\n            if (typeof obj[m] === 'function') {\r\n                list.push(m);\r\n            }\r\n        }\r\n        return list;\r\n    }\r\n\r\n    asArray(obj: any, funct?: any) {\r\n        if (this.isArray(obj)) {\r\n            return obj;\r\n        }\r\n        return this.mapOverKeyValue(obj, (key: any, value: any) => {\r\n            return funct ? funct(key, value) : value;\r\n        });\r\n    }\r\n\r\n    applyOverKeyValue(obj: any, mapFunc: any) {\r\n        // funct has 2 args.. key,value\r\n        const body: any = {};\r\n        const keys = obj ? Object.keys(obj) : [];\r\n        keys.forEach((key) => {\r\n            if (this.hasOwnProperty.call(obj, key)) {\r\n                const value = obj[key];\r\n                const result = mapFunc(key, value);\r\n                if (result) {\r\n                    body[key] = result;\r\n                }\r\n            }\r\n        });\r\n        return body;\r\n    }\r\n\r\n    mapOverKeyValue(obj: any, mapFunc: any): [] {\r\n        // funct has 2 args.. key,value\r\n        const list: any = [];\r\n        const keys = obj ? Object.keys(obj) : [];\r\n        keys.forEach((key) => {\r\n            if (this.hasOwnProperty.call(obj, key)) {\r\n                const value: any = obj[key];\r\n                const result: any = mapFunc(key, value);\r\n                if (result) {\r\n                    list.push(result);\r\n                }\r\n            }\r\n        });\r\n        return list;\r\n    }\r\n\r\n    forEachKeyValue(obj: any, mapFunc: any) {\r\n        // funct has 2 args.. key,value\r\n        const keys = obj ? Object.keys(obj) : [];\r\n        keys.forEach((key) => {\r\n            if (this.hasOwnProperty.call(obj, key)) {\r\n                const value = obj[key];\r\n                mapFunc(key, value);\r\n            }\r\n        });\r\n    }\r\n\r\n    findKeyForValue(obj: any, key: any) {\r\n        for (const name in obj) {\r\n            if (this.hasOwnProperty.call(obj, key)) {\r\n                if (obj[name].matches(key)) {\r\n                    return name;\r\n                }\r\n            }\r\n        }\r\n        return obj;\r\n    }\r\n    addToListByKey(target: any, key: string, value: any) {\r\n        if (!target[key]) {\r\n            target[key] = [value];\r\n        } else {\r\n            target[key].push(value);\r\n        }\r\n    }\r\n\r\n    extractReadWriteKeys(spec: any) {\r\n        const keys: string[] = [];\r\n        Tools.forEachKeyValue(spec, (k: any, v: any) => {\r\n            if (!Tools.isFunction(v)) {\r\n                keys.push(k);\r\n            }\r\n        });\r\n        return keys;\r\n    }\r\n\r\n    extractComputedKeys(spec: any) {\r\n        const keys: string[] = [];\r\n        Tools.forEachKeyValue(spec, (k: any, v: any) => {\r\n            if (Tools.isFunction(v)) {\r\n                keys.push(k);\r\n            }\r\n        });\r\n        return keys;\r\n    }\r\n\r\n    overrideComputed(obj: any, properties: any) {\r\n        Tools.forEachKeyValue(properties, (key: any, value: any) => {\r\n            try {\r\n                if (Tools.isFunction(value)) {\r\n                    Tools.defineCalculatedProperty(obj, key, value);\r\n                } else {\r\n                    obj[key] = value;\r\n                }\r\n            } catch (ex) {\r\n                console.log(ex);\r\n            }\r\n        });\r\n    }\r\n\r\n    extendComputed(obj: any, properties: any) {\r\n        Tools.forEachKeyValue(properties, (key: any, value: any) => {\r\n            try {\r\n                if (!obj[key]) {\r\n                    if (Tools.isFunction(value)) {\r\n                        Tools.defineCalculatedProperty(obj, key, value);\r\n                    } else {\r\n                        obj[key] = value;\r\n                    }\r\n                }\r\n            } catch (ex) {\r\n                console.log(ex);\r\n            }\r\n        });\r\n    }\r\n\r\n    pluck(name: string) {\r\n        return (x: any) => {\r\n            return x[name];\r\n        };\r\n    }\r\n\r\n    distinctItems(list: []) {\r\n        const distinct = {};\r\n        list.forEach((item) => {\r\n            distinct[item] = item;\r\n        });\r\n        return Object.keys(distinct);\r\n    }\r\n\r\n    groupBy(pluckBy: any, list: []) {\r\n        const dictionary: any = {};\r\n        list.forEach((item) => {\r\n            const key = pluckBy(item);\r\n            if (!dictionary[key]) {\r\n                dictionary[key] = [];\r\n            }\r\n            dictionary[key].push(item);\r\n        });\r\n        return dictionary;\r\n    }\r\n    mergeGroups(g1: any, g2: any) {\r\n        const dictionary: any = {};\r\n        Object.keys(g1).forEach((key) => {\r\n            const item1 = g1[key];\r\n            const item2 = g2[key];\r\n            if (item2) {\r\n                dictionary[key] = [...item2, ...item1];\r\n            } else {\r\n                dictionary[key] = [...item1];\r\n            }\r\n        });\r\n        return dictionary;\r\n    }\r\n\r\n    getDateTimeDisplay(isoDate: string): string {\r\n        return format(new Date(isoDate), \"MM-dd-yyyy h:mm aaaaa'm'\");\r\n    }\r\n\r\n    getDateTimeWords(isoDate: string) {\r\n        return formatDistance(new Date(isoDate), new Date(), { addSuffix: true, includeSeconds: true });\r\n    }\r\n\r\n    getNowIsoDate() {\r\n        return new Date().toISOString();\r\n    }\r\n\r\n    now() {\r\n        return new Date().getTime();\r\n    }\r\n\r\n    getYearYYYY() {\r\n        return new Date().getFullYear();\r\n    }\r\n\r\n    get doNothing() {\r\n        return () => {};\r\n    }\r\n\r\n    isPasteEvent(event: any): boolean {\r\n        return event?.ctrlKey && (event?.key || '').toUpperCase() === 'V';\r\n    }\r\n\r\n    addISODays(isoDate: string, days = 1): string {\r\n        return formatISO(addDays(parseISO(isoDate), days));\r\n    }\r\n\r\n    addISOHours(isoDate: string, hours = 1): string {\r\n        return formatISO(addHours(parseISO(isoDate), hours));\r\n    }\r\n\r\n    // add this to new service to dynamicaly load javascript,  maybe over signalR\r\n\r\n    // xmlHttpGet(url:string, onComplete, onFailure) {\r\n    //     let xmlHttp = new window.XMLHttpRequest();\r\n    //     xmlHttp.onload = function () {\r\n    //        let result = xmlHttp.responseText;\r\n    //         onComplete && onComplete(result, xmlHttp);\r\n    //     };\r\n    //     try {\r\n    //         xmlHttp.open(\"GET\", url, false);  //this may give chrome some problems\r\n    //         xmlHttp.send(null);\r\n    //     }\r\n    //     catch (ex) {\r\n    //         onFailure && onFailure(ex, xmlHttp);\r\n    //     }\r\n    // }\r\n    // loadAsScript(url:string, onComplete) {\r\n    //     this.xmlHttpGet(url, function (text, xhr) {\r\n    //         if (xhr.status == 200 || xhr.status == 304) {\r\n    //            let head = document.getElementsByTagName(\"head\")[0];\r\n    //            let script = document.createElement('script');\r\n    //             script.innerHTML = text;\r\n    //             head.appendChild(script);\r\n    //             onComplete && onComplete(script);\r\n    //         }\r\n    //     });\r\n    // }\r\n}\r\n\r\nexport let Tools: foTools = new foTools();\r\n","import { FunctionComponent } from 'react';\r\n\r\nclass foRuntimeTypes {\r\n    private _defaultRenderComponent: { [id: string]: FunctionComponent<any> } = {};\r\n\r\n    private _defaultRoute: { [id: string]: string } = {};\r\n\r\n    setDefaultRenderComponent(prefix: string, render: FunctionComponent<any>): void {\r\n        this._defaultRenderComponent[prefix] = render;\r\n    }\r\n\r\n    getDefaultRenderComponent(prefix: string): FunctionComponent<any> | null {\r\n        return this._defaultRenderComponent[prefix];\r\n    }\r\n\r\n    isRegisteredPrefix(prefix: string): boolean {\r\n        return this._defaultRenderComponent[prefix] ? true : false;\r\n    }\r\n\r\n    registeredDefaultRoute(prefix: string, path: string): string {\r\n        this._defaultRoute[prefix] = path;\r\n        return `/${path}`;\r\n    }\r\n\r\n    computeDefaultRoute(prefix: string, documentName: string, defaultPath: string): string {\r\n        const path = this._defaultRoute[prefix];\r\n        const route = path ? `/${path}/${documentName}` : defaultPath;\r\n        return route;\r\n    }\r\n}\r\n\r\nexport let RuntimeTypes: foRuntimeTypes = new foRuntimeTypes();\r\n","import { FunctionComponent } from 'react';\r\nimport { pull } from 'lodash';\r\nimport { Subject } from 'rxjs';\r\nimport { Tools } from './foTools';\r\n\r\nexport interface ModelBaseProperty {\r\n    getter: Function;\r\n    setter: Function;\r\n}\r\n\r\nexport interface ModelBaseListProperty extends ModelBaseProperty {\r\n    push: Function;\r\n    remove: Function;\r\n    labelForAdd: Function;\r\n    defaultDataForAdd: Function;\r\n}\r\n\r\nexport interface ModelBaseEnumProperty extends ModelBaseProperty {\r\n    push: Function;\r\n    clear: Function;\r\n    remove: Function;\r\n    getEnumValues: () => Subject<string[]>;\r\n    mutuallyExclusive: Function;\r\n    minRequiredSelections: Function;\r\n}\r\n\r\nexport class ModelBase {\r\n    override(data: any) {\r\n        if (data) {\r\n            Object.keys(data).forEach((key) => {\r\n                Object.defineProperty(this, key, {\r\n                    value: data[key],\r\n                    configurable: true,\r\n                    enumerable: true,\r\n                    writable: true\r\n                });\r\n            });\r\n        }\r\n    }\r\n\r\n    // https://stackoverflow.com/questions/37510640/how-to-get-property-value-from-a-javascript-object\r\n\r\n    getPropertyValue(object: any, dataToRetrieve: string): any {\r\n        dataToRetrieve.split('.').forEach((token: string) => {\r\n            if (object) object = object[token];\r\n        });\r\n        return object;\r\n    }\r\n\r\n    getProperty(propertyName: string, asArray?: boolean): ModelBaseProperty {\r\n        return {\r\n            getter: () => {\r\n                const result = this.getPropertyValue(this, propertyName);\r\n                return asArray && result ? result.join(' ') : result;\r\n            },\r\n            setter: (value: any) => {\r\n                const result = asArray ? [value] : value;\r\n                Object.defineProperty(this, propertyName, {\r\n                    value: result,\r\n                    configurable: true,\r\n                    enumerable: true,\r\n                    writable: true\r\n                });\r\n            }\r\n        };\r\n    }\r\n\r\n    getPropertyAsList(propertyName: string, defaultData?: any, defaultLabel?: string): ModelBaseListProperty {\r\n        return {\r\n            getter: () => {\r\n                const result = this.getPropertyValue(this, propertyName);\r\n                return result ? result : [];\r\n            },\r\n            setter: (value: any) => {\r\n                const result = value;\r\n                Object.defineProperty(this, propertyName, {\r\n                    value: result,\r\n                    configurable: true,\r\n                    enumerable: true,\r\n                    writable: true\r\n                });\r\n            },\r\n            push: (value: any) => {\r\n                const result = this.getPropertyValue(this, propertyName);\r\n                result.push(value);\r\n                Object.defineProperty(this, propertyName, {\r\n                    value: result,\r\n                    configurable: true,\r\n                    enumerable: true,\r\n                    writable: true\r\n                });\r\n            },\r\n            remove: (value: any) => {\r\n                const result = this.getPropertyValue(this, propertyName);\r\n                pull(result, value);\r\n                Object.defineProperty(this, propertyName, {\r\n                    value: result,\r\n                    configurable: true,\r\n                    enumerable: true,\r\n                    writable: true\r\n                });\r\n            },\r\n            labelForAdd: () => {\r\n                return defaultLabel || 'Add Item';\r\n            },\r\n            defaultDataForAdd: () => {\r\n                const list = this.getPropertyValue(this, propertyName);\r\n                return defaultData || (list.length > 0 && Object.assign({}, list[0])) || {};\r\n            }\r\n        };\r\n    }\r\n\r\n    getPropertyAsEnumList(propertyName: string, list: [], isME: boolean, minReq: number, defaultData?: any, defaultLabel?: string): ModelBaseEnumProperty {\r\n        return {\r\n            getter: () => {\r\n                const result = this.getPropertyValue(this, propertyName);\r\n                return result ? result : isME ? '' : [];\r\n            },\r\n            setter: (value: any) => {\r\n                let result = value;\r\n                if (!Tools.isEmpty(value) && Tools.isArray(value) && isME) {\r\n                    result = value[0];\r\n                }\r\n                Object.defineProperty(this, propertyName, {\r\n                    value: result,\r\n                    configurable: true,\r\n                    enumerable: true,\r\n                    writable: true\r\n                });\r\n            },\r\n            push: (value: any) => {\r\n                let result = this.getPropertyValue(this, propertyName);\r\n                if (isME) {\r\n                    result = value;\r\n                } else {\r\n                    result.push(value);\r\n                }\r\n                Object.defineProperty(this, propertyName, {\r\n                    value: result,\r\n                    configurable: true,\r\n                    enumerable: true,\r\n                    writable: true\r\n                });\r\n            },\r\n            clear: () => {\r\n                const result = [] as any[];\r\n                Object.defineProperty(this, propertyName, {\r\n                    value: result,\r\n                    configurable: true,\r\n                    enumerable: true,\r\n                    writable: true\r\n                });\r\n            },\r\n            remove: (value: any) => {\r\n                const result = this.getPropertyValue(this, propertyName);\r\n                pull(result, value);\r\n                Object.defineProperty(this, propertyName, {\r\n                    value: result,\r\n                    configurable: true,\r\n                    enumerable: true,\r\n                    writable: true\r\n                });\r\n            },\r\n            getEnumValues: () => {\r\n                const result = new Subject<string[]>();\r\n                setTimeout(() => {\r\n                    result.next(list);\r\n                    result.complete();\r\n                }, 10);\r\n                return result;\r\n            },\r\n            mutuallyExclusive: () => {\r\n                return isME;\r\n            },\r\n            minRequiredSelections: () => {\r\n                return minReq;\r\n            }\r\n        };\r\n    }\r\n\r\n    removeUndefined() {\r\n        for (let key in this) {\r\n            if (this[key] === undefined) {\r\n                delete this[key];\r\n            }\r\n        }\r\n        return this;\r\n    }\r\n\r\n    get myType(): string {\r\n        const comp: any = this.constructor;\r\n        return comp.name;\r\n    }\r\n    set myType(ignore: string) {}\r\n\r\n    toJSON(): any {\r\n        // Object.assign:  copy the values of all of the enumerable own properties from one or more source objects to a target object. Returns the target object.\r\n        return Object.assign({}, this);\r\n    }\r\n}\r\n\r\nexport interface IHashAny {\r\n    [key: string]: any;\r\n}\r\n\r\nexport interface IHashComponent<T> {\r\n    [key: string]: FunctionComponent<T>;\r\n}\r\n\r\nexport interface IHashStringNumber {\r\n    readonly [key: string]: string | number;\r\n}\r\n\r\nexport interface IHashString {\r\n    readonly [key: string]: string;\r\n}\r\n\r\nexport interface IHashNumber {\r\n    readonly [key: string]: number;\r\n}\r\n\r\n\r\nexport interface IListOfValueItem {\r\n    code: string | undefined;\r\n    description: string;\r\n    other?: any;\r\n}\r\n\r\nexport class ModelBaseEnumPropertyDefault {\r\n    getter = Tools.doNothing;\r\n    setter = Tools.doNothing;\r\n    push = Tools.doNothing;\r\n    clear = Tools.doNothing;\r\n    remove = Tools.doNothing;\r\n    getEnumValues = () => new Subject<string[]>();\r\n    mutuallyExclusive = Tools.doNothing;\r\n    minRequiredSelections = Tools.doNothing;\r\n}\r\n","import { IEnvVars, IServiceOptions } from '.';\r\nimport { ModelBase } from './model-base';\r\n\r\nexport interface IHashServiceOptions {\r\n    [key: string]: IServiceOptions;\r\n}\r\n\r\nclass EnvironmentClass extends ModelBase {\r\n    production: boolean = true;\r\n    e2eBaseURL: string = '';\r\n    rootAPIPath: string = '/api';\r\n    APIVersion: string = '/v1';\r\n    localMockPath: string = '/data';\r\n    componentLibrary: string = 'MUI';\r\n    version: string = '0.0.0';\r\n    didHealthCheckPass: boolean = false;\r\n    envVars: IEnvVars;\r\n    services: IHashServiceOptions;\r\n\r\n    featureflags: any = {\r\n        isHideDocumentInspector: true\r\n    };\r\n\r\n    constructor(properties?: any) {\r\n        super();\r\n        this.override(properties);\r\n    }\r\n}\r\n\r\nexport const Environment = new EnvironmentClass();\r\n","import { ModelBase } from './model-base';\r\nimport { Environment } from 'app/shared/environment';\r\n// IMPORTANT: in services you must import Toast from full path vs. from index because of Webpack bundling\r\nimport { Toast } from 'app/k2-mui-core/K2Alert';\r\n\r\nexport interface IEnvVars {\r\n    REACT_APP_BASE_URL: string;\r\n    REACT_APP_AWS_REGION: string;\r\n    REACT_APP_POOL_ID: string;\r\n    REACT_APP_CLIENT_ID: string;\r\n    REACT_APP_COOKIE_DOMAIN: string;\r\n    REACT_APP_COOKIE_SECURE: boolean;\r\n    REACT_APP_DOMAIN: string;\r\n}\r\n\r\nexport interface IServiceOptions {\r\n    serviceKey: string;\r\n    endpoint: string;\r\n    localDataPath?: string;\r\n    localMockData?: boolean;\r\n    forceLocalMock?: boolean;\r\n}\r\n\r\n\r\nexport class ServiceLocator extends ModelBase implements IServiceOptions {\r\n    serviceKey: string; // update config-local and config when you add a new service\r\n    endpoint: string;\r\n    localDataPath: string;\r\n    localMockData: boolean = false;\r\n    forceLocalMock: boolean = false;\r\n\r\n    constructor(properties?: IServiceOptions) {\r\n        super();\r\n        this.override(properties);\r\n\r\n        const found = Environment.services[this.serviceKey];\r\n        found && this.override(found)\r\n    }\r\n\r\n\r\n    public getUrl(): string {\r\n        let localMockData: boolean = this.localMockData;\r\n        let localDataPath: string = this.localDataPath;\r\n\r\n        if (localMockData) {\r\n            Toast.info(`Using MOCK DATA for ${this.serviceKey}`);\r\n            return `${Environment.localMockPath}${localDataPath}`;  \r\n        } else if ( this.forceLocalMock ) {\r\n            Toast.warning(`PENDING Service ${this.serviceKey}: FORCING MOCK DATA`);\r\n            return `${Environment.localMockPath}${localDataPath}`;\r\n        }\r\n\r\n        const longPath = `${Environment.envVars?.REACT_APP_BASE_URL}${Environment.rootAPIPath}${Environment.APIVersion}`;\r\n        const url = `${longPath}${this.endpoint}`;\r\n        return encodeURI(url);\r\n    }\r\n}\r\n","import { Observable, of } from 'rxjs';\r\nimport { AjaxResponse } from 'rxjs/ajax';\r\n\r\nimport { Constructable, FuncAny } from '.';\r\nimport { AppHttpService, IResponse,  HttpErrorResponse } from 'app/shared';\r\n// IMPORTANT: in services you must import Toast from full path vs. from index because of Webpack bundling\r\nimport { Toast } from 'app/k2-mui-core/K2Alert';\r\n\r\nexport class payloadHandler {\r\n\r\n    static success<T>(type: Constructable<T>, successResponse: AjaxResponse, mapFunc?: FuncAny): Observable<IResponse<T>> {\r\n        const res: IResponse<T> = successResponse.response;\r\n        res.payload = AppHttpService.mapToModel(type, res.payload, mapFunc);\r\n        if (res.status === 'pending') {\r\n            const warningMessage = `${res.status} ${res.message} ${successResponse.request.url}`;\r\n            Toast.warning(warningMessage);\r\n        }\r\n        return of<IResponse<T>>(res);\r\n    }\r\n\r\n    static getAnySuccess(successResponse: AjaxResponse): Observable<IResponse<any>> {\r\n        const res: IResponse<any> = successResponse.response;\r\n        if (res.status === 'pending') {\r\n            const warningMessage = `${res.status} ${res.message} ${successResponse.request.url}`;\r\n            Toast.warning(warningMessage);\r\n        }\r\n        return of<IResponse<any>>(res);\r\n    }\r\n\r\n\r\n    static error<T>(errorResponse: Readonly<HttpErrorResponse>): Observable<IResponse<T>> {\r\n        return of<IResponse<T>>({ ...AppHttpService.mapErrorResponse(errorResponse) });\r\n    }\r\n}\r\n\r\n","import { Observable, of, Subject } from 'rxjs';\r\nimport { switchMap, catchError } from 'rxjs/operators';\r\nimport { AjaxResponse } from 'rxjs/ajax';\r\nimport { CurrentUser, ModelBase } from '.';\r\nimport { Constructable, FuncAny } from '.';\r\nimport { ajaxGet, ajaxPost, ajaxPut } from 'rxjs/internal/observable/dom/AjaxObservable';\r\nimport { ServiceLocator } from './service-locator';\r\n\r\nimport { payloadHandler } from './payload-handler';\r\n// IMPORTANT: in services you must import Toast from full path vs. from index because of Webpack bundling\r\nimport { Toast } from 'app/k2-mui-core/K2Alert';\r\n\r\nexport interface IResponse<T> {\r\n    dateTime: string;\r\n    hasError: boolean;\r\n    status: string;\r\n    length: number;\r\n    message: string;\r\n    payload: Array<T>;\r\n    payloadType: string;\r\n    metadata: any;\r\n    error: any;\r\n}\r\n\r\n//TODO: see what rxjs error response returns\r\nexport interface HttpErrorResponse {\r\n    message: string;\r\n    error: string;\r\n    status: number;\r\n    statusText: string;\r\n}\r\n\r\n\r\n\r\nexport class AppHttpServiceClass {\r\n\r\n    static makeHeaders(additionalHeaders: any, contentType?: any) {\r\n        const token = CurrentUser?.Token.accessToken;\r\n        if (token) {\r\n            const bearerToken = { Authorization: `Bearer ${token}` };\r\n            return { ...bearerToken, ...additionalHeaders, ...contentType };\r\n        } else {\r\n            return { ...additionalHeaders, ...contentType };\r\n        }\r\n    }\r\n\r\n    mapToModel<T>(type: Constructable<T>, payload: Array<any>, func?: FuncAny): Array<T> {\r\n        const list = payload.map<T>((item) => {\r\n            const data = func ? func(item) : item;\r\n            return new type(data);\r\n        });\r\n        return list;\r\n    }\r\n\r\n    // mapErrorResponse prevents consumers of http services from directly handling HttpErrorResponses\r\n    mapErrorResponse<T>(error: HttpErrorResponse): IResponse<T> {\r\n        const formattedError: IResponse<T> = {\r\n            dateTime: new Date().toISOString(),\r\n            hasError: true,\r\n            status: 'error',\r\n            length: -1,\r\n            payload: [],\r\n            payloadType: '',\r\n            metadata: {},\r\n            message: error.message,\r\n            error\r\n        };\r\n        return formattedError;\r\n    }\r\n\r\n    public post$<T extends ModelBase>(type: Constructable<T>, serviceOptions: ServiceLocator, data: T, additionalHeaders?: any, func?: FuncAny): Subject<IResponse<T>> {\r\n        const subject = new Subject<IResponse<T>>();\r\n        const url = serviceOptions.getUrl();\r\n\r\n        const headers = AppHttpServiceClass.makeHeaders(additionalHeaders, { 'Content-Type': 'application/json' });\r\n\r\n        console.log('post$ url=', url);\r\n        ajaxPost(url, data, headers)\r\n            .pipe(\r\n                switchMap((ajaxRes: AjaxResponse) => {\r\n                    return payloadHandler.success(type, ajaxRes, func);\r\n                }),\r\n                catchError((error: HttpErrorResponse) => {\r\n                    console.log(JSON.stringify(data, undefined, 3));\r\n                    return payloadHandler.error<T>(error);\r\n                })\r\n            )\r\n            .subscribe(subject);\r\n\r\n        return subject;\r\n    }\r\n\r\n    public put$<T extends ModelBase>(type: Constructable<T>, serviceOptions: ServiceLocator, data: T, additionalHeaders?: any, func?: FuncAny): Subject<IResponse<T>> {\r\n        const subject = new Subject<IResponse<T>>();\r\n        const url = serviceOptions.getUrl();\r\n        console.log('put$ url=', url);\r\n\r\n        const headers = AppHttpServiceClass.makeHeaders(additionalHeaders);\r\n\r\n        ajaxPut(url, JSON.stringify(data), headers)\r\n            .pipe(\r\n                switchMap((ajaxRes: AjaxResponse) => {\r\n                    return payloadHandler.success(type, ajaxRes, func);\r\n                }),\r\n                catchError((error: HttpErrorResponse) => {\r\n                    return payloadHandler.error<T>(error);\r\n                })\r\n            )\r\n            .subscribe(subject);\r\n\r\n        return subject;\r\n    }\r\n\r\n    public get$<T extends ModelBase>(type: Constructable<T>, serviceOptions: ServiceLocator, additionalHeaders?: any, func?: FuncAny): Subject<IResponse<T>> {\r\n        const subject = new Subject<IResponse<T>>();\r\n        const url = serviceOptions.getUrl();\r\n\r\n        const headers = AppHttpServiceClass.makeHeaders(additionalHeaders);\r\n\r\n        console.log('get$ url', url);\r\n\r\n        ajaxGet(url, headers)\r\n            .pipe(\r\n                switchMap((ajaxRes: AjaxResponse) => {\r\n                    // The ajaxRes.response is a string when running unit tests using mock service worker.  That's the only time this code should be executed.\r\n                    if (typeof ajaxRes.response === 'string') {\r\n                        ajaxRes.response = JSON.parse(ajaxRes.response);\r\n                    }\r\n                    const responce = ajaxRes.response;\r\n                    // This if statement will re-run the query, but for mock data, if a path is supplied for mock data and the response has the pending status\r\n                    if (responce.status === 'pending') {\r\n                        if ( responce.length <= 0 && serviceOptions.localDataPath) {\r\n                            let options = new ServiceLocator({\r\n                                ...serviceOptions,\r\n                                forceLocalMock: true\r\n                            });\r\n                            return this.get$<T>(type, options, func);\r\n                        } else {\r\n                            Toast.warning(`${responce.length} records found: PENDING status may not be necessary`)\r\n                            return payloadHandler.success(type, ajaxRes, func);\r\n                        }     \r\n                    }\r\n                    return payloadHandler.success(type, ajaxRes, func);\r\n                }),\r\n                catchError((error: HttpErrorResponse) => {\r\n                    Toast.error(url, 'HTTP Issue');\r\n                    return payloadHandler.error<T>(error);\r\n                })\r\n            )\r\n            .subscribe(subject);\r\n\r\n        return subject;\r\n    }\r\n\r\n    public getAny$(serviceOptions: ServiceLocator, additionalHeaders?: any): Observable<IResponse<any>> {\r\n        const url = serviceOptions.getUrl();\r\n\r\n        console.log('getAny$ url', url);\r\n\r\n        const headers = AppHttpServiceClass.makeHeaders(additionalHeaders);\r\n\r\n        return ajaxGet(url, headers).pipe(\r\n            switchMap((ajaxRes: AjaxResponse) => {\r\n                // The ajaxRes.response is a string when running unit tests using mock service worker.  That's the only time this code should be executed.\r\n                if (typeof ajaxRes.response === 'string') {\r\n                    ajaxRes.response = JSON.parse(ajaxRes.response);\r\n                }\r\n\r\n                return payloadHandler.getAnySuccess(ajaxRes);\r\n            }),\r\n            catchError((error: HttpErrorResponse) => {\r\n                Toast.error(url, 'HTTP Issue');\r\n                return payloadHandler.error<any>(error);\r\n            })\r\n        );\r\n    }\r\n\r\n  \r\n\r\n    public rawFetch$(url:string, additionalHeaders?: any): Observable<any> {\r\n\r\n        const headers = AppHttpServiceClass.makeHeaders(additionalHeaders);\r\n\r\n        return ajaxGet(url, headers).pipe(\r\n            switchMap((ajaxRes: AjaxResponse) => {\r\n                // The ajaxRes.response is a string when running unit tests using mock service worker.  That's the only time this code should be executed.\r\n                if (typeof ajaxRes.response === 'string') {\r\n                    ajaxRes.response = JSON.parse(ajaxRes.response);\r\n                }\r\n                return of(ajaxRes.response);\r\n            }),\r\n            catchError((error: HttpErrorResponse) => {\r\n                Toast.error(url, 'HTTP Issue');\r\n                return of(error);\r\n            })\r\n        );\r\n    }\r\n\r\n}\r\n\r\nexport const AppHttpService = new AppHttpServiceClass();\r\n","import { ModelBase } from '.';\r\n\r\nclass Token {\r\n    accessToken: string;\r\n    idToken: string;\r\n    refreshToken: string;\r\n\r\n    public clear() {\r\n        this.accessToken = '';\r\n        this.idToken = '';\r\n        this.refreshToken = '';\r\n    }\r\n    get isValid() {\r\n        return this.accessToken?.length > 20;\r\n    }\r\n\r\n    public jwtTokenToUser(signInUserSession: any) {\r\n        this.accessToken = signInUserSession.accessToken.jwtToken;\r\n        this.idToken = signInUserSession.idToken.jwtToken;\r\n        this.refreshToken = signInUserSession.refreshToken.token;\r\n    }\r\n}\r\n\r\nexport class User extends ModelBase {\r\n    id: string;\r\n    roles: string[];\r\n    firstName?: string;\r\n    lastName?: string;\r\n    email: string;\r\n    password?: string;\r\n    phoneNumber?: string;\r\n    gender?: string;\r\n    isAuthenticated: boolean;\r\n    keycloak?: any;\r\n    username: string;\r\n\r\n    constructor(properties?: any) {\r\n        super();\r\n        this.override(properties);\r\n        this.firstName = properties?.firstName ?? '';\r\n        this.roles = properties?.roles ?? [];\r\n    }\r\n\r\n    hasRole(role: string = '') {\r\n        for (const item of role.split('|')) {\r\n            if (this.roles.includes(item)) {\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n\r\n    hasNoRole() {\r\n        if (!this.roles.length) {\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n\r\n    get persona() {\r\n        return `${this.firstName || this.userID} ${this.lastName || ''}`;\r\n    }\r\n\r\n    get userID() {\r\n        return this.email || this.id;\r\n    }\r\n\r\n    _token: Token | undefined;\r\n    get Token() {\r\n        if (!this._token) {\r\n            this._token = new Token();\r\n        }\r\n        return this._token;\r\n    }\r\n\r\n    isPasswordValid(password: string) {}\r\n\r\n    signOut() {\r\n        if (this._token) {\r\n            this._token.clear();\r\n            this._token = undefined;\r\n        }\r\n        this.isAuthenticated = false;\r\n        this.roles = ['ROLE_ANONYMOUS'];\r\n        this.firstName = 'Default';\r\n        this.lastName = 'User';\r\n    }\r\n\r\n    // jwtTokenToUser(signInUserSession: any): User {\r\n    //     this.Token.jwtTokenToUser(signInUserSession);\r\n\r\n    //     const decodedToken: any = this.Token.decode();\r\n    //     const userGroups = decodedToken['cognito:groups'];\r\n    //     const username = decodedToken['username'];\r\n\r\n    //     this.override({\r\n    //         isAuthenticated: true,\r\n    //         id: username,\r\n    //         firstName: username,\r\n    //         email: `${username}@fakemail.com`\r\n    //     });\r\n\r\n    //     var userRoles = new Array<string>();\r\n    //     userGroups &&\r\n    //         userGroups.forEach((group: string) => {\r\n    //             if (group.startsWith('ROLE_')) userRoles.push(group);\r\n    //         });\r\n    //     this.roles = userRoles;\r\n\r\n    //     PubSub.broadcast(Topics.TOKEN_STORED);\r\n    //     return this;\r\n    // }\r\n}\r\n\r\nexport class UserRBAC extends ModelBase {\r\n    user: User;\r\n    pathname: string;\r\n\r\n    constructor(properties?: any) {\r\n        super();\r\n        this.override(properties);\r\n        this.user = properties?.user ?? CurrentUser;\r\n        this.pathname = properties?.pathname ?? '/';\r\n    }\r\n\r\n    get canDisplayHomePage() {\r\n        return this.pathname !== '/home-page';\r\n    }\r\n\r\n    get canDisplayMyEstimatesPage() {\r\n        const result = this.user && this.user.hasRole('ROLE_SOLUTION_ARCHITECT|ROLE_DEVELOPER') ? true : false;\r\n        return result;\r\n    }\r\n\r\n    get canDisplayShoppingCart() {\r\n        const result = this.user && this.user.hasRole('ROLE_SOLUTION_ARCHITECT|ROLE_DEVELOPER') ? true : false;\r\n        return result;\r\n    }\r\n\r\n    get canDisplayEocPricingPage() {\r\n        const result = this.user && this.user.hasRole('ROLE_PUBLISHER|ROLE_EOC_PRICING|ROLE_FINANCIAL_ADMIN|ROLE_DEVELOPER') ? true : false;\r\n        return result;\r\n    }\r\n\r\n    get canDisplayServiceDeskPricingPage() {\r\n        const result = this.user && this.user.hasRole('ROLE_PUBLISHER|ROLE_PRICING|ROLE_SERVICE_DESK_PRICING|ROLE_MANAGER|ROLE_FINANCIAL_ADMIN|ROLE_DEVELOPER') ? true : false;\r\n        return result;\r\n    }\r\n\r\n    get canPublishPricingPage() {\r\n        const result = this.user && this.user.hasRole('ROLE_PUBLISHER|ROLE_FINANCIAL_ADMIN|ROLE_DEVELOPER') ? true : false;\r\n        return result;\r\n    }\r\n\r\n    get canViewImmutablePage() {\r\n        // const result = this.user && this.user.hasRole('DEVELOPER') ? true : false;\r\n        // return result;\r\n        return this.user && this.user.hasRole('ROLE_DEVELOPER');\r\n    }\r\n\r\n    get canViewPublisherDashboardPage() {\r\n        const result = this.user && this.user.hasRole('ROLE_PUBLISHER|ROLE_DEVELOPER|ROLE_MANAGER') ? true : false;\r\n        return result;\r\n    }\r\n\r\n    get canDisplayJSON() {\r\n        const result = this.user && this.user.hasRole('ROLE_DEVELOPER') ? true : false;\r\n        return result;\r\n    }\r\n\r\n    get isDisplayEstimateCart() {\r\n        const result = this.user && this.user.hasRole('ROLE_PUBLISHER|ROLE_SOLUTION_ARCHITECT|ROLE_DEVELOPER') ? true : false;\r\n        return result;\r\n    }\r\n\r\n    get isAllowedEditingRights() {\r\n        const result = this.user && this.user.hasRole('ROLE_PUBLISHER|ROLE_MANAGER|ROLE_DEVELOPER') ? true : false;\r\n        return result;\r\n    }\r\n\r\n    get isAllowedPublishingRights() {\r\n        const result = this.user && this.user.hasRole('ROLE_PUBLISHER|ROLE_DEVELOPER') ? true : false;\r\n        return result;\r\n    }\r\n\r\n    get canViewPricingInformation() {\r\n        return this.canDisplayServiceDeskPricingPage || this.canDisplayEocPricingPage;\r\n    }\r\n\r\n    get canAccessPath() {\r\n        if (this.pathname === '/estimate-dashboard-page') {\r\n            return this.canDisplayMyEstimatesPage;\r\n        } else if (this.pathname === '/components-page') {\r\n            return this.user.hasRole('ROLE_DEVELOPER');\r\n        } else if (this.pathname.startsWith('/edit/')) {\r\n            return this.isAllowedEditingRights;\r\n        } else if (this.pathname === '/eoc-pricing-page') {\r\n            return this.canDisplayEocPricingPage;\r\n        } else if (this.pathname === '/service-desk-pricing-page') {\r\n            return this.canDisplayServiceDeskPricingPage;\r\n        }\r\n        return false;\r\n    }\r\n\r\n    get canViewMenu() {\r\n        let result = false;\r\n        if (this.user && !this.user.hasRole('ROLE_ANONYMOUS') && this.user.roles.length > 0) {\r\n            result = true;\r\n        }\r\n        return result;\r\n    }\r\n}\r\n\r\nexport const CurrentUser = new User({\r\n    id: '',\r\n    firstName: '',\r\n    lastName: '',\r\n    roles: ['ROLE_ANONYMOUS'],\r\n    email: '',\r\n    phoneNumber: '',\r\n    gender: '',\r\n    isAuthenticated: false,\r\n    username: ''\r\n});\r\n","import React, { ReactElement, FunctionComponent } from 'react';\r\nimport MuiAlert, { AlertProps, Color } from '@material-ui/lab/Alert';\r\nimport { PubSub, Topics } from 'app/shared';\r\n\r\nexport interface K2AlertProps extends AlertProps {\r\n    message: string | JSX.Element | ReactElement;\r\n    open?: boolean;\r\n    autoHideDuration?: number;\r\n}\r\n\r\nexport const K2Alert: FunctionComponent<K2AlertProps> = ({ message, ...props }): ReactElement => {\r\n    const elevation = props.elevation || 6;\r\n    const variant = props.variant || 'filled';\r\n    return (\r\n        <MuiAlert elevation={elevation} variant={variant} {...props}>\r\n            {message}\r\n        </MuiAlert>\r\n    );\r\n};\r\n\r\nexport type AlertSeverity = 'error' | 'warning' | 'success';\r\n\r\nclass DisplayViewModel {\r\n    title?: string | null;\r\n    message: string;\r\n}\r\n\r\nconst Display: FunctionComponent<DisplayViewModel> = (props): ReactElement => {\r\n    return (\r\n        <div data-testid=\"toast-popup\">\r\n            {props.title && <h2>{props.title}</h2>}\r\n            <div>{props.message}</div>\r\n        </div>\r\n    );\r\n};\r\n\r\nclass ToastClass {\r\n    private display = (severity: Color = 'info', message: string = 'Generic Message', title?: string | null) => {\r\n        PubSub.broadcastPayload({ topic: Topics.TOAST_DISPLAYED, payload: [{ severity, message: <Display message={message} title={title} /> }] });\r\n    };\r\n    error = (message: string, title?: string | null) => {\r\n        this.display('error', message, title);\r\n    };\r\n    warning = (message: string, title?: string | null) => {\r\n        this.display('warning', message, title);\r\n    };\r\n    success = (message: string, title?: string | null) => {\r\n        this.display('success', message, title);\r\n    };\r\n    info = (message: string, title?: string | null) => {\r\n        this.display('info', message, title);\r\n    };\r\n}\r\n\r\nexport const Toast = new ToastClass();\r\n","import React, { FunctionComponent, ReactElement } from 'react';\r\n\r\nclass EmptyViewModel {}\r\n\r\nexport const EmptyRender: FunctionComponent<EmptyViewModel> = (): ReactElement => {\r\n    return <div>Empty component displayed if no component is available in K2Render class</div>;\r\n};\r\n","import React, { Fragment, FunctionComponent, ReactElement } from 'react';\r\n\r\nimport { createStyles, makeStyles } from '@material-ui/core/styles';\r\nimport { Accordion, AccordionSummary, AccordionDetails, Typography, Box } from '@material-ui/core';\r\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\r\nimport { Tools } from 'app/shared';\r\n\r\nconst useStyles = makeStyles((theme) =>\r\n    createStyles({\r\n        summary: {\r\n            justifyContent: 'space-between'\r\n        },\r\n        preBlock: {\r\n            backgroundColor: '#dcdcdc',\r\n            width: '100%'\r\n        }\r\n    })\r\n);\r\n\r\nexport class K2JsonPreviewProps {\r\n    title?: string;\r\n    isHidden?: boolean;\r\n    defaultExpanded?: boolean;\r\n    json: object;\r\n}\r\n\r\nexport const K2JsonPreview: FunctionComponent<K2JsonPreviewProps> = (props): ReactElement => {\r\n    const title = props.title || 'JSON Preview';\r\n    const classes = useStyles();\r\n    if (props.isHidden) {\r\n        return <Fragment />;\r\n    } else {\r\n        return (\r\n            <Fragment>\r\n                <Box mt={3} />\r\n                <Accordion defaultExpanded={props.defaultExpanded || false}>\r\n                    <AccordionSummary\r\n                        expandIcon={<ExpandMoreIcon />}\r\n                        aria-controls={`inspector-panel-${title}-content`}\r\n                        data-testid={`inspector-panel-${title}-header`}\r\n                        classes={{ content: classes.summary }}\r\n                    >\r\n                        <Typography variant=\"h3\">{title}</Typography>\r\n                    </AccordionSummary>\r\n                    <AccordionDetails>\r\n                        <pre className={classes.preBlock}>{Tools.stringify(props.json)}</pre>\r\n                    </AccordionDetails>\r\n                </Accordion>\r\n            </Fragment>\r\n        );\r\n    }\r\n};\r\n","import { createElement } from 'react';\r\nimport { EmptyRender } from 'app/elementals/empty';\r\n\r\nexport interface IContainerProps {}\r\nexport interface IRenderViewModel {}\r\n\r\nexport class K2Render<T> {\r\n    props: T = {} as T;\r\n    Component: React.FunctionComponent<T> = EmptyRender;\r\n\r\n    display(props?: T) {\r\n        if (props) {\r\n            this.props = props;\r\n        }\r\n        return createElement(this.Component, this.props);\r\n    }\r\n}\r\n","import React, { Fragment, FunctionComponent, ReactElement, useState } from 'react';\r\nimport { AgGridReact, AgGridReactProps } from 'ag-grid-react';\r\nimport './custom-ag-grid.scss';\r\nimport { RowNode, GridApi, ColDef, GridSizeChangedEvent, GridReadyEvent, NewColumnsLoadedEvent, ColumnApi, FirstDataRenderedEvent } from 'ag-grid-community';\r\nimport { Typography } from '@material-ui/core';\r\n\r\nexport interface K2ColumnDef extends ColDef {}\r\n\r\nexport interface K2GridProps extends AgGridReactProps {\r\n    columnDefs: K2ColumnDef[];\r\n    rowData: any;\r\n    title?: string;\r\n    deleteFunction?: any;\r\n    handleChangeSelection?: Function;\r\n    suppressRowClickSelection?: boolean;\r\n    height?: string;\r\n    minHeight?: string;\r\n    getRowHeight?: Function;\r\n    rowSelection?: string;\r\n    defaultColumnDef?: ColDef;\r\n    deleteButtonLabel?: string;\r\n    enableDelete?: boolean;\r\n    minWidth?: number;\r\n    isHideButtonBar?: boolean;\r\n    style?: object;\r\n    domLayout?: string;\r\n    setGridApi?: (event: GridApi) => void;\r\n    setColumnApi?: (event: ColumnApi) => void;\r\n    handleGridSizeChanged?: (event: GridSizeChangedEvent) => void;\r\n    handleNewColumnsLoaded?: (event: NewColumnsLoadedEvent) => void;\r\n}\r\n\r\nconst defaultColumnDef: ColDef = {\r\n    headerCheckboxSelection: false,\r\n    checkboxSelection: false,\r\n    suppressSizeToFit: true,\r\n    resizable: false,\r\n    filter: false,\r\n    sortable: true,\r\n    editable: false,\r\n    autoHeight: true\r\n};\r\n\r\nexport const K2Grid: FunctionComponent<K2GridProps> = (props): ReactElement => {\r\n    const rowSelection = props.rowSelection ? props.rowSelection : 'multiple';\r\n    let selectedRows = [];\r\n    const setApi = useState<GridApi | null>(null)[1];\r\n\r\n    const handleSelectionChanged = (params: any) => {\r\n        selectedRows = params.api.getSelectedRows();\r\n        if (props.handleChangeSelection) {\r\n            let isCallHandleChange = false as boolean;\r\n            const updatedRowData = params.api.getModel().rowsToDisplay.map((rowNode: RowNode) => {\r\n                if (rowNode.isSelected() === rowNode.data.selected) {\r\n                    // if no change to data, just return data; helps with grid initialization\r\n                    return rowNode.data;\r\n                } else {\r\n                    isCallHandleChange = true;\r\n                    return Object.assign({}, rowNode.data, { selected: rowNode.isSelected() });\r\n                }\r\n            });\r\n\r\n            if (isCallHandleChange === true) {\r\n                props.handleChangeSelection(updatedRowData, selectedRows, params);\r\n            }\r\n        }\r\n    };\r\n\r\n    const handleFirstDataRendered = (params: FirstDataRenderedEvent) => {\r\n        params.api.sizeColumnsToFit();\r\n        params.api.resetRowHeights();\r\n        setApi(params.api);\r\n        props.setGridApi && props.setGridApi(params.api);\r\n    };\r\n\r\n    const handleGridSizeChanged = (params: GridSizeChangedEvent) => {\r\n        params.api.sizeColumnsToFit();\r\n        props.handleGridSizeChanged && props.handleGridSizeChanged(params);\r\n    };\r\n\r\n    const handleNewColumnsLoaded = (params: NewColumnsLoadedEvent) => {\r\n        params.api.resetRowHeights();\r\n        params.api.sizeColumnsToFit();\r\n        props.handleNewColumnsLoaded && props.handleNewColumnsLoaded(params);\r\n    };\r\n\r\n    const handleGridReady = (params: GridReadyEvent) => {\r\n        setApi(params.api);\r\n        props.setGridApi && props.setGridApi(params.api);\r\n        props.setColumnApi && props.setColumnApi(params.columnApi);\r\n        window.setTimeout(() => {\r\n            params.api.forEachNode((rowNode: RowNode, index: number) => {\r\n                rowNode.setSelected(rowNode.data.selected);\r\n            });\r\n        }, 500);\r\n    };\r\n\r\n    const height = props.height ? props.height : '1000px';\r\n\r\n    return (\r\n        <Fragment>\r\n            {/* <div className={classes.root} style={Object.assign({}, { height: '100%', width: '100%' }, { ...props.style })}> */}\r\n            {Boolean(props.title) && (\r\n                <Fragment>\r\n                    <Typography variant=\"h2\">{props.title}</Typography>\r\n                    <br />\r\n                </Fragment>\r\n            )}\r\n            <div style={{ height: height, width: '100%', minWidth: props.minWidth || 300 }} className=\"ag-theme-custom\">\r\n                {/* <div style={{ height: 'calc(100% - 22px)', minHeight: minHeight }}> */}\r\n                <AgGridReact\r\n                    rowSelection={rowSelection}\r\n                    defaultColDef={Object.assign({}, defaultColumnDef, props.defaultColumnDef)}\r\n                    onSelectionChanged={handleSelectionChanged}\r\n                    onFirstDataRendered={handleFirstDataRendered}\r\n                    onGridSizeChanged={handleGridSizeChanged}\r\n                    onNewColumnsLoaded={handleNewColumnsLoaded}\r\n                    onGridReady={handleGridReady}\r\n                    singleClickEdit={true}\r\n                    suppressColumnVirtualisation={true}\r\n                    suppressRowClickSelection={true}\r\n                    {...props}\r\n                ></AgGridReact>\r\n                {/* </div> */}\r\n            </div>\r\n            {/* </div> */}\r\n        </Fragment>\r\n    );\r\n};\r\nK2Grid.defaultProps = { isHideButtonBar: true };\r\n","import { FunctionComponent, ReactElement, Fragment, MutableRefObject } from 'react';\r\nimport { K2Render } from 'app/k2-core/K2Render';\r\nimport { TrackedEntitySnapshot, TrackedEntityGeoLocation, IGridDefinitions } from 'app/models';\r\nimport { Cartesian3, Color, Material, NearFarScalar } from 'cesium';\r\nimport { BillboardGraphics, Entity, EntityDescription, Globe, LabelGraphics, PointGraphics, Polyline, PolylineCollection } from 'resium';\r\nimport { Viewer } from 'resium';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { Box } from '@material-ui/core';\r\nimport { K2Grid } from 'app/k2-mui-core/data-grid/ag-grid/K2Grid';\r\n\r\ninterface EntityPointsViewModel {\r\n    data: TrackedEntitySnapshot;\r\n    gridDefinitions: MutableRefObject<IGridDefinitions>;\r\n}\r\n\r\nconst styles = makeStyles((theme) => {\r\n    return {\r\n        viewer: {\r\n            position: 'relative'\r\n        },\r\n        display: {\r\n            border: '1px solid white',\r\n            backgroundColor: 'rgba(255,255,255,0.075)',\r\n            fontSize: '12px',\r\n            fontWeight: 700,\r\n            height: '75%',\r\n            paddingLeft: theme.spacing(3),\r\n            paddingRight: theme.spacing(3),\r\n            margin: theme.spacing(2),\r\n            overflowY: 'auto',\r\n            color: theme.palette.common.white,\r\n            position: 'absolute',\r\n            top: 0\r\n        }\r\n    };\r\n});\r\n\r\nexport class EntityPointsRender<T extends EntityPointsViewModel> extends K2Render<T> {\r\n    Component: FunctionComponent<T> = (props): ReactElement => {\r\n        const classes = styles();\r\n        if (!Boolean(props.data.utc)) {\r\n            return <div>Please Wait ...</div>;\r\n        }\r\n        const Self = this;\r\n\r\n        return (\r\n            <Fragment>\r\n                <Viewer timeline={true} fullscreenButton={false} className={classes.viewer}>\r\n                    <Globe enableLighting={true} />\r\n                    <Self.SatelliteEntity />\r\n                    <Self.VesselEntity />\r\n                    <Self.HitEntity />\r\n                    <Self.DisplayTable />\r\n                </Viewer>\r\n                <Box mt={4}>\r\n                    <h4>{props.data.utc}</h4>\r\n                    <K2Grid {...props.gridDefinitions.current} />\r\n                </Box>\r\n            </Fragment>\r\n        );\r\n    };\r\n    SatelliteEntity: FunctionComponent = (): ReactElement => {\r\n        const Self = this;\r\n        const scaleByDistance = new NearFarScalar(1.5e2, 16, 8.0e6, 0.5);\r\n        return (\r\n            <Fragment>\r\n                {this.props.data.satellites.map((satellite) => {\r\n                    return (\r\n                        <Entity key={`satellite-${satellite.id}`} id={`satellite-${satellite.id}`} name={`Satellite #${satellite.id}`} position={satellite.worldLocation}>\r\n                            <Self.Description {...satellite} />\r\n                            <LabelGraphics text={`${satellite.id}`} eyeOffset={new Cartesian3(1e6, 0, 0)} scaleByDistance={scaleByDistance} />\r\n                            <BillboardGraphics image=\"/images/satellite0-64.png\" scaleByDistance={scaleByDistance} />\r\n                        </Entity>\r\n                    );\r\n                })}\r\n            </Fragment>\r\n        );\r\n    };\r\n    VesselEntity: FunctionComponent = (): ReactElement => {\r\n        const Self = this;\r\n        return (\r\n            <Fragment>\r\n                {this.props.data.vessels.map((vessel, index) => {\r\n                    return (\r\n                        <Entity key={`vessel-entity-${index}`} name={`Vessel #${vessel.id}`} position={vessel.worldLocation}>\r\n                            <Self.Description {...vessel} />\r\n                            <PointGraphics pixelSize={8} color={Color.PLUM} />\r\n                        </Entity>\r\n                    );\r\n                })}\r\n            </Fragment>\r\n        );\r\n    };\r\n    HitEntity: FunctionComponent = (): ReactElement => {\r\n        return (\r\n            <Fragment>\r\n                {this.props.data.hits.map((hit, index) => {\r\n                    let satelliteWorldLocation = hit.satellite.worldLocation;\r\n                    let vesselWorldLocation = hit.vessel.worldLocation;\r\n                    const color = hit.hit ? { color: Color.YELLOW } : { color: Color.LAVENDER };\r\n                    const material = Material.fromType('Color', color);\r\n\r\n                    return (\r\n                        <PolylineCollection key={`s-v-polyline-${index}`}>\r\n                            <Polyline positions={[satelliteWorldLocation, vesselWorldLocation]} material={material} />\r\n                        </PolylineCollection>\r\n                    );\r\n                })}\r\n            </Fragment>\r\n        );\r\n    };\r\n\r\n    Description: FunctionComponent<Partial<TrackedEntityGeoLocation>> = (props): ReactElement => {\r\n        return (\r\n            <EntityDescription>\r\n                {props.targets?.map((target) => {\r\n                    return <div key={`${target?.id}`}>{target?.id}</div>;\r\n                })}\r\n                <h1>{props.lat}</h1>\r\n                <h1>{props.lon}</h1>\r\n                {Boolean(props.alt) && <h1>{props.alt}</h1>}\r\n            </EntityDescription>\r\n        );\r\n    };\r\n    DisplayTable: FunctionComponent = (): ReactElement => {\r\n        const classes = styles();\r\n\r\n        return (\r\n            <div className={classes.display}>\r\n                {this.props.data.satellites\r\n                    .filter((satellite) => {\r\n                        return Boolean(satellite.targets.length);\r\n                    })\r\n                    .map((satellite) => {\r\n                        return (\r\n                            <Box key={`display-satellite-${satellite.id}`} my={1}>\r\n                                <div>Satellite {satellite.id} can see Vessels:</div>\r\n                                {satellite.targets.map((target) => {\r\n                                    return <div key={`satellite-target-${satellite.id}-${target.id}`}>{target.id}</div>;\r\n                                })}\r\n                            </Box>\r\n                        );\r\n                    })}\r\n            </div>\r\n        );\r\n    };\r\n}\r\n","import { ReactElement, useMemo } from 'react';\r\nimport { Constructable } from 'app/shared';\r\nimport { K2Render } from 'app/k2-core/K2Render';\r\nimport { K2Container } from 'app/k2-core/K2Container';\r\n\r\nexport const useContainerClass = <S, T extends K2Container<S>>(Impl: Constructable<T>, props: S): ReactElement => {\r\n    return useMemo(() => new Impl(), [Impl]).display(props);\r\n};\r\n\r\nexport const useRenderClass = <T extends K2Render<any>>(Impl: Constructable<T>): T => {\r\n    return useMemo(() => {\r\n        return new Impl();\r\n    }, [Impl]);\r\n};\r\n","import { ColDef, ValueFormatterParams } from 'ag-grid-community';\r\nimport { ModelBase } from 'app/shared';\r\nimport { JulianDate, Cartesian3 } from 'cesium';\r\n\r\ninterface ITrackedEntityGeoLocation {\r\n    id: number;\r\n    lat: number;\r\n    lon: number;\r\n    alt: number;\r\n}\r\n\r\ninterface ITrackedEntityPair {\r\n    sat_id: TrackedEntityGeoLocation['id'];\r\n    ves_id: TrackedEntityGeoLocation['id'];\r\n    azimuth: number;\r\n    elevation: number;\r\n    range: number;\r\n    hit: boolean;\r\n}\r\n\r\nexport class TrackedEntityGeoLocation extends ModelBase implements ITrackedEntityGeoLocation {\r\n    id: number;\r\n    lat: number;\r\n    lon: number;\r\n    alt: number;\r\n    targets: TrackedEntityGeoLocation[] = [];\r\n    locationsByHour: Cartesian3[] = [];\r\n\r\n    addTarget(target: TrackedEntityGeoLocation) {\r\n        this.targets.push(target);\r\n    }\r\n\r\n    purge() {\r\n        this.targets = [];\r\n    }\r\n\r\n    get worldLocation(): Cartesian3 {\r\n        return Cartesian3.fromDegrees(this.lon, this.lat, this.alt);\r\n    }\r\n\r\n    verifyAltitude() {\r\n        const p1 = Cartesian3.fromDegrees(this.lon, this.lat, this.alt);\r\n        const p2 = Cartesian3.fromDegrees(this.lon, this.lat, 0);\r\n        const dist = Cartesian3.distance(p1, p2);\r\n\r\n        alert(`${this.alt}  ===  ${dist}`);\r\n    }\r\n\r\n    constructor(properties?: ITrackedEntityGeoLocation) {\r\n        super();\r\n        this.override(properties);\r\n\r\n        //this.verifyAltitude();\r\n    }\r\n}\r\n\r\nexport class Satellite extends TrackedEntityGeoLocation {\r\n    extraAlt: number = 0;\r\n\r\n    get worldLocation(): Cartesian3 {\r\n        return Cartesian3.fromDegrees(this.lon, this.lat, this.alt + this.extraAlt);\r\n    }\r\n\r\n    constructor(properties?: any) {\r\n        super();\r\n        this.override(properties);\r\n    }\r\n}\r\nexport class Vessel extends TrackedEntityGeoLocation {\r\n    constructor(properties?: any) {\r\n        super();\r\n        this.override(properties);\r\n    }\r\n}\r\n\r\nclass TrackedEntityPair extends ModelBase implements ITrackedEntityPair {\r\n    sat_id: TrackedEntityGeoLocation['id'];\r\n    ves_id: TrackedEntityGeoLocation['id'];\r\n    azimuth: number;\r\n    elevation: number;\r\n    range: number;\r\n    hit: boolean;\r\n    satellite: Satellite | any;\r\n    vessel: Vessel | any;\r\n\r\n    get startEndWorldLocation(): Cartesian3[] {\r\n        return [this.satellite.worldLocation, this.vessel.worldLocation];\r\n    }\r\n\r\n    purge() {\r\n        this.satellite = null;\r\n        this.vessel = null;\r\n    }\r\n\r\n    verifyRange() {\r\n        const p1 = this.satellite.worldLocation;\r\n        const p2 = this.vessel.worldLocation;\r\n        const dist = Cartesian3.distance(p1, p2);\r\n\r\n        alert(`${this.range}  ===  ${dist}`);\r\n    }\r\n\r\n    constructor(properties?: ITrackedEntityPair) {\r\n        super();\r\n        this.override(properties);\r\n    }\r\n}\r\n\r\ninterface ITrackedEntitySnapshot {\r\n    utc: string;\r\n    satellites: Satellite[];\r\n    vessels: Vessel[];\r\n    pairs: Record<string, TrackedEntityPair>;\r\n}\r\n\r\nexport class TrackedEntitySnapshot extends ModelBase implements ITrackedEntitySnapshot {\r\n    utc: string;\r\n    satellites: Satellite[];\r\n    vessels: Vessel[];\r\n    pairs: Record<string, TrackedEntityPair>;\r\n    //we are only tracking hits\r\n    hits: TrackedEntityPair[];\r\n    sateliteLookUp: Record<number, Satellite> = {};\r\n    vesselLookUp: Record<number, Vessel> = {};\r\n\r\n    get startTime(): JulianDate {\r\n        return JulianDate.fromIso8601(this.utc);\r\n    }\r\n\r\n    purge() {\r\n        this.satellites.forEach((item) => item.purge());\r\n        this.vessels.forEach((item) => item.purge());\r\n        this.hits.forEach((item) => item.purge());\r\n\r\n        this.sateliteLookUp = {};\r\n        this.vesselLookUp = {};\r\n    }\r\n\r\n    constructor(properties?: ITrackedEntitySnapshot) {\r\n        super();\r\n        this.override(properties);\r\n\r\n        this.satellites =\r\n            properties?.satellites.map((satelliteSpec: Satellite) => {\r\n                return new Satellite(satelliteSpec);\r\n            }) || [];\r\n\r\n        this.satellites.forEach((item) => {\r\n            this.sateliteLookUp[item.id] = item;\r\n        });\r\n\r\n        this.vessels =\r\n            properties?.vessels.map((vesselSpec: Vessel) => {\r\n                return new Vessel(vesselSpec);\r\n            }) || [];\r\n\r\n        this.vessels.forEach((item) => {\r\n            this.vesselLookUp[item.id] = item;\r\n        });\r\n\r\n        this.hits =\r\n            Object.values(properties?.pairs || {})\r\n                .filter((pairSpec: TrackedEntityPair) => {\r\n                    return pairSpec.hit;\r\n                })\r\n                .map((pairSpec: TrackedEntityPair) => {\r\n                    return new TrackedEntityPair(pairSpec);\r\n                }) || [];\r\n\r\n        this.hits.forEach((item) => {\r\n            item.satellite = this.sateliteLookUp[item.sat_id];\r\n            item.vessel = this.vesselLookUp[item.ves_id];\r\n            item.satellite.addTarget(item.vessel);\r\n            item.vessel.addTarget(item.satellite);\r\n        });\r\n    }\r\n}\r\n\r\nexport interface IGridDefinitions {\r\n    rowData: any[];\r\n    columnDefs: ColDef[];\r\n}\r\n\r\nclass GridDefinitionsClass {\r\n    private getIdListFormatter() {\r\n        return (params: ValueFormatterParams) => {\r\n            return params.value\r\n                .map((vessel: Vessel) => {\r\n                    return vessel.id;\r\n                })\r\n                .join(',\\n');\r\n        };\r\n    }\r\n    getSnapshotDefinitions(snapshot: TrackedEntitySnapshot): { rowData: any[]; columnDefs: ColDef[] } {\r\n        return {\r\n            rowData: snapshot.satellites,\r\n            columnDefs: [\r\n                { field: 'id', headerName: 'Satellite ID' },\r\n                {\r\n                    field: 'targets',\r\n                    headerName: 'Can See Vessels',\r\n                    valueFormatter: this.getIdListFormatter()\r\n                },\r\n                { field: 'lat', headerName: 'Latitude' },\r\n                { field: 'lon', headerName: 'Longitude' },\r\n                { field: 'alt', headerName: 'Altitude' }\r\n            ]\r\n        };\r\n    }\r\n\r\n    getPathsOverTimeDefinitions(snapshots: TrackedEntitySnapshot[], index: number): { rowData: any[]; columnDefs: ColDef[] } {\r\n        if (Boolean(snapshots[index])) {\r\n            return {\r\n                rowData: snapshots[index].satellites,\r\n                columnDefs: [\r\n                    { field: 'id', headerName: 'Satellite ID' },\r\n                    {\r\n                        autoHeight: true,\r\n                        field: 'targets',\r\n                        headerName: 'Can See Vessels',\r\n                        valueFormatter: this.getIdListFormatter()\r\n                    },\r\n                    { field: 'lat', headerName: 'Latitude' },\r\n                    { field: 'lon', headerName: 'Longitude' },\r\n                    { field: 'alt', headerName: 'Altitude' }\r\n                ]\r\n            };\r\n        } else {\r\n            return { rowData: [], columnDefs: [] };\r\n        }\r\n    }\r\n}\r\n\r\nexport const GridDefinitions = new GridDefinitionsClass();\r\n","import { FunctionComponent, ReactElement, useState, useRef, useEffect } from 'react';\r\nimport { EntityPointsRender } from './entity-points.render';\r\nimport { useRenderClass } from 'app/shared/hooks';\r\nimport { APIService } from 'app/pages';\r\nimport { TrackedEntitySnapshot, IGridDefinitions, GridDefinitions } from 'app/models';\r\nimport { Subscription } from 'rxjs';\r\nimport { PubSub, Tools, Topics } from 'app/shared';\r\n\r\nexport const EntityPoints: FunctionComponent = (props): ReactElement => {\r\n    const [data, setData] = useState<TrackedEntitySnapshot>(new TrackedEntitySnapshot());\r\n    const setRefreshMs = useState<number>(0)[1];\r\n    const previousUtc = useRef<string>('INIT');\r\n    const gridDefinitions = useRef<IGridDefinitions>({ rowData: [], columnDefs: [] });\r\n\r\n    const utc = data.utc;\r\n    useEffect(() => {\r\n        let s: Subscription;\r\n        const service = new APIService();\r\n        if (utc !== previousUtc.current) {\r\n            const endpoint = service.getTrackedEntitySnapshot$();\r\n            // const endpoint = service.getDistanceTest$();\r\n            s = endpoint.subscribe((localData: TrackedEntitySnapshot) => {\r\n                previousUtc.current = localData.utc;\r\n                gridDefinitions.current = GridDefinitions.getSnapshotDefinitions(localData);\r\n                setData(localData);\r\n            });\r\n        }\r\n        return () => {\r\n            //data.purge();\r\n            s && s.unsubscribe();\r\n        };\r\n    }, [utc, previousUtc, setData, gridDefinitions]);\r\n\r\n    useEffect(() => {\r\n        let s: Subscription;\r\n        s = PubSub.pubSub$().subscribe((topic: Topics) => {\r\n            if (topic === Topics.TIME_INDEX_CHANGED) {\r\n                setRefreshMs(Tools.now());\r\n            }\r\n        });\r\n        return () => {\r\n            s && s.unsubscribe();\r\n        };\r\n    });\r\n\r\n    const Render = useRenderClass(EntityPointsRender);\r\n    Render.props = { data, gridDefinitions };\r\n    return Render.display();\r\n};\r\n","import { FunctionComponent, ReactElement } from 'react';\r\nimport { K2Render } from 'app/k2-core/K2Render';\r\nimport { EntityPoints } from 'app/pages/home-page/entity-points.container';\r\n\r\ninterface HomePageViewModel {}\r\nexport class HomePageRender<T extends HomePageViewModel> extends K2Render<T> {\r\n    Component: FunctionComponent<T> = (): ReactElement => {\r\n        return (\r\n            <div>\r\n                <h1>One Snapshot</h1>\r\n                <EntityPoints />\r\n            </div>\r\n        );\r\n    };\r\n}\r\n","import { FunctionComponent, ReactElement } from 'react';\r\nimport { HomePageRender } from './home-page.render';\r\nimport { useRenderClass } from 'app/shared/hooks';\r\n\r\nexport const HomePage: FunctionComponent = (props): ReactElement => {\r\n    const Render = useRenderClass(HomePageRender);\r\n    return Render.display();\r\n};\r\n","import { FunctionComponent, ReactElement, Fragment } from 'react';\r\nimport { K2Render } from 'app/k2-core/K2Render';\r\nimport { Vessel } from 'app/models';\r\nimport { Color } from 'cesium';\r\nimport { Entity, Globe, PointGraphics } from 'resium';\r\nimport { Viewer } from 'resium';\r\n\r\ninterface VesselTrackPointsViewModel {\r\n    data: Vessel[];\r\n}\r\n\r\nexport class VesselTrackPointsRender<T extends VesselTrackPointsViewModel> extends K2Render<T> {\r\n    Component: FunctionComponent<T> = (props): ReactElement => {\r\n        if (Boolean(props.data?.length === 0)) {\r\n            return <div>Please Wait ...</div>;\r\n        }\r\n        const Self = this;\r\n        return (\r\n            <Fragment>\r\n                <Viewer timeline={true} fullscreenButton={false}>\r\n                    <Globe enableLighting={true} />\r\n                    <Self.VesselTrackEntity />\r\n                </Viewer>\r\n            </Fragment>\r\n        );\r\n    };\r\n\r\n    VesselTrackEntity: FunctionComponent = (): ReactElement => {\r\n        return (\r\n            <Fragment>\r\n                {this.props.data.map((vessel, index) => {\r\n                    return (\r\n                        <Entity key={`vessel-entity-${index}`} name={`Vessel #${vessel.id}`} position={vessel.worldLocation}>\r\n                            <PointGraphics pixelSize={10} color={Color.YELLOW} />\r\n                        </Entity>\r\n                    );\r\n                })}\r\n            </Fragment>\r\n        );\r\n    };\r\n}\r\n","import { FunctionComponent, ReactElement, useState, useEffect } from 'react';\r\nimport { VesselTrackPointsRender } from './vesseltrack-points.render';\r\nimport { useRenderClass } from 'app/shared/hooks';\r\nimport { APIService } from 'app/pages';\r\nimport { Vessel } from 'app/models';\r\nimport { Subscription } from 'rxjs';\r\n\r\nexport const VesselTracks: FunctionComponent = (): ReactElement => {\r\n    const [data, setData] = useState<Vessel[]>([]);\r\n\r\n    useEffect(() => {\r\n        let s: Subscription;\r\n        const service = new APIService();\r\n        if (data?.length === 0) {\r\n            const endpoint = service.getShipTracks$();\r\n            s = endpoint.subscribe((localData: Vessel[]) => {\r\n                setData(localData);\r\n            });\r\n        }\r\n        return () => {\r\n            //data.purge();\r\n            s && s.unsubscribe();\r\n        };\r\n    }, [data, setData]);\r\n\r\n    const Render = useRenderClass(VesselTrackPointsRender);\r\n    Render.props = { data };\r\n    return Render.display();\r\n};\r\n","import { FunctionComponent, ReactElement } from 'react';\r\nimport { K2Render } from 'app/k2-core/K2Render';\r\nimport React from 'react';\r\n\r\nimport { VesselTracks } from './vesseltrack-points.container';\r\n\r\ninterface Example1PageViewModel {}\r\n\r\nexport class Example1PageRender<T extends Example1PageViewModel> extends K2Render<T> {\r\n    Component: FunctionComponent<T> = (): ReactElement => {\r\n        return (\r\n            <div>\r\n                <h1>Tracking Ship ALASKA SPIRIT</h1>\r\n                <VesselTracks />\r\n            </div>\r\n        );\r\n    };\r\n}\r\n","import { FunctionComponent, ReactElement } from 'react';\r\nimport { Example1PageRender } from './example-1-page.render';\r\nimport { useRenderClass } from 'app/shared/hooks';\r\n\r\nexport const Example1Page: FunctionComponent = (props): ReactElement => {\r\n    const Render = useRenderClass(Example1PageRender);\r\n    return Render.display();\r\n};\r\n","import { JulianDate, Timeline as CesiumTimeline } from 'cesium';\r\nimport { createCesiumComponent } from 'resium';\r\n\r\nexport const Timeline: any = createCesiumComponent<CesiumTimeline, { startTime: JulianDate; stopTime: JulianDate }>({\r\n    name: 'Timeline',\r\n    create(context, props) {\r\n        if (!context.viewer?.timeline) return;\r\n        const element = context.viewer.timeline;\r\n        element.zoomTo(props.startTime, props.stopTime);\r\n        return element;\r\n    },\r\n    destroy(context) {\r\n        !context.isDestroyed && context.destroy();\r\n    }\r\n});\r\n","import { FunctionComponent, ReactElement, Fragment, MutableRefObject } from 'react';\r\nimport { K2Render } from 'app/k2-core/K2Render';\r\nimport { TrackedEntitySnapshot, TrackedEntityGeoLocation, IGridDefinitions } from 'app/models';\r\nimport { Cartesian3, Clock as CesiumClock, ClockRange, ClockStep, Color, JulianDate, Material, NearFarScalar } from 'cesium';\r\nimport { BillboardGraphics, Clock, Entity, EntityDescription, Globe, LabelGraphics, PointGraphics, Polyline, PolylineCollection } from 'resium';\r\nimport { Viewer } from 'resium';\r\nimport { Timeline } from 'app/elementals/Timeline';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { Box } from '@material-ui/core';\r\nimport { K2Grid } from 'app/k2-mui-core/data-grid/ag-grid';\r\n\r\ninterface SatelliteVesselTimelineViewModel {\r\n    data: TrackedEntitySnapshot[];\r\n    index: number;\r\n    setIndex: Function;\r\n    gridDefinitions: MutableRefObject<IGridDefinitions>;\r\n}\r\n\r\nconst styles = makeStyles((theme) => {\r\n    return {\r\n        viewer: {\r\n            position: 'relative'\r\n        },\r\n        display: {\r\n            border: '1px solid white',\r\n            backgroundColor: 'rgba(255,255,255,0.075)',\r\n            fontSize: '12px',\r\n            fontWeight: 700,\r\n            height: '75%',\r\n            paddingLeft: theme.spacing(3),\r\n            paddingRight: theme.spacing(3),\r\n            margin: theme.spacing(2),\r\n            overflowY: 'auto',\r\n            color: theme.palette.common.white,\r\n            position: 'absolute',\r\n            top: 0\r\n        }\r\n    };\r\n});\r\n\r\nexport class SatelliteVesselTimelineRender<T extends SatelliteVesselTimelineViewModel> extends K2Render<T> {\r\n    currentSnapshot: TrackedEntitySnapshot;\r\n    dataPoints: TrackedEntitySnapshot[];\r\n    start: JulianDate;\r\n    finish: JulianDate;\r\n    onTickFunc = (clock: CesiumClock) => {\r\n        const num = JulianDate.secondsDifference(clock.currentTime, this.start);\r\n        const den = JulianDate.secondsDifference(this.finish, this.start);\r\n        let localIndex = Math.floor(this.dataPoints.length * (num / den));\r\n\r\n        if (num > den) {\r\n            localIndex = 0;\r\n        }\r\n        if (localIndex !== this.props.index) {\r\n            this.props.setIndex(localIndex);\r\n        }\r\n    };\r\n\r\n    Component: FunctionComponent<T> = (props): ReactElement => {\r\n        if (Boolean(props.data?.length === 0)) {\r\n            return <div>Please Wait ...</div>;\r\n        }\r\n        const classes = styles();\r\n        const Self = this;\r\n        if (this.start === undefined) {\r\n            this.dataPoints = props.data;\r\n            this.start = this.dataPoints[0].startTime;\r\n            this.finish = this.dataPoints[this.dataPoints.length - 1].startTime;\r\n        }\r\n\r\n        this.currentSnapshot = this.dataPoints[props.index];\r\n        const current = this.currentSnapshot.startTime;\r\n\r\n        return (\r\n            <Fragment>\r\n                <Viewer timeline={true} fullscreenButton={false} className={classes.viewer}>\r\n                    <Globe enableLighting={true} />\r\n                    <Clock\r\n                        startTime={this.start}\r\n                        currentTime={current}\r\n                        stopTime={this.finish}\r\n                        clockRange={ClockRange.LOOP_STOP}\r\n                        clockStep={ClockStep.SYSTEM_CLOCK_MULTIPLIER}\r\n                        multiplier={120} // how much time to advance each tick\r\n                        shouldAnimate={false}\r\n                        onTick={this.onTickFunc}\r\n                    />\r\n                    <Timeline startTime={this.start} stopTime={this.finish} />\r\n                    <Self.SatelliteEntity />\r\n                    <Self.VesselEntity />\r\n                    <Self.HitEntity />\r\n                    <Self.DisplayTable />\r\n                </Viewer>\r\n\r\n                <Box mt={4}>\r\n                    <h4>{this.dataPoints[props.index].utc}</h4>\r\n                    <K2Grid {...props.gridDefinitions.current} />\r\n                </Box>\r\n            </Fragment>\r\n        );\r\n    };\r\n\r\n    SatelliteEntity: FunctionComponent = (props): ReactElement => {\r\n        const Self = this;\r\n        const scaleByDistance = new NearFarScalar(1.5e2, 16, 8.0e6, 0.5);\r\n        return (\r\n            <Fragment>\r\n                {this.currentSnapshot?.satellites.map((satellite, index) => {\r\n                    return (\r\n                        <Entity key={`satellite-${satellite.id}`} id={`satellite-${satellite.id}`} name={`Satellite #${satellite.id}`} position={satellite.worldLocation}>\r\n                            <Self.Description {...satellite} />\r\n                            <LabelGraphics text={`${satellite.id}`} eyeOffset={new Cartesian3(1e6, 0, 0)} scaleByDistance={scaleByDistance} />\r\n                            <BillboardGraphics image=\"/images/satellite0-64.png\" scaleByDistance={scaleByDistance} />\r\n                        </Entity>\r\n                    );\r\n                })}\r\n            </Fragment>\r\n        );\r\n    };\r\n\r\n    VesselEntity: FunctionComponent = (props): ReactElement => {\r\n        const Self = this;\r\n        return (\r\n            <Fragment>\r\n                {this.currentSnapshot?.vessels.map((vessel, index) => {\r\n                    return (\r\n                        <Entity key={`vessel-entity-${index}`} name={`Vessel #${vessel.id}`} position={vessel.worldLocation}>\r\n                            <Self.Description {...vessel} />\r\n                            <PointGraphics pixelSize={8} color={Color.PLUM} />\r\n                        </Entity>\r\n                    );\r\n                })}\r\n            </Fragment>\r\n        );\r\n    };\r\n\r\n    HitEntity: FunctionComponent = (props): ReactElement => {\r\n        return (\r\n            <Fragment>\r\n                {this.currentSnapshot?.hits.map((hit, index) => {\r\n                    let satelliteWorldLocation = hit.satellite.worldLocation;\r\n                    let vesselWorldLocation = hit.vessel.worldLocation;\r\n                    const color = hit.hit ? { color: Color.YELLOW } : { color: Color.LAVENDER };\r\n                    const material = Material.fromType('Color', color);\r\n\r\n                    return (\r\n                        <PolylineCollection key={`s-v-polyline-${index}`}>\r\n                            <Polyline positions={[satelliteWorldLocation, vesselWorldLocation]} material={material} />\r\n                        </PolylineCollection>\r\n                    );\r\n                })}\r\n            </Fragment>\r\n        );\r\n    };\r\n\r\n    Description: FunctionComponent<Partial<TrackedEntityGeoLocation>> = (props): ReactElement => {\r\n        return (\r\n            <EntityDescription>\r\n                {props.targets?.map((target) => {\r\n                    return <div key={`${target?.id}`}>{target?.id}</div>;\r\n                })}\r\n                <h1>{props.lat}</h1>\r\n                <h1>{props.lon}</h1>\r\n                {Boolean(props.alt) && <h1>{props.alt}</h1>}\r\n            </EntityDescription>\r\n        );\r\n    };\r\n\r\n    DisplayTable: FunctionComponent = (props): ReactElement => {\r\n        const classes = styles();\r\n\r\n        const displayItems = this.currentSnapshot?.satellites\r\n            .filter((satellite) => {\r\n                return Boolean(satellite.targets.length);\r\n            })\r\n            .map((satellite) => {\r\n                return (\r\n                    <Box key={`display-satellite-${satellite.id}`} my={1}>\r\n                        <div>Satellite {satellite.id} can see Vessels:</div>\r\n                        {satellite.targets.map((target) => {\r\n                            return <div key={`satellite-target-${satellite.id}-${target.id}`}>{target.id}</div>;\r\n                        })}\r\n                    </Box>\r\n                );\r\n            });\r\n\r\n        return Boolean(displayItems.length) ? <div className={classes.display}>{displayItems}</div> : <Fragment />;\r\n    };\r\n}\r\n","import { FunctionComponent, ReactElement, useState, useEffect, useRef } from 'react';\r\nimport { SatelliteVesselTimelineRender } from './satellite-vessel-timeline.render';\r\nimport { useRenderClass } from 'app/shared/hooks';\r\nimport { APIService } from 'app/pages';\r\nimport { IGridDefinitions, GridDefinitions, TrackedEntitySnapshot } from 'app/models';\r\nimport { Subscription } from 'rxjs';\r\n\r\nexport const SatelliteVesselTimeline: FunctionComponent = (props): ReactElement => {\r\n    const [index, setIndex] = useState<number>(0);\r\n    const [data, setData] = useState<TrackedEntitySnapshot[]>([]);\r\n    const gridDefinitions = useRef<IGridDefinitions>({ rowData: [], columnDefs: [] });\r\n\r\n    useEffect(() => {\r\n        let s: Subscription;\r\n        const service = new APIService();\r\n        if (data?.length === 0) {\r\n            const endpoint = service.getTrackedEntity6HourTimeline$();\r\n            s = endpoint.subscribe((localData: TrackedEntitySnapshot[]) => {\r\n                setData(localData);\r\n            });\r\n        }\r\n        return () => {\r\n            s && s.unsubscribe();\r\n        };\r\n    }, [data, setData, index]);\r\n\r\n    gridDefinitions.current = GridDefinitions.getPathsOverTimeDefinitions(data, index);\r\n\r\n    const Render = useRenderClass(SatelliteVesselTimelineRender);\r\n    Render.props = { data, index, setIndex, gridDefinitions };\r\n    return Render.display();\r\n};\r\n","import { FunctionComponent, ReactElement } from 'react';\r\nimport { K2Render } from 'app/k2-core/K2Render';\r\nimport { SatelliteVesselTimeline } from './satellite-vessel-timeline.container';\r\n\r\ninterface Example2PageViewModel {}\r\n\r\nexport class Example2PageRender<T extends Example2PageViewModel> extends K2Render<T> {\r\n    Component: FunctionComponent<T> = (props): ReactElement => {\r\n        return (\r\n            <div>\r\n                <h1>Satellite Vessel Paths Over Time</h1>\r\n                <SatelliteVesselTimeline />\r\n            </div>\r\n        );\r\n    };\r\n}\r\n","import { FunctionComponent, ReactElement } from 'react';\r\nimport { Example2PageRender } from './example-2-page.render';\r\nimport { useRenderClass } from 'app/shared/hooks';\r\n\r\nexport const Example2Page: FunctionComponent = (props): ReactElement => {            \r\n    const Render = useRenderClass(Example2PageRender);\r\n    return Render.display();\r\n};\r\n","import { FunctionComponent, ReactElement, Fragment } from 'react';\r\nimport { K2Render } from 'app/k2-core/K2Render';\r\nimport { K2JsonPreview } from 'app/k2-core';\r\n\r\nimport { Color } from 'cesium';\r\nimport { Entity, Globe, PointGraphics } from 'resium';\r\nimport { Viewer } from 'resium';\r\nimport { Vessel } from 'app/models';\r\n\r\ninterface AllVesselTrackPointsViewModel {\r\n    data: Vessel[];\r\n}\r\n\r\nexport class AllVesselTrackPointsRender<T extends AllVesselTrackPointsViewModel> extends K2Render<T> {\r\n    Component: FunctionComponent<T> = (props): ReactElement => {\r\n        if (Boolean(props.data?.length === 0)) {\r\n            return <div>Please Wait ...</div>;\r\n        }\r\n        const Self = this;\r\n        return (\r\n            <Fragment>\r\n                <Viewer timeline={true} fullscreenButton={false}>\r\n                    <Globe enableLighting={true} />\r\n                    <Self.AllVesselTrackEntity />\r\n                </Viewer>\r\n                <h2>Item count: {props.data?.length}</h2>\r\n            </Fragment>\r\n        );\r\n    };\r\n\r\n    AllVesselTrackEntity: FunctionComponent = (): ReactElement => {\r\n        return (\r\n            <Fragment>\r\n                {this.props.data.map((Vessel, index) => {\r\n                    return (\r\n                        <Entity key={`Vessel-entity-${index}`} name={`Vessel #${Vessel.id}`} position={Vessel.worldLocation}>\r\n                            <PointGraphics pixelSize={10} color={Color.LIGHTCORAL} />\r\n                        </Entity>\r\n                    );\r\n                })}\r\n            </Fragment>\r\n        );\r\n    };\r\n}\r\n","import { FunctionComponent, ReactElement, useState, useEffect } from 'react';\r\n\r\nimport { useRenderClass } from 'app/shared/hooks';\r\nimport { APIService } from 'app/pages';\r\n\r\nimport { Subscription } from 'rxjs';\r\nimport { Vessel } from 'app/models';\r\nimport { AllVesselTrackPointsRender } from './allvesseltracks-points.render';\r\n\r\nexport const AllVesselTracks: FunctionComponent = (): ReactElement => {\r\n    const [data, setData] = useState<Vessel[]>([]);\r\n\r\n    useEffect(() => {\r\n        let s: Subscription;\r\n        const service = new APIService();\r\n        if (data?.length === 0) {\r\n            const endpoint = service.getAllShipTracks$();\r\n            s = endpoint.subscribe((localData: Vessel[]) => {\r\n                setData(localData);\r\n            });\r\n        }\r\n        return () => {\r\n            //data.purge();\r\n            s && s.unsubscribe();\r\n        };\r\n    }, [data, setData]);\r\n\r\n    const Render = useRenderClass(AllVesselTrackPointsRender);\r\n    Render.props = { data };\r\n    return Render.display();\r\n};\r\n","import { FunctionComponent, ReactElement } from 'react';\r\nimport { K2Render } from 'app/k2-core/K2Render';\r\nimport React from 'react';\r\n\r\nimport { AllVesselTracks } from './allvesseltracks-points.container';\r\n\r\ninterface Example3PageViewModel {}\r\n\r\nexport class Example3PageRender<T extends Example3PageViewModel> extends K2Render<T> {\r\n    Component: FunctionComponent<T> = (): ReactElement => {\r\n        return (\r\n            <div>\r\n                <h1>All Vessels</h1>\r\n                <AllVesselTracks />\r\n            </div>\r\n        );\r\n    };\r\n}\r\n","import { FunctionComponent, ReactElement } from 'react';\r\nimport { Example3PageRender } from './example-3-page.render';\r\nimport { useRenderClass } from 'app/shared/hooks';\r\n\r\nexport const Example3Page: FunctionComponent = (props): ReactElement => {\r\n    const Render = useRenderClass(Example3PageRender);\r\n    return Render.display();\r\n};\r\n","import { Toast } from 'app/k2-core';\r\nimport { TrackedEntitySnapshot, Vessel } from 'app/models';\r\nimport { AppHttpService, FuncAny, ServiceLocator } from 'app/shared';\r\nimport { Subject } from 'rxjs';\r\n\r\nexport class APIService {\r\n    http = AppHttpService;\r\n\r\n    getTrackedEntitySnapshot$(): Subject<TrackedEntitySnapshot> {\r\n        const localSubject = new Subject<TrackedEntitySnapshot>();\r\n\r\n        const serviceOptions = new ServiceLocator({\r\n            serviceKey: 'getTrackedEntitySnapshot$',\r\n            localMockData: true,\r\n            localDataPath: '/satelliteVessel10.json',\r\n            endpoint: `/vault`\r\n        });\r\n\r\n        const httpSubject = this.http.get$<TrackedEntitySnapshot>(TrackedEntitySnapshot, serviceOptions);\r\n\r\n        httpSubject.subscribe((result) => {\r\n            if (result.hasError) {\r\n                console.warn(result.message, serviceOptions.serviceKey);\r\n                Toast.warning(result.message, serviceOptions.endpoint);\r\n            } else if (result.length <= 0) {\r\n                console.error('Must return at least 1 item in payload', serviceOptions.serviceKey);\r\n                Toast.error('Must return at least 1 item in payload', serviceOptions.serviceKey);\r\n            } else {\r\n                const newEntity = result.payload[0];\r\n                localSubject.next(newEntity);\r\n            }\r\n        });\r\n\r\n        return localSubject;\r\n    }\r\n\r\n    getDistanceTest$(): Subject<TrackedEntitySnapshot> {\r\n        const localSubject = new Subject<TrackedEntitySnapshot>();\r\n\r\n        const serviceOptions = new ServiceLocator({\r\n            serviceKey: 'getDistanceTest$',\r\n            localMockData: true,\r\n            localDataPath: '/distanceTest.json',\r\n            endpoint: `/vault`\r\n        });\r\n\r\n        const httpSubject = this.http.get$<TrackedEntitySnapshot>(TrackedEntitySnapshot, serviceOptions);\r\n\r\n        httpSubject.subscribe((result) => {\r\n            if (result.hasError) {\r\n                console.warn(result.message, serviceOptions.serviceKey);\r\n                Toast.warning(result.message, serviceOptions.endpoint);\r\n            } else if (result.length <= 0) {\r\n                console.error('Must return at least 1 item in payload', serviceOptions.serviceKey);\r\n                Toast.error('Must return at least 1 item in payload', serviceOptions.serviceKey);\r\n            } else {\r\n                const newEntity = result.payload[0];\r\n                localSubject.next(newEntity);\r\n            }\r\n        });\r\n\r\n        return localSubject;\r\n    }\r\n\r\n    getShipTracks$(): Subject<Vessel[]> {\r\n        const localSubject = new Subject<Vessel[]>();\r\n\r\n        const serviceOptions = new ServiceLocator({\r\n            serviceKey: 'getShipTracks$',\r\n            localMockData: true,\r\n            localDataPath: '/shipALASKASPIRIT.json',\r\n            endpoint: `/vault`\r\n        });\r\n\r\n        //use this because payload is wrapped in elastic search _source\r\n        const extractData: FuncAny = (obj: any) => {\r\n            return obj._source;\r\n        };\r\n        const httpSubject = this.http.get$<Vessel>(Vessel, serviceOptions, undefined, extractData);\r\n\r\n        httpSubject.subscribe((result) => {\r\n            if (result.hasError) {\r\n                console.warn(result.message, serviceOptions.serviceKey);\r\n                Toast.warning(result.message, serviceOptions.endpoint);\r\n            } else if (result.length <= 0) {\r\n                console.error('Must return at least 1 item in payload', serviceOptions.serviceKey);\r\n                Toast.error('Must return at least 1 item in payload', serviceOptions.serviceKey);\r\n            } else {\r\n                const newEntity = result.payload;\r\n                localSubject.next(newEntity);\r\n            }\r\n        });\r\n\r\n        return localSubject;\r\n    }\r\n\r\n    getTrackedEntity6HourTimeline$(): Subject<TrackedEntitySnapshot[]> {\r\n        const localSubject = new Subject<TrackedEntitySnapshot[]>();\r\n\r\n        const serviceOptions = new ServiceLocator({\r\n            serviceKey: 'getTrackedEntity6HourTimeline$',\r\n            localMockData: true,\r\n            localDataPath: '/satelliteVessel10Hours6.json',\r\n            endpoint: `/vault`\r\n        });\r\n\r\n        const httpSubject = this.http.get$<TrackedEntitySnapshot>(TrackedEntitySnapshot, serviceOptions);\r\n\r\n        httpSubject.subscribe((result) => {\r\n            if (result.hasError) {\r\n                console.warn(result.message, serviceOptions.serviceKey);\r\n                Toast.warning(result.message, serviceOptions.endpoint);\r\n            } else if (result.length <= 0) {\r\n                console.error('Must return at least 1 item in payload', serviceOptions.serviceKey);\r\n                Toast.error('Must return at least 1 item in payload', serviceOptions.serviceKey);\r\n            } else {\r\n                const newEntity = result.payload;\r\n                localSubject.next(newEntity);\r\n            }\r\n        });\r\n\r\n        return localSubject;\r\n    }\r\n\r\n    getTrackedEntityPythonOutput1$(): Subject<TrackedEntitySnapshot[]> {\r\n        const localSubject = new Subject<TrackedEntitySnapshot[]>();\r\n\r\n        const serviceOptions = new ServiceLocator({\r\n            serviceKey: 'getTrackedEntity6HourTimeline$',\r\n            localMockData: true,\r\n            localDataPath: '/pythonoutput20210107_1500.json',\r\n            endpoint: `/vault`\r\n        });\r\n\r\n        const httpSubject = this.http.get$<TrackedEntitySnapshot>(TrackedEntitySnapshot, serviceOptions);\r\n\r\n        httpSubject.subscribe((result) => {\r\n            if (result.hasError) {\r\n                console.warn(result.message, serviceOptions.serviceKey);\r\n                Toast.warning(result.message, serviceOptions.endpoint);\r\n            } else if (result.length <= 0) {\r\n                console.error('Must return at least 1 item in payload', serviceOptions.serviceKey);\r\n                Toast.error('Must return at least 1 item in payload', serviceOptions.serviceKey);\r\n            } else {\r\n                const newEntity = result.payload;\r\n                localSubject.next(newEntity);\r\n            }\r\n        });\r\n\r\n        return localSubject;\r\n    }\r\n\r\n    getTrackedEntityPipelineOutput9Sat10Ves$(): Subject<TrackedEntitySnapshot[]> {\r\n        const localSubject = new Subject<TrackedEntitySnapshot[]>();\r\n\r\n        const serviceOptions = new ServiceLocator({\r\n            serviceKey: 'getTrackedEntity6HourTimeline$',\r\n            localMockData: true,\r\n            localDataPath: '/9sats_10vessels_20170115_pipeline_output.json',\r\n            endpoint: `/vault`\r\n        });\r\n\r\n        const httpSubject = this.http.get$<TrackedEntitySnapshot>(TrackedEntitySnapshot, serviceOptions);\r\n\r\n        httpSubject.subscribe((result) => {\r\n            if (result.hasError) {\r\n                console.warn(result.message, serviceOptions.serviceKey);\r\n                Toast.warning(result.message, serviceOptions.endpoint);\r\n            } else if (result.length <= 0) {\r\n                console.error('Must return at least 1 item in payload', serviceOptions.serviceKey);\r\n                Toast.error('Must return at least 1 item in payload', serviceOptions.serviceKey);\r\n            } else {\r\n                const newEntity = result.payload;\r\n                localSubject.next(newEntity);\r\n            }\r\n        });\r\n\r\n        return localSubject;\r\n    }\r\n\r\n    getAllShipTracks$(): Subject<Vessel[]> {\r\n        const localSubject = new Subject<Vessel[]>();\r\n\r\n        const serviceOptions = new ServiceLocator({\r\n            serviceKey: 'getAllShipTracks$',\r\n            localMockData: true,\r\n            localDataPath: '/ships10000.json',\r\n            endpoint: `/vault`\r\n        });\r\n\r\n        //use this because payload is wrapped in elastic search _source\r\n        const extractData: FuncAny = (obj: any) => {\r\n            return obj._source;\r\n        };\r\n        const httpSubject = this.http.get$<Vessel>(Vessel, serviceOptions, undefined, extractData);\r\n\r\n        httpSubject.subscribe((result) => {\r\n            if (result.hasError) {\r\n                console.warn(result.message, serviceOptions.serviceKey);\r\n                Toast.warning(result.message, serviceOptions.endpoint);\r\n            } else if (result.length <= 0) {\r\n                console.error('Must return at least 1 item in payload', serviceOptions.serviceKey);\r\n                Toast.error('Must return at least 1 item in payload', serviceOptions.serviceKey);\r\n            } else {\r\n                const newEntity = result.payload;\r\n                localSubject.next(newEntity);\r\n            }\r\n        });\r\n\r\n        return localSubject;\r\n    }\r\n}\r\n","import { defaultTheme, RaThemeOptions, RaThemeOverrides } from 'react-admin';\r\nimport { createMuiTheme } from '@material-ui/core/styles';\r\n\r\nconst overrides = {\r\n    RaMenu: {\r\n        open: { width: '100%' }\r\n    }\r\n} as RaThemeOverrides;\r\n\r\nconst appTheme = {\r\n    sidebar: {\r\n        width: 240\r\n    },\r\n    overrides\r\n} as RaThemeOptions;\r\n\r\nexport const theme = createMuiTheme(Object.assign(defaultTheme, appTheme));\r\n","import { FunctionComponent, ReactElement, Fragment, MutableRefObject } from 'react';\r\nimport { K2Render } from 'app/k2-core/K2Render';\r\nimport { TrackedEntitySnapshot, TrackedEntityGeoLocation, IGridDefinitions } from 'app/models';\r\nimport { Cartesian3, Clock as CesiumClock, ClockRange, ClockStep, Color, JulianDate, Material, NearFarScalar } from 'cesium';\r\nimport { BillboardGraphics, Clock, Entity, EntityDescription, Globe, LabelGraphics, PointGraphics, Polyline, PolylineCollection } from 'resium';\r\nimport { Viewer } from 'resium';\r\nimport { Timeline } from 'app/elementals/Timeline';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { Box } from '@material-ui/core';\r\nimport { K2Grid } from 'app/k2-mui-core/data-grid/ag-grid';\r\n\r\ninterface SatelliteVesselTimelineViewModel {\r\n    data: TrackedEntitySnapshot[];\r\n    index: number;\r\n    setIndex: Function;\r\n    gridDefinitions: MutableRefObject<IGridDefinitions>;\r\n}\r\n\r\nconst styles = makeStyles((theme) => {\r\n    return {\r\n        viewer: {\r\n            position: 'relative'\r\n        },\r\n        display: {\r\n            border: '1px solid white',\r\n            backgroundColor: 'rgba(255,255,255,0.075)',\r\n            fontSize: '12px',\r\n            fontWeight: 700,\r\n            height: '75%',\r\n            paddingLeft: theme.spacing(3),\r\n            paddingRight: theme.spacing(3),\r\n            margin: theme.spacing(2),\r\n            overflowY: 'auto',\r\n            color: theme.palette.common.white,\r\n            position: 'absolute',\r\n            top: 0\r\n        }\r\n    };\r\n});\r\n\r\nexport class SatelliteVesselTimelineRender<T extends SatelliteVesselTimelineViewModel> extends K2Render<T> {\r\n    currentSnapshot: TrackedEntitySnapshot;\r\n    dataPoints: TrackedEntitySnapshot[];\r\n    start: JulianDate;\r\n    finish: JulianDate;\r\n    onTickFunc = (clock: CesiumClock) => {\r\n        const num = JulianDate.secondsDifference(clock.currentTime, this.start);\r\n        const den = JulianDate.secondsDifference(this.finish, this.start);\r\n        let localIndex = Math.floor(this.dataPoints.length * (num / den));\r\n\r\n        if (num > den) {\r\n            localIndex = 0;\r\n        }\r\n        if (localIndex !== this.props.index) {\r\n            this.props.setIndex(localIndex);\r\n        }\r\n    };\r\n\r\n    Component: FunctionComponent<T> = (props): ReactElement => {\r\n        if (Boolean(props.data?.length === 0)) {\r\n            return <div>Please Wait ...</div>;\r\n        }\r\n        const classes = styles();\r\n        const Self = this;\r\n        if (this.start === undefined) {\r\n            this.dataPoints = props.data;\r\n            this.start = this.dataPoints[0].startTime;\r\n            this.finish = this.dataPoints[this.dataPoints.length - 1].startTime;\r\n        }\r\n\r\n        this.currentSnapshot = this.dataPoints[props.index];\r\n        const current = this.currentSnapshot.startTime;\r\n\r\n        return (\r\n            <Fragment>\r\n                <Viewer timeline={true} fullscreenButton={false} className={classes.viewer}>\r\n                    <Globe enableLighting={true} />\r\n                    <Clock\r\n                        startTime={this.start}\r\n                        currentTime={current}\r\n                        stopTime={this.finish}\r\n                        clockRange={ClockRange.LOOP_STOP}\r\n                        clockStep={ClockStep.SYSTEM_CLOCK_MULTIPLIER}\r\n                        multiplier={120} // how much time to advance each tick\r\n                        shouldAnimate={false}\r\n                        onTick={this.onTickFunc}\r\n                    />\r\n                    <Timeline startTime={this.start} stopTime={this.finish} />\r\n                    <Self.SatelliteEntity />\r\n                    <Self.VesselEntity />\r\n                    <Self.HitEntity />\r\n                    <Self.DisplayTable />\r\n                </Viewer>\r\n\r\n                <Box mt={4}>\r\n                    <h4>{this.dataPoints[props.index].utc}</h4>\r\n                    <K2Grid {...props.gridDefinitions.current} />\r\n                </Box>\r\n            </Fragment>\r\n        );\r\n    };\r\n\r\n    SatelliteEntity: FunctionComponent = (props): ReactElement => {\r\n        const Self = this;\r\n        const scaleByDistance = new NearFarScalar(1.5e2, 16, 8.0e6, 0.5);\r\n        return (\r\n            <Fragment>\r\n                {this.currentSnapshot?.satellites.map((satellite, index) => {\r\n                    return (\r\n                        <Entity key={`satellite-${satellite.id}`} id={`satellite-${satellite.id}`} name={`Satellite #${satellite.id}`} position={satellite.worldLocation}>\r\n                            <Self.Description {...satellite} />\r\n                            <LabelGraphics text={`${satellite.id}`} eyeOffset={new Cartesian3(1e6, 0, 0)} scaleByDistance={scaleByDistance} />\r\n                            <BillboardGraphics image=\"/images/satellite0-64.png\" scaleByDistance={scaleByDistance} />\r\n                        </Entity>\r\n                    );\r\n                })}\r\n            </Fragment>\r\n        );\r\n    };\r\n\r\n    VesselEntity: FunctionComponent = (props): ReactElement => {\r\n        const Self = this;\r\n        return (\r\n            <Fragment>\r\n                {this.currentSnapshot?.vessels.map((vessel, index) => {\r\n                    return (\r\n                        <Entity key={`vessel-entity-${index}`} name={`Vessel #${vessel.id}`} position={vessel.worldLocation}>\r\n                            <Self.Description {...vessel} />\r\n                            <PointGraphics pixelSize={8} color={Color.PLUM} />\r\n                        </Entity>\r\n                    );\r\n                })}\r\n            </Fragment>\r\n        );\r\n    };\r\n\r\n    HitEntity: FunctionComponent = (props): ReactElement => {\r\n        return (\r\n            <Fragment>\r\n                {this.currentSnapshot?.hits.map((hit, index) => {\r\n                    let satelliteWorldLocation = hit.satellite.worldLocation;\r\n                    let vesselWorldLocation = hit.vessel.worldLocation;\r\n                    const color = hit.hit ? { color: Color.YELLOW } : { color: Color.LAVENDER };\r\n                    const material = Material.fromType('Color', color);\r\n\r\n                    return (\r\n                        <PolylineCollection key={`s-v-polyline-${index}`}>\r\n                            <Polyline positions={[satelliteWorldLocation, vesselWorldLocation]} material={material} />\r\n                        </PolylineCollection>\r\n                    );\r\n                })}\r\n            </Fragment>\r\n        );\r\n    };\r\n\r\n    Description: FunctionComponent<Partial<TrackedEntityGeoLocation>> = (props): ReactElement => {\r\n        return (\r\n            <EntityDescription>\r\n                {props.targets?.map((target) => {\r\n                    return <div key={`${target?.id}`}>{target?.id}</div>;\r\n                })}\r\n                <h1>{props.lat}</h1>\r\n                <h1>{props.lon}</h1>\r\n                {Boolean(props.alt) && <h1>{props.alt}</h1>}\r\n            </EntityDescription>\r\n        );\r\n    };\r\n\r\n    DisplayTable: FunctionComponent = (props): ReactElement => {\r\n        const classes = styles();\r\n\r\n        const displayItems = this.currentSnapshot?.satellites\r\n            .filter((satellite) => {\r\n                return Boolean(satellite.targets.length);\r\n            })\r\n            .map((satellite) => {\r\n                return (\r\n                    <Box key={`display-satellite-${satellite.id}`} my={1}>\r\n                        <div>Satellite {satellite.id} can see Vessels:</div>\r\n                        {satellite.targets.map((target) => {\r\n                            return <div key={`satellite-target-${satellite.id}-${target.id}`}>{target.id}</div>;\r\n                        })}\r\n                    </Box>\r\n                );\r\n            });\r\n\r\n        return Boolean(displayItems.length) ? <div className={classes.display}>{displayItems}</div> : <Fragment />;\r\n    };\r\n}\r\n","import { FunctionComponent, ReactElement, useState, useEffect, useRef } from 'react';\r\nimport { SatelliteVesselTimelineRender } from './satellite-vessel-timeline.render';\r\nimport { useRenderClass } from 'app/shared/hooks';\r\nimport { APIService } from 'app/pages';\r\nimport { IGridDefinitions, GridDefinitions, TrackedEntitySnapshot } from 'app/models';\r\nimport { Subscription } from 'rxjs';\r\n\r\nexport const SatelliteVesselTimeline: FunctionComponent = (props): ReactElement => {\r\n    const [index, setIndex] = useState<number>(0);\r\n    const [data, setData] = useState<TrackedEntitySnapshot[]>([]);\r\n    const gridDefinitions = useRef<IGridDefinitions>({ rowData: [], columnDefs: [] });\r\n\r\n    useEffect(() => {\r\n        let s: Subscription;\r\n        const service = new APIService();\r\n        if (data?.length === 0) {\r\n            const endpoint = service.getTrackedEntityPythonOutput1$();\r\n            s = endpoint.subscribe((localData: TrackedEntitySnapshot[]) => {\r\n                setData(localData);\r\n            });\r\n        }\r\n        return () => {\r\n            s && s.unsubscribe();\r\n        };\r\n    }, [data, setData, index]);\r\n\r\n    gridDefinitions.current = GridDefinitions.getPathsOverTimeDefinitions(data, index);\r\n\r\n    const Render = useRenderClass(SatelliteVesselTimelineRender);\r\n    Render.props = { data, index, setIndex, gridDefinitions };\r\n    return Render.display();\r\n};\r\n","import { FunctionComponent, ReactElement } from 'react';\r\nimport { K2Render } from 'app/k2-core/K2Render';\r\nimport { SatelliteVesselTimeline } from './satellite-vessel-timeline.container';\r\n\r\ninterface PythonOutput1PageViewModel {}\r\n\r\nexport class PythonOutput1PageRender<T extends PythonOutput1PageViewModel> extends K2Render<T> {\r\n    Component: FunctionComponent<T> = (props): ReactElement => {\r\n        return (\r\n            <div>\r\n                <h1>Satellite Vessel Paths Over Time</h1>\r\n                <SatelliteVesselTimeline />\r\n            </div>\r\n        );\r\n    };\r\n}\r\n","import { FunctionComponent, ReactElement } from 'react';\r\nimport { PythonOutput1PageRender } from './python-output-1-page.render';\r\nimport { useRenderClass } from 'app/shared/hooks';\r\n\r\nexport const PythonOutput1Page: FunctionComponent = (props): ReactElement => {\r\n    const Render = useRenderClass(PythonOutput1PageRender);\r\n    return Render.display();\r\n};\r\n","import { FunctionComponent, ReactElement, Fragment, MutableRefObject } from 'react';\r\nimport { K2Render } from 'app/k2-core/K2Render';\r\nimport { TrackedEntitySnapshot, TrackedEntityGeoLocation, IGridDefinitions } from 'app/models';\r\nimport { Cartesian3, Clock as CesiumClock, ClockRange, ClockStep, Color, JulianDate, Material, NearFarScalar } from 'cesium';\r\nimport { BillboardGraphics, Clock, Entity, EntityDescription, Globe, LabelGraphics, PointGraphics, Polyline, PolylineCollection } from 'resium';\r\nimport { Viewer } from 'resium';\r\nimport { Timeline } from 'app/elementals/Timeline';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { Box } from '@material-ui/core';\r\nimport { K2Grid } from 'app/k2-mui-core/data-grid/ag-grid';\r\n\r\ninterface SatelliteVesselTimelineViewModel {\r\n    data: TrackedEntitySnapshot[];\r\n    index: number;\r\n    setIndex: Function;\r\n    gridDefinitions: MutableRefObject<IGridDefinitions>;\r\n}\r\n\r\nconst styles = makeStyles((theme) => {\r\n    return {\r\n        viewer: {\r\n            position: 'relative'\r\n        },\r\n        display: {\r\n            border: '1px solid white',\r\n            backgroundColor: 'rgba(255,255,255,0.075)',\r\n            fontSize: '12px',\r\n            fontWeight: 700,\r\n            height: '75%',\r\n            paddingLeft: theme.spacing(3),\r\n            paddingRight: theme.spacing(3),\r\n            margin: theme.spacing(2),\r\n            overflowY: 'auto',\r\n            color: theme.palette.common.white,\r\n            position: 'absolute',\r\n            top: 0\r\n        }\r\n    };\r\n});\r\n\r\nexport class SatelliteVesselTimelineRender<T extends SatelliteVesselTimelineViewModel> extends K2Render<T> {\r\n    currentSnapshot: TrackedEntitySnapshot;\r\n    dataPoints: TrackedEntitySnapshot[];\r\n    start: JulianDate;\r\n    finish: JulianDate;\r\n    onTickFunc = (clock: CesiumClock) => {\r\n        const num = JulianDate.secondsDifference(clock.currentTime, this.start);\r\n        const den = JulianDate.secondsDifference(this.finish, this.start);\r\n        let localIndex = Math.floor(this.dataPoints.length * (num / den));\r\n\r\n        if (num > den) {\r\n            localIndex = 0;\r\n        }\r\n        if (localIndex !== this.props.index) {\r\n            this.props.setIndex(localIndex);\r\n        }\r\n    };\r\n\r\n    Component: FunctionComponent<T> = (props): ReactElement => {\r\n        if (Boolean(props.data?.length === 0)) {\r\n            return <div>Please Wait ...</div>;\r\n        }\r\n        const classes = styles();\r\n        const Self = this;\r\n        if (this.start === undefined) {\r\n            this.dataPoints = props.data;\r\n            this.start = this.dataPoints[0].startTime;\r\n            this.finish = this.dataPoints[this.dataPoints.length - 1].startTime;\r\n        }\r\n\r\n        this.currentSnapshot = this.dataPoints[props.index];\r\n        const current = this.currentSnapshot.startTime;\r\n\r\n        return (\r\n            <Fragment>\r\n                <Viewer timeline={true} fullscreenButton={false} className={classes.viewer}>\r\n                    <Globe enableLighting={true} />\r\n                    <Clock\r\n                        startTime={this.start}\r\n                        currentTime={current}\r\n                        stopTime={this.finish}\r\n                        clockRange={ClockRange.LOOP_STOP}\r\n                        clockStep={ClockStep.SYSTEM_CLOCK_MULTIPLIER}\r\n                        multiplier={120} // how much time to advance each tick\r\n                        shouldAnimate={false}\r\n                        onTick={this.onTickFunc}\r\n                    />\r\n                    <Timeline startTime={this.start} stopTime={this.finish} />\r\n                    <Self.SatelliteEntity />\r\n                    <Self.VesselEntity />\r\n                    <Self.HitEntity />\r\n                    <Self.DisplayTable />\r\n                </Viewer>\r\n\r\n                <Box mt={4}>\r\n                    <h4>{this.dataPoints[props.index].utc}</h4>\r\n                    <K2Grid {...props.gridDefinitions.current} />\r\n                </Box>\r\n            </Fragment>\r\n        );\r\n    };\r\n\r\n    SatelliteEntity: FunctionComponent = (props): ReactElement => {\r\n        const Self = this;\r\n        const scaleByDistance = new NearFarScalar(1.5e2, 16, 8.0e6, 0.5);\r\n        return (\r\n            <Fragment>\r\n                {this.currentSnapshot?.satellites.map((satellite, index) => {\r\n                    return (\r\n                        <Entity key={`satellite-${satellite.id}`} id={`satellite-${satellite.id}`} name={`Satellite #${satellite.id}`} position={satellite.worldLocation}>\r\n                            <Self.Description {...satellite} />\r\n                            <LabelGraphics text={`${satellite.id}`} eyeOffset={new Cartesian3(1e6, 0, 0)} scaleByDistance={scaleByDistance} />\r\n                            <BillboardGraphics image=\"/images/satellite0-64.png\" scaleByDistance={scaleByDistance} />\r\n                        </Entity>\r\n                    );\r\n                })}\r\n            </Fragment>\r\n        );\r\n    };\r\n\r\n    VesselEntity: FunctionComponent = (props): ReactElement => {\r\n        const Self = this;\r\n        return (\r\n            <Fragment>\r\n                {this.currentSnapshot?.vessels.map((vessel, index) => {\r\n                    return (\r\n                        <Entity key={`vessel-entity-${index}`} name={`Vessel #${vessel.id}`} position={vessel.worldLocation}>\r\n                            <Self.Description {...vessel} />\r\n                            <PointGraphics pixelSize={8} color={Color.PLUM} />\r\n                        </Entity>\r\n                    );\r\n                })}\r\n            </Fragment>\r\n        );\r\n    };\r\n\r\n    HitEntity: FunctionComponent = (props): ReactElement => {\r\n        return (\r\n            <Fragment>\r\n                {this.currentSnapshot?.hits.map((hit, index) => {\r\n                    let satelliteWorldLocation = hit.satellite.worldLocation;\r\n                    let vesselWorldLocation = hit.vessel.worldLocation;\r\n                    const color = hit.hit ? { color: Color.YELLOW } : { color: Color.LAVENDER };\r\n                    const material = Material.fromType('Color', color);\r\n\r\n                    return (\r\n                        <PolylineCollection key={`s-v-polyline-${index}`}>\r\n                            <Polyline positions={[satelliteWorldLocation, vesselWorldLocation]} material={material} />\r\n                        </PolylineCollection>\r\n                    );\r\n                })}\r\n            </Fragment>\r\n        );\r\n    };\r\n\r\n    Description: FunctionComponent<Partial<TrackedEntityGeoLocation>> = (props): ReactElement => {\r\n        return (\r\n            <EntityDescription>\r\n                {props.targets?.map((target) => {\r\n                    return <div key={`${target?.id}`}>{target?.id}</div>;\r\n                })}\r\n                <h1>{props.lat}</h1>\r\n                <h1>{props.lon}</h1>\r\n                {Boolean(props.alt) && <h1>{props.alt}</h1>}\r\n            </EntityDescription>\r\n        );\r\n    };\r\n\r\n    DisplayTable: FunctionComponent = (props): ReactElement => {\r\n        const classes = styles();\r\n\r\n        const displayItems = this.currentSnapshot?.satellites\r\n            .filter((satellite) => {\r\n                return Boolean(satellite.targets.length);\r\n            })\r\n            .map((satellite) => {\r\n                return (\r\n                    <Box key={`display-satellite-${satellite.id}`} my={1}>\r\n                        <div>Satellite {satellite.id} can see Vessels:</div>\r\n                        {satellite.targets.map((target) => {\r\n                            return <div key={`satellite-target-${satellite.id}-${target.id}`}>{target.id}</div>;\r\n                        })}\r\n                    </Box>\r\n                );\r\n            });\r\n\r\n        return Boolean(displayItems.length) ? <div className={classes.display}>{displayItems}</div> : <Fragment />;\r\n    };\r\n}\r\n","import { FunctionComponent, ReactElement, useState, useEffect, useRef } from 'react';\r\nimport { SatelliteVesselTimelineRender } from './satellite-vessel-timeline.render';\r\nimport { useRenderClass } from 'app/shared/hooks';\r\nimport { APIService } from 'app/pages';\r\nimport { IGridDefinitions, GridDefinitions, TrackedEntitySnapshot } from 'app/models';\r\nimport { Subscription } from 'rxjs';\r\n\r\nexport const SatelliteVesselTimeline: FunctionComponent = (props): ReactElement => {\r\n    const [index, setIndex] = useState<number>(0);\r\n    const [data, setData] = useState<TrackedEntitySnapshot[]>([]);\r\n    const gridDefinitions = useRef<IGridDefinitions>({ rowData: [], columnDefs: [] });\r\n\r\n    useEffect(() => {\r\n        let s: Subscription;\r\n        const service = new APIService();\r\n        if (data?.length === 0) {\r\n            const endpoint = service.getTrackedEntityPipelineOutput9Sat10Ves$();\r\n            s = endpoint.subscribe((localData: TrackedEntitySnapshot[]) => {\r\n                setData(localData);\r\n            });\r\n        }\r\n        return () => {\r\n            s && s.unsubscribe();\r\n        };\r\n    }, [data, setData, index]);\r\n\r\n    gridDefinitions.current = GridDefinitions.getPathsOverTimeDefinitions(data, index);\r\n\r\n    const Render = useRenderClass(SatelliteVesselTimelineRender);\r\n    Render.props = { data, index, setIndex, gridDefinitions };\r\n    return Render.display();\r\n};\r\n","import { FunctionComponent, ReactElement } from 'react';\r\nimport { K2Render } from 'app/k2-core/K2Render';\r\nimport { SatelliteVesselTimeline } from './satellite-vessel-timeline.container';\r\n\r\ninterface PipelineOutput9Sat10VesPageViewModel {}\r\n\r\nexport class PipelineOutput9Sat10VesPageRender<T extends PipelineOutput9Sat10VesPageViewModel> extends K2Render<T> {\r\n    Component: FunctionComponent<T> = (props): ReactElement => {\r\n        return (\r\n            <div>\r\n                <h1>Satellite Vessel Paths Over Time</h1>\r\n                <SatelliteVesselTimeline />\r\n            </div>\r\n        );\r\n    };\r\n}\r\n","import { FunctionComponent, ReactElement } from 'react';\r\nimport { PipelineOutput9Sat10VesPageRender } from './pipeline-ouput-9-sat-10-ves-page.render';\r\nimport { useRenderClass } from 'app/shared/hooks';\r\n\r\nexport const PipelineOutput9Sat10VesPage: FunctionComponent = (props): ReactElement => {\r\n    const Render = useRenderClass(PipelineOutput9Sat10VesPageRender);\r\n    return Render.display();\r\n};\r\n","import React, { FunctionComponent, ReactElement } from 'react';\r\nimport { K2Render } from 'app/k2-core/K2Render';\r\nimport { Admin, DataProvider, Resource } from 'react-admin';\r\nimport { Home, Tune } from '@material-ui/icons';\r\nimport { HomePage, Example1Page, Example2Page, Example3Page } from 'app/pages';\r\nimport { theme } from 'app/theme';\r\nimport { PythonOutput1Page } from 'app/pages/python-output-1-page';\r\nimport { PipelineOutput9Sat10VesPage } from 'app/pages/pipeline-ouput-9-sat-10-ves-page';\r\ninterface PageResourceViewModel {\r\n    dataProvider: DataProvider;\r\n}\r\nexport class PageResourceRender<T extends PageResourceViewModel> extends K2Render<T> {\r\n    Component: FunctionComponent<T> = (props): ReactElement => {\r\n        return (\r\n            <Admin dataProvider={props.dataProvider} disableTelemetry={true} theme={theme}>\r\n                <Resource name=\"home\" list={HomePage} icon={Home} options={{ label: 'Snapshot' }} />\r\n                <Resource name=\"python-output-1\" list={PythonOutput1Page} icon={Tune} options={{ label: 'Python Output 1' }} />\r\n                <Resource name=\"pipeline-output-1\" list={PipelineOutput9Sat10VesPage} icon={Tune} options={{ label: 'Pipeline Output 9,10' }} />\r\n                <Resource name=\"example-1\" list={Example1Page} icon={Tune} options={{ label: 'Ship ALASKA SPIRIT' }} />\r\n                <Resource name=\"example-2\" list={Example2Page} icon={Tune} options={{ label: 'Paths Over Time' }} />\r\n                <Resource name=\"example-3\" list={Example3Page} icon={Tune} options={{ label: 'All Vessels' }} />\r\n            </Admin>\r\n        );\r\n    };\r\n}\r\n","import { FunctionComponent, ReactElement, useState } from 'react';\r\nimport { PageResourceRender } from './page-resource.render';\r\nimport fakeDataProvider from 'ra-data-fakerest';\r\n\r\nexport const PageResource: FunctionComponent = (props): ReactElement => {\r\n    const Render = useState(new PageResourceRender())[0];\r\n\r\n    const dataProvider = fakeDataProvider({});\r\n\r\n    Render.props = {\r\n        dataProvider\r\n    };\r\n    return Render.display();\r\n};\r\n","import React, { FunctionComponent, ReactElement, Fragment } from 'react';\r\nimport { CssBaseline, Snackbar } from '@material-ui/core';\r\nimport { K2Alert, K2AlertProps } from 'app/k2-core';\r\nimport { K2Render } from 'app/k2-core/K2Render';\r\nimport { PageResource } from './page-resource.container';\r\n\r\ninterface PageLayoutViewModel {\r\n    snackbarQueue: K2AlertProps[];\r\n}\r\nexport class PageLayoutRender<T extends PageLayoutViewModel> extends K2Render<T> {\r\n    getSnackbarTopPosition(index: number) {\r\n        return `${24 + index * 56}px`;\r\n    }\r\n    Component: FunctionComponent<T> = (props): ReactElement => {\r\n        return (\r\n            <Fragment>\r\n                <CssBaseline />\r\n                <PageResource />\r\n                {props.snackbarQueue.map((snackbarProps, index) => {\r\n                    return (\r\n                        <Snackbar\r\n                            key={`snackbar-${index}`}\r\n                            anchorOrigin={{\r\n                                vertical: 'top',\r\n                                horizontal: 'center'\r\n                            }}\r\n                            onClose={snackbarProps.onClose}\r\n                            open={snackbarProps.open}\r\n                            autoHideDuration={snackbarProps.autoHideDuration}\r\n                            style={{ top: this.getSnackbarTopPosition(index) }}\r\n                        >\r\n                            <Fragment>\r\n                                {snackbarProps.open && <K2Alert severity={snackbarProps.severity} message={snackbarProps.message} />}\r\n                                {!snackbarProps.open && <span />}\r\n                            </Fragment>\r\n                        </Snackbar>\r\n                    );\r\n                })}\r\n            </Fragment>\r\n        );\r\n    };\r\n}\r\n","import { FunctionComponent, ReactElement, useState } from 'react';\r\nimport { PageLayoutRender } from './page-layout.render';\r\n\r\nexport const PageLayout: FunctionComponent = (props): ReactElement => {\r\n    const Render = useState(new PageLayoutRender())[0];\r\n    Render.props = {\r\n        snackbarQueue: []\r\n    };\r\n    return Render.display();\r\n};\r\n","import React, { StrictMode, FunctionComponent, ReactElement } from 'react';\r\nimport NoSsr from '@material-ui/core/NoSsr';\r\nimport { PageLayout } from 'app/elementals';\r\n\r\nexport const AppRender: FunctionComponent = (props): ReactElement => {\r\n    return (\r\n        <StrictMode>\r\n            <NoSsr>\r\n                <PageLayout />\r\n            </NoSsr>\r\n        </StrictMode>\r\n    );\r\n};\r\n","import { FunctionComponent, ReactElement, createElement } from 'react';\r\nimport { AppRender } from './app.render';\r\n\r\nexport const App: FunctionComponent<{}> = (): ReactElement => {\r\n    return createElement(AppRender);\r\n};\r\n","import configDevelopment from 'assets/config-local.json';\r\nimport configProduction from 'assets/config.json';\r\nimport { ServiceLocator } from 'app/shared';\r\nimport { AppHttpService, ModelBase, Environment } from 'app/shared';\r\nimport { Subject } from 'rxjs';\r\nimport { Ion } from 'cesium';\r\n\r\nexport class AppService {\r\n    static pingServer$(): Subject<boolean> {\r\n        const localSubject = new Subject<boolean>();\r\n\r\n        const serviceOptions = new ServiceLocator({\r\n            serviceKey: 'pingServer$',\r\n            endpoint: `/ping`\r\n        });\r\n\r\n        const http = AppHttpService.get$<ModelBase>(ModelBase, serviceOptions).subscribe(\r\n            ({ message, error }) => {\r\n                error && console.log(error);\r\n\r\n                let health = !!message && message.toLowerCase().indexOf('up') >= 0;\r\n\r\n                http.unsubscribe();\r\n                localSubject.next(health);\r\n                localSubject.complete();\r\n            },\r\n            (error) => {\r\n                localSubject.error(error);\r\n            }\r\n        );\r\n\r\n        return localSubject;\r\n    }\r\n\r\n    static configureCesium(config: any) {\r\n        Ion.defaultAccessToken = config.cesiumToken;\r\n    }\r\n\r\n    static loadConfiguration$(): Subject<boolean> {\r\n        const localSubject = new Subject<boolean>();\r\n        const env = process.env.NODE_ENV;\r\n\r\n        // Decide which config file to use; assume development\r\n        // let config: any = configProduction;\r\n\r\n        let config: any = configDevelopment;\r\n        if (env === 'production') {\r\n            config = configProduction;\r\n        }\r\n\r\n        Environment.override(config);\r\n\r\n        // Used fetch because envVars.json does not follow our JSON payload pattern\r\n        AppHttpService.rawFetch$('/envVars.json').subscribe(\r\n            (data: any) => {\r\n                Environment.envVars = data;\r\n\r\n                // if config.baseUrl exists overrride envVars.json REACT_APP_BASE_URL with config.baseUrl\r\n                if (!Environment.production && config.baseUrl) {\r\n                    Environment.envVars.REACT_APP_BASE_URL = config.baseUrl;\r\n                }\r\n\r\n                AppService.configureCesium(config);\r\n                localSubject.next(true);\r\n                localSubject.complete();\r\n            },\r\n            (error) => {\r\n                localSubject.error(error);\r\n            }\r\n        );\r\n\r\n        return localSubject;\r\n    }\r\n}\r\n","import ReactDOM from 'react-dom';\r\nimport { App } from './app/app.container';\r\nimport { AppService } from './app/app.service';\r\nimport './app/index.scss';\r\nimport { Environment } from 'app/shared';\r\nimport { Toast } from 'app/k2-core';\r\n\r\nAppService.loadConfiguration$().subscribe((ok) => {\r\n    ReactDOM.render(<App />, document.getElementById('root'));\r\n\r\n    AppService.pingServer$().subscribe(\r\n        (isApiAccessible) => {\r\n            Environment.didHealthCheckPass = isApiAccessible;\r\n\r\n            const buildEnv = process.env.NODE_ENV;\r\n            const message = `${buildEnv}: ${Environment.version} \\n ${Environment.envVars.REACT_APP_BASE_URL}`;\r\n            Toast.info(message);\r\n        },\r\n        (error) => {\r\n            Environment.didHealthCheckPass = false;\r\n        }\r\n    );\r\n});\r\n"],"sourceRoot":""}